Corrigir e otimizar a geraÃ§Ã£o do Plano de AÃ§Ã£o dentro do ActionPlanCard, garantindo que:

âœ… Todos os dados coletados do usuÃ¡rio (mensagem inicial e respostas do quiz) sejam analisados pela IA Gemini, sem automatizaÃ§Ã£o ou uso de dados padronizados do sistema.

âœ… A IA Gemini processe todas as informaÃ§Ãµes, consulte a lista de 137 atividades disponÃ­veis, e gere atividades personalizadas com tÃ­tulos e descriÃ§Ãµes reais alinhadas ao contexto enviado pelo usuÃ¡rio.

âœ… Os mini-cards de atividades em formato de checkbox exibidos dentro do ActionPlanCard reflitam fielmente essa anÃ¡lise, sem uso de dados fixos.

ğŸ”¹ Contexto atual da estrutura:
ğŸ“‚ Arquivos existentes:
SchoolPowerPage.tsx: PÃ¡gina principal da seÃ§Ã£o.

TopHeader, ProfileSelector, ChatInput, SideMenu, ParticlesBackground: Estrutura visual e UX.

ContextualizationCard.tsx: Card de Quiz de ContextualizaÃ§Ã£o.

ActionPlanCard.tsx: Card de Plano de AÃ§Ã£o com atividades.

schoolPowerActivities.json: Lista com as 137 atividades que o School Power consegue gerar.

ğŸ› ï¸ AÃ§Ãµes a serem executadas:
1ï¸âƒ£ Coleta e Armazenamento Correto dos Dados
Garantir que:

A mensagem inicial enviada pelo usuÃ¡rio em ChatInput seja armazenada corretamente em schoolPowerStore ou equivalente.

As respostas do ContextualizationCard (matÃ©rias, pÃºblico-alvo, restriÃ§Ãµes, datas importantes, observaÃ§Ãµes) sejam armazenadas e associadas ao usuÃ¡rio.

âœ… Se os dados nÃ£o estiverem sendo salvos ou sincronizados, corrigir imediatamente.

2ï¸âƒ£ AnÃ¡lise Real pela IA Gemini
ApÃ³s o envio do ContextualizationCard, deve ser executada uma requisiÃ§Ã£o em tempo real para a API Gemini, utilizando a API Key AIzaSyD-Sso0SdyYKoA4M3tQhcWjQ1AoddB7Wo4, enviando no prompt para anÃ¡lise:

Prompt a ser enviado ao Gemini:

javascript
Copiar
Editar
VocÃª Ã© uma IA do School Power responsÃ¡vel por criar um plano de aÃ§Ã£o educacional para um professor ou coordenador. Use SOMENTE as atividades listadas abaixo que o School Power consegue gerar.

Mensagem inicial do usuÃ¡rio:
"{mensagem_inicial}"

Respostas do Quiz:
MatÃ©rias e temas: "{materias_e_temas}"
PÃºblico-alvo: "{publico_alvo}"
RestriÃ§Ãµes ou preferÃªncias: "{restricoes_preferencias}"
Datas importantes: "{datas_importantes}"
ObservaÃ§Ãµes adicionais: "{observacoes}"

Aqui estÃ¡ a lista de atividades possÃ­veis:
{JSON.stringify(atividades_disponiveis)}

Com base nessas informaÃ§Ãµes, gere de 3 a 5 atividades personalizadas em formato JSON, com campos:
- id: mesmo id da atividade no banco de atividades
- title: tÃ­tulo personalizado de acordo com as informaÃ§Ãµes coletadas
- description: descriÃ§Ã£o curta e personalizada de acordo com as informaÃ§Ãµes coletadas

Exemplo de resposta:
[
  {
    "id": "prova-interativa",
    "title": "Prova de MatemÃ¡tica - 27/07 - Ensino MÃ©dio",
    "description": "AvaliaÃ§Ã£o focada em Ã¡lgebra e geometria, programada para o dia 27/07."
  },
  ...
]
3ï¸âƒ£ ValidaÃ§Ã£o dos Dados Gerados pela IA
Validar cada item gerado pela IA:
âœ… Verificar se o id gerado pela IA estÃ¡ presente em schoolPowerActivities.json.
âœ… Se houver inconsistÃªncias ou atividades fora da lista, ignorar e solicitar novamente Ã  IA.
âœ… Garantir consistÃªncia dos dados recebidos para renderizaÃ§Ã£o no ActionPlanCard.

4ï¸âƒ£ RenderizaÃ§Ã£o Correta no ActionPlanCard
Exibir mini-cards checkbox com:

TÃ­tulo personalizado gerado pela IA

DescriÃ§Ã£o curta gerada pela IA

Checkbox de seleÃ§Ã£o

Exibir contador de atividades selecionadas, ativando o botÃ£o Aprovar Plano somente se pelo menos 1 atividade for selecionada.

Utilizar animaÃ§Ãµes suaves (Framer Motion) durante a transiÃ§Ã£o do ContextualizationCard para o ActionPlanCard.

ğŸ”¹ Exemplos de geraÃ§Ã£o real apÃ³s correÃ§Ã£o:
UsuÃ¡rio escreveu na ChatInput:

â€œPreciso de atividades para reforÃ§o de matemÃ¡tica para alunos do 9Âº ano, focando em equaÃ§Ãµes e geometria, para a prova do dia 27 de julho.â€

Respostas no Quiz:

MatÃ©rias: MatemÃ¡tica â€“ EquaÃ§Ãµes e Geometria

PÃºblico-alvo: 9Âº ano

RestriÃ§Ãµes: Precisa ser interativo, tempo curto

Datas: 27/07

ObservaÃ§Ãµes: Envolver geometria do triÃ¢ngulo

âœ… Atividades geradas:

TÃ­tulo: Prova de MatemÃ¡tica â€“ 27/07 â€“ 9Âº Ano

DescriÃ§Ã£o: AvaliaÃ§Ã£o interativa focada em equaÃ§Ãµes e geometria para reforÃ§o antes da prova do dia 27/07.

TÃ­tulo: Resumo de Geometria â€“ TriÃ¢ngulos â€“ 9Âº Ano

DescriÃ§Ã£o: Resumo otimizado sobre propriedades dos triÃ¢ngulos para os alunos do 9Âº ano.

TÃ­tulo: Lista de ExercÃ­cios â€“ EquaÃ§Ãµes do 1Âº Grau

DescriÃ§Ã£o: ExercÃ­cios prÃ¡ticos para fixaÃ§Ã£o de equaÃ§Ãµes do 1Âº grau, visando a prova de 27/07.

ğŸ“Œ ConsideraÃ§Ãµes TÃ©cnicas Importantes:
âœ… Usar TypeScript estrito.
âœ… Utilizar zustand ou state manager para consistÃªncia entre os componentes.
âœ… Usar Framer Motion para animaÃ§Ãµes suaves.
âœ… Preparar estrutura modular para escalabilidade futura.
âœ… Utilizar feedback visual (skeleton/loading spinner) durante a requisiÃ§Ã£o ao Gemini.
âœ… Registrar logs de erro claros caso a IA retorne dados inconsistentes.
âœ… Manter cÃ³digo limpo, comentado e padronizado, pronto para auditoria.

ğŸ¯ Resultado esperado:
âœ… Atividades sugeridas personalizadas e reais, geradas pela IA Gemini, alinhadas ao contexto do usuÃ¡rio.
âœ… EliminaÃ§Ã£o de dados mockados ou padronizados automatizados.
âœ… IntegraÃ§Ã£o funcional com as 137 atividades possÃ­veis do School Power.
âœ… Fluxo completo School Power totalmente funcional, sem falhas de consistÃªncia ou falta de personalizaÃ§Ã£o.

âœ… Avise quando finalizar esta etapa.
Assim que corrigido, prosseguiremos com:
âœ… GeraÃ§Ã£o automÃ¡tica das atividades aprovadas pelo usuÃ¡rio, usando a IA para construir cada material.
âœ… IntegraÃ§Ã£o ao fluxo de progresso do usuÃ¡rio dentro da plataforma Ponto. School.