ğŸ¯ Objetivo:

1ï¸âƒ£ Transformar o Card de ContextualizaÃ§Ã£o atual em um Card de ConstruÃ§Ã£o fixo, mantendo todas as funcionalidades e campos que existiam.

2ï¸âƒ£ ApÃ³s o usuÃ¡rio preencher e enviar os dados no Card de ConstruÃ§Ã£o, o mesmo card (mesma estrutura) deverÃ¡ mudar de interface:

Exibir o Plano de AÃ§Ã£o Personalizado em formato de checklist estilo checkbox.

Listar as atividades geradas pela IA Gemini, validadas, em mini-cards com checkbox.

Continuar exibindo o cabeÃ§alho superior com o tÃ­tulo atualizado como â€œPlano de AÃ§Ã£o Personalizadoâ€.

3ï¸âƒ£ Garantir nenhuma quebra de funcionalidade:

Coleta e armazenamento de dados continuam no LocalStorage e Supabase.

Consulta e envio de dados continuam funcionando com o Gemini.

O fluxo no useSchoolPowerFlow.ts continua sem interrupÃ§Ã£o.

O generatePersonalizedPlan.ts e validateGeminiPlan.ts continuam sem alteraÃ§Ãµes no funcionamento.

Nenhuma animaÃ§Ã£o ou transiÃ§Ã£o quebra a interaÃ§Ã£o do usuÃ¡rio.

ğŸ¨ EspecificaÃ§Ãµes Visuais
âœ… Card de ConstruÃ§Ã£o:

Estrutura fixa e retangular.

CabeÃ§alho superior:

Etapa de ContextualizaÃ§Ã£o como tÃ­tulo.

Ãcone representativo (ğŸ› ï¸ ou ğŸ—‚ï¸).

Cor de fundo do cabeÃ§alho em tom de laranja suave (#FFA726) ou primÃ¡rio do School Power.

Dentro do card:

Campos que estavam no Card de ContextualizaÃ§Ã£o (matÃ©rias, pÃºblico-alvo, restriÃ§Ãµes, datas importantes, observaÃ§Ãµes).

BotÃ£o Enviar ContextualizaÃ§Ã£o ao final.

âœ… ApÃ³s envio:

Mesmo Card de ConstruÃ§Ã£o, mas agora:

CabeÃ§alho muda para Plano de AÃ§Ã£o Personalizado.

Ãcone representativo (âœ… ou ğŸš€).

Lista de atividades geradas pela IA Gemini com:

Checkbox.

Nome da atividade.

DescriÃ§Ã£o curta.

Contador de atividades selecionadas no topo ou no botÃ£o.

BotÃ£o Aprovar Plano fica habilitado quando pelo menos uma atividade for selecionada.

âœ… A transiÃ§Ã£o pode usar uma animaÃ§Ã£o suave (fade/slide de 300ms) para indicar claramente a mudanÃ§a de etapa.

ğŸ› ï¸ Tarefas TÃ©cnicas para a IA executar:
1ï¸âƒ£ CriaÃ§Ã£o/ReestruturaÃ§Ã£o do Componente:
Criar CardDeConstrucao.tsx ou adaptar ContextualizationCard.tsx para ser o novo Card de ConstruÃ§Ã£o, controlado por props:

ts
Copiar
Editar
<CardDeConstrucao
   step="contextualization" // ou "actionPlan"
   contextualizationData={...}
   actionPlan={...}
   onSubmit={...}
/>
Se step === "contextualization", renderizar os campos para preenchimento.

Se step === "actionPlan", renderizar a lista de atividades sugeridas com checkbox.

2ï¸âƒ£ LÃ³gica de TransiÃ§Ã£o:
No useSchoolPowerFlow.ts:

ApÃ³s handleSubmitContextualization(), automaticamente:

ts
Copiar
Editar
setFlowState('generating')
Quando receber os dados do plano de aÃ§Ã£o:

ts
Copiar
Editar
setFlowState('actionPlan')
O CardDeConstrucao renderiza a interface de acordo com flowState.

3ï¸âƒ£ Garantias de IntegraÃ§Ã£o:
âœ… Coleta de dados (mensagem + contextualizaÃ§Ã£o) permanece intacta.
âœ… Envio para o Gemini permanece intacto.
âœ… Recebimento das atividades personalizadas e filtradas permanece intacto.
âœ… ValidaÃ§Ã£o com a lista de 137 atividades permanece intacta.
âœ… Armazenamento em LocalStorage e Supabase permanece funcional.
âœ… BotÃ£o Aprovar Plano aciona normalmente a produÃ§Ã£o das atividades.

4ï¸âƒ£ Testes obrigatÃ³rios:
âœ… Enviar dados de teste (ex: â€œQuero um caÃ§a-palavras de verbos para o 6Âº anoâ€).
âœ… Verificar se apÃ³s o envio o Card de ConstruÃ§Ã£o muda corretamente para o Plano de AÃ§Ã£o.
âœ… Selecionar atividades, aprovar plano e verificar a produÃ§Ã£o correta.
âœ… Monitorar logs para confirmar:

Dados enviados ao Gemini corretos.

Dados retornados corretos.

Dados armazenados no LocalStorage/Supabase corretos.

Nenhuma quebra de fluxo na interface.

ğŸš¨ Lembretes importantes:
âœ… NÃ£o remover ou alterar endpoints, hooks ou serviÃ§os jÃ¡ implementados.

âœ… NÃ£o remover integraÃ§Ãµes com Supabase ou Gemini.

âœ… Garantir que o card seja responsivo e funcione bem em dispositivos mobile e desktop.

âœ… Manter a performance, evitando renders desnecessÃ¡rios no React.

âœ… Testar comportamento em recarregamento de pÃ¡gina para garantir que o estado seja persistente.

âœ… ConclusÃ£o para a IA:
Implemente o novo Card de ConstruÃ§Ã£o com mudanÃ§a dinÃ¢mica de interface, garantindo:

ConsistÃªncia visual.

IntegraÃ§Ã£o funcional com todo o pipeline do School Power.

Zero impacto negativo em funcionalidades existentes.

OrganizaÃ§Ã£o, escalabilidade e legibilidade no cÃ³digo.

