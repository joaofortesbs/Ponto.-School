Objetivo: Implementar um sistema de geraÃ§Ã£o de atividade Ãºnica e personalizada dentro do modal EditActivityModal.tsx, garantindo que cada atividade (identificada por ID) tenha um fluxo exclusivo de geraÃ§Ã£o de conteÃºdo automatizado com IA, a partir dos dados preenchidos nos campos da interface "Editar Materiais", com visualizaÃ§Ã£o prÃ©via em tempo real.

ğŸ“ Arquivo base:
src/features/schoolpower/construction/EditActivityModal.tsx

Tarefa:

Implemente as seguintes alteraÃ§Ãµes dentro do arquivo EditActivityModal.tsx de forma altamente organizada, reutilizÃ¡vel e sem impactar a estrutura jÃ¡ existente da UI, conforme demonstrado na imagem enviada.

âœ… 1. Vincular cada modal Ã  sua respectiva atividade pelo ID

Ao abrir o modal EditActivityModal, o componente deve receber o ID da atividade como parÃ¢metro props (ex: activityId).

Usar esse ID para buscar e armazenar localmente os dados preenchidos (usando Zustand, Context API ou useState/useEffect se local).

Garantir que cada instÃ¢ncia do modal armazene separadamente os dados em ediÃ§Ã£o daquele ID.

Exemplo:
const { activityId } = props;
const [formData, setFormData] = useState(() => getInitialFormDataById(activityId));

âœ… 2. Arquitetura de geraÃ§Ã£o Ãºnica para cada tipo de atividade

Crie um novo arquivo chamado:
src/features/schoolpower/construction/generationStrategies/generateActivityByType.ts

Dentro desse arquivo, implemente uma funÃ§Ã£o por tipo de atividade (Prova, Jogo, VÃ­deo, Lista, Mapa Mental etc.). Cada funÃ§Ã£o irÃ¡ receber os dados preenchidos no modal e retornarÃ¡ a atividade completamente gerada (em formato HTML/JSX/markdown/texto estruturado).

Exemplo de estrutura interna:

export const generateActivityByType = (type: string, data: FormData) => {
switch (type) {
case 'Prova':
return generateTest(data);
case 'VÃ­deo':
return generateVideoScript(data);
case 'Jogo':
return generateGame(data);
default:
return 'Tipo de atividade nÃ£o suportado ainda.';
}
};

âœ… 3. Sistema de envio dos dados preenchidos para a IA

Crie um handler que serÃ¡ disparado ao clicar no botÃ£o "Construir Atividade".

Esse handler irÃ¡:

Validar os campos obrigatÃ³rios.

Enviar os dados para o endpoint de IA (jÃ¡ integrado).

Receber a resposta gerada e armazenar localmente em estado.

Atualizar a aba de prÃ©-visualizaÃ§Ã£o com o conteÃºdo gerado pela IA.

Exemplo de handler (resumido):

const handleGenerate = async () => {
const payload = {
...formData,
activityId,
activityType
};
const generated = await fetch('/api/ai/generate-activity', {
method: 'POST',
body: JSON.stringify(payload)
}).then(res => res.json());

setGeneratedContent(generated.content);
};

âœ… 4. PrÃ©-visualizaÃ§Ã£o integrada

Adicione uma nova aba chamada â€œPrÃ©-visualizaÃ§Ã£oâ€ ao lado de "Editar", com transiÃ§Ã£o suave.

Dentro dessa aba, exiba o conteÃºdo gerado retornado da IA.

O conteÃºdo deve estar formatado de acordo com o tipo da atividade (PDF simulado, texto estruturado, imagens ou embed se aplicÃ¡vel).

âœ… 5. Manter consistÃªncia visual e UX

Mantenha o modal com o mesmo estilo jÃ¡ existente conforme imagem enviada.

Garanta que a renderizaÃ§Ã£o da atividade gerada nÃ£o transborde os limites do modal.

Adicione um loading spinner enquanto a IA estÃ¡ gerando a atividade.

O botÃ£o â€œConstruir Atividadeâ€ sÃ³ deve ser clicÃ¡vel quando todos os campos obrigatÃ³rios forem preenchidos.

âœ… 6. OrganizaÃ§Ã£o em arquivos separados
Criar os seguintes arquivos/modulos para manter tudo modularizado:

src/features/schoolpower/construction/generationStrategies/generateActivityByType.ts

src/features/schoolpower/construction/types/ActivityTypes.ts

src/features/schoolpower/construction/api/generateActivity.ts

src/features/schoolpower/construction/hooks/useGenerateActivity.ts

âœ… 7. Exemplo de atividade construÃ­da (resposta esperada no Preview)
Exemplo para Prova:

TÃ­tulo

InstruÃ§Ãµes

QuestÃµes Objetivas (3 a 5)

QuestÃµes Discursivas (1 ou 2)

Gabarito

Exemplo para VÃ­deo:

Roteiro com introduÃ§Ã£o, tÃ³picos principais e fechamento

SugestÃ£o de imagens/recursos visuais

SugestÃ£o de trilha sonora

ğŸ§  Extra

Todos os dados gerados devem poder ser salvos localmente no state central da plataforma, garantindo persistÃªncia temporÃ¡ria para ediÃ§Ã£o.

O conteÃºdo gerado tambÃ©m pode ser exportado em PDF ou copiado para clipboard.

ğŸ“Œ ConsideraÃ§Ãµes Finais
Essa estrutura permite mÃ¡xima escalabilidade, separaÃ§Ã£o de responsabilidades e controle por parte do programador sobre cada tipo de atividade. Toda a lÃ³gica de geraÃ§Ã£o estÃ¡ separada do layout visual e pode ser facilmente expandida no futuro.