[plugin:vite:react-swc] × the name `Separator` is defined multiple times
      ╭─[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:25:1]
   25 │ import { Label } from '@/components/ui/label';
   26 │ import { Input } from '@/components/ui/input';
   27 │ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 │ import { Separator } from '@/components/ui/separator';
      ·          ────┬────
      ·              ╰── previous definition of `Separator` here
   29 │ import { Progress } from '@/components/ui/progress';
   30 │ import { ConstructionGrid } from './ConstructionGrid';
   31 │ 
   32 │ import { 
   33 │   Wrench, CheckSquare, Filter, 
   34 │   Trophy, Zap, Brain, Heart, 
   35 │   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 │   Microscope, Palette, Music, Camera, Video, Headphones,
   37 │   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 │   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 │   Pause, SkipForward, Volume2, Wifi, Battery,
   40 │   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 │   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 │ } from "lucide-react";
   43 │ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 │ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 │ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 │ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 │ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 │ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 │ import { ConstructionInterface } from './index';
   50 │ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 │ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 │ 
   53 │ // Convert to proper format with name field
   54 │ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 │   ...activity,
   56 │   name: activity.name || activity.title || activity.description
   57 │ }));
   58 │ 
   59 │ export interface ContextualizationData {
   60 │   materias: string;
   61 │   publicoAlvo: string;
   62 │   restricoes: string;
   63 │   datasImportantes?: string;
   64 │   observacoes?: string;
   65 │ }
   66 │ 
   67 │ export interface ActionPlanItem {
   68 │   id: string;
   69 │   title: string;
   70 │   description: string;
   71 │   duration?: string;
   72 │   difficulty?: string;
   73 │   category?: string;
   74 │   type?: string;
   75 │   approved: boolean;
   76 │   isTrilhasEligible?: boolean;
   77 │   customFields?: Record<string, string>;
   78 │   isManual?: boolean;
   79 │ }
   80 │ 
   81 │ interface CardDeConstrucaoProps {
   82 │   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 │   contextualizationData?: ContextualizationData | null;
   84 │   actionPlan?: ActionPlanItem[] | null;
   85 │   onSubmitContextualization: (data: ContextualizationData) => void;
   86 │   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 │   onResetFlow: () => void;
   88 │   isLoading?: boolean;
   89 │ }
   90 │ 
   91 │ export function CardDeConstrucao({ 
   92 │   step, 
   93 │   contextualizationData, 
   94 │   actionPlan, 
   95 │   onSubmitContextualization, 
   96 │   onApproveActionPlan, 
   97 │   onResetFlow,
   98 │   isLoading 
   99 │ }: CardDeConstrucaoProps) {
  100 │   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 │     materias: '',
  102 │     publicoAlvo: '',
  103 │     restricoes: '',
  104 │     datasImportantes: '',
  105 │     observacoes: ''
  106 │   });
  107 │ 
  108 │   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 │   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 │   // Form data for contextualization
  111 │   const [formData, setFormData] = useState<ContextualizationData>({
  112 │     materias: "",
  113 │     publicoAlvo: "",
  114 │     restricoes: "",
  115 │     datasImportantes: "",
  116 │     observacoes: "",
  117 │   });
  118 │ 
  119 │   // Selected activities for action plan
  120 │   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 │ 
  122 │   // Filter state for action plan
  123 │   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 │ 
  125 │   // View mode state (list or grid)
  126 │   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 │ 
  128 │   // Debug state for trilhas system
  129 │   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 │ 
  131 │   // Estado para mostrar a interface de adicionar atividade manual
  132 │   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 │ 
  134 │   // Manual activity addition state
  135 │   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 │ 
  137 │   // Manual activity form state
  138 │   const [manualActivityForm, setManualActivityForm] = useState({
  139 │     title: '',
  140 │     typeId: '',
  141 │     description: ''
  142 │   });
  143 │ 
  144 │   // State for activity building process
  145 │   const [isBuilding, setIsBuilding] = useState(false);
  146 │ 
  147 │   // State for tracking building progress
  148 │   const [progress, setProgress] = useState<{
  149 │     total: number;
  150 │     completed: number;
  151 │     current: string;
  152 │     errors: string[];
  153 │   } | null>(null);
  154 │ 
  155 │   // Function to simulate activity building
  156 │   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 │     setIsBuilding(true);
  158 │     setProgress({
  159 │       total: activities.length,
  160 │       completed: 0,
  161 │       current: '',
  162 │       errors: []
  163 │     });
  164 │ 
  165 │     let allSuccess = true;
  166 │ 
  167 │     for (let i = 0; i < activities.length; i++) {
  168 │       const activity = activities[i];
  169 │       setProgress(prev => ({
  170 │         ...prev,
  171 │         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 │       }));
  173 │ 
  174 │       try {
  175 │         // Simulate building
  176 │         await new Promise(resolve => setTimeout(resolve, 1000));
  177 │ 
  178 │         // Simulate occasional errors
  179 │         if (Math.random() < 0.2) {
  180 │           throw new Error(`Falha ao construir ${activity.title}`);
  181 │         }
  182 │ 
  183 │         setProgress(prev => ({
  184 │           ...prev,
  185 │           completed: prev.completed + 1
  186 │         }));
  187 │       } catch (error: any) {
  188 │         console.error(error);
  189 │         allSuccess = false;
  190 │         setProgress(prev => ({
  191 │           ...prev,
  192 │           errors: [...prev.errors, error.message]
  193 │         }));
  194 │       }
  195 │     }
  196 │ 
  197 │     setIsBuilding(false);
  198 │     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 │     return allSuccess;
  200 │   };
  201 │ 
  202 │   // Load existing data when component mounts
  203 │   useEffect(() => {
  204 │     if (contextualizationData) {
  205 │       setFormData(contextualizationData);
  206 │     }
  207 │   }, [contextualizationData]);
  208 │ 
  209 │   // Handle form input changes
  210 │   const handleInputChange = (
  211 │     field: keyof ContextualizationData,
  212 │     value: string,
  213 │   ) => {
  214 │     setFormData((prev) => ({
  215 │       ...prev,
  216 │       [field]: value,
  217 │     }));
  218 │   };
  219 │ 
  220 │   // Handle contextualization form submission
  221 │   const handleSubmitContextualization = () => {
  222 │     if (onSubmitContextualization) {
  223 │       onSubmitContextualization(formData);
  224 │     }
  225 │   };
  226 │ 
  227 │   // Handle activity selection toggle
  228 │   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 │     setSelectedActivities2((prev) => {
  230 │       const isSelected = prev.some((item) => item.id === activity.id);
  231 │       if (isSelected) {
  232 │         return prev.filter((item) => item.id !== activity.id);
  233 │       } else {
  234 │         return [...prev, { ...activity, approved: true }];
  235 │       }
  236 │     });
  237 │   };
  238 │ 
  239 │   useEffect(() => {
  240 │     if (actionPlan) {
  241 │       console.log('🎯 ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 │       const approved = actionPlan.filter(item => item.approved);
  243 │       setSelectedActivities2(approved);
  244 │     }
  245 │   }, [actionPlan, step]);
  246 │ 
  247 │   const handleApproveActionPlan = async () => {
  248 │     console.log('✅ Plano de ação aprovado! Iniciando construção automática com ModalBinderEngine...');
  249 │ 
  250 │     // Aprovar plano primeiro
  251 │     onApproveActionPlan(selectedActivities2);
  252 │ 
  253 │     // Construir atividades automaticamente usando o novo sistema
  254 │     if (selectedActivities2.length > 0) {
  255 │       try {
  256 │         console.log('🔧 Iniciando construção automática com ModalBinderEngine...');
  257 │         console.log('📋 Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 │ 
  259 │         // Usar o contexto de contextualização para enriquecer a geração
  260 │         const contextData = {
  261 │           materias: formData.materias,
  262 │           publicoAlvo: formData.publicoAlvo,
  263 │           restricoes: formData.restricoes,
  264 │           datasImportantes: formData.datasImportantes,
  265 │           observacoes: formData.observacoes
  266 │         };
  267 │ 
  268 │         console.log('🎯 Dados de contexto para geração:', contextData);
  269 │ 
  270 │         const success = await buildActivities(selectedActivities2, contextData);
  271 │ 
  272 │         if (success) {
  273 │           console.log('🎉 Todas as atividades foram construídas automaticamente com ModalBinderEngine!');
  274 │ 
  275 │           // Exibir notificação de sucesso
  276 │           console.log('✅ Sistema de construção automática funcionando corretamente!');
  277 │         } else {
  278 │           console.warn('⚠️ Algumas atividades podem ter falhado na construção automática');
  279 │         }
  280 │       } catch (error) {
  281 │         console.error('❌ Erro durante construção automática:', error);
  282 │         console.error('📊 Detalhes do erro:', {
  283 │           message: error.message,
  284 │           stack: error.stack,
  285 │           selectedActivities: selectedActivities2.length,
  286 │           contextData: !!contextData
  287 │         });
  288 │       }
  289 │     } else {
  290 │       console.log('ℹ️ Nenhuma atividade selecionada para construção automática');
  291 │     }
  292 │   };
  293 │ 
  294 │   // Handle manual activity form submission
  295 │   const handleAddManualActivity = () => {
  296 │     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 │       return;
  298 │     }
  299 │ 
  300 │     // Find the activity type from schoolPowerActivities
  301 │     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 │ 
  303 │     const newManualActivity: ActionPlanItem = {
  304 │       id: manualActivityForm.typeId,
  305 │       title: manualActivityForm.title,
  306 │       description: manualActivityForm.description,
  307 │       duration: "Personalizado",
  308 │       difficulty: "Personalizado", 
  309 │       category: activityType?.tags[0] || "manual",
  310 │       type: activityType?.name || "Atividade Manual",
  311 │       isManual: true,
  312 │       approved: false,
  313 │       customFields: {} // Atividades manuais também podem ter customFields
  314 │     };
  315 │ 
  316 │     // Add to manual activities list
  317 │     setManualActivities(prev => [...prev, newManualActivity]);
  318 │ 
  319 │     // Clear form
  320 │     setManualActivityForm({
  321 │       title: '',
  322 │       typeId: '',
  323 │       description: ''
  324 │     });
  325 │ 
  326 │     // Return to action plan interface
  327 │     setShowAddActivityInterface(false);
  328 │   };
  329 │ 
  330 │   // Handle manual activity form changes
  331 │   const handleManualFormChange = (field: string, value: string) => {
  332 │     setManualActivityForm(prev => ({
  333 │       ...prev,
  334 │       [field]: value
  335 │     }));
  336 │   };
  337 │ 
  338 │   // Get combined activities (AI suggestions + manual)
  339 │   const getCombinedActivities = () => {
  340 │     const aiActivities = actionPlan || [];
  341 │     const allActivities = [...aiActivities, ...manualActivities];
  342 │     return allActivities;
  343 │   };
  344 │ 
  345 │   // Check if contextualization form is valid
  346 │   const isContextualizationValid =
  347 │     formData.materias.trim() && formData.publicoAlvo.trim();
  348 │ 
  349 │   // Grid Toggle Component
  350 │   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 │     viewMode: 'list' | 'grid';
  352 │     onToggle: () => void;
  353 │   }) => {
  354 │     return (
  355 │       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 │         onClick={onToggle}
  357 │         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 │         title={viewMode === 'list' ? 'Visualização em Grade' : 'Visualização em Lista'}
  359 │       >
  360 │         {viewMode === 'list' ? (
  361 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 │           </svg>
  364 │         ) : (
  365 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 │           </svg>
  368 │         )}
  369 │       </button>
  370 │     );
  371 │   };
  372 │ 
  373 │   // Filter Component
  374 │   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 │     activities: ActionPlanItem[];
  376 │     selectedActivities2: ActionPlanItem[];
  377 │     onFilterApply: (filterType: string) => void;
  378 │   }) => {
  379 │     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 │     const filterRef = useRef<HTMLDivElement>(null);
  381 │ 
  382 │     useEffect(() => {
  383 │       const handleClickOutside = (event: MouseEvent) => {
  384 │         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 │           setIsFilterOpen(false);
  386 │         }
  387 │       };
  388 │ 
  389 │       document.addEventListener('mousedown', handleClickOutside);
  390 │       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 │     }, []);
  392 │ 
  393 │     return (
  394 │       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 │         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 │           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 │           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 │           title="Filtros e Ações"
  399 │         >
  400 │           <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:400:10" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="400" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" />
  401 │         </button>
  402 │ 
  403 │         {isFilterOpen && (
  404 │           <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:404:10" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="404" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22absolute%20top-full%20right-0%20mt-3%20w-56%20bg-white%20dark%3Abg-gray-800%20rounded-2xl%20shadow-2xl%20border%20border-gray-200%20dark%3Aborder-gray-600%20overflow-hidden%20z-50%20backdrop-blur-sm%22%7D"
  405 │             initial={{ opacity: 0, y: -10, scale: 0.95 }}
  406 │             animate={{ opacity: 1, y: 0, scale: 1 }}
  407 │             exit={{ opacity: 0, y: -10, scale: 0.95 }}
  408 │             transition={{ duration: 0.2, ease: [0.25, 0.1, 0.25, 1] }}
  409 │             className="absolute top-full right-0 mt-3 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 overflow-hidden z-50 backdrop-blur-sm"
  410 │             style={{
  411 │               background: `
  412 │                 linear-gradient(135deg, 
  413 │                   rgba(255, 255, 255, 0.95) 0%, 
  414 │                   rgba(248, 250, 252, 0.98) 100%
  415 │                 )
  416 │               `,
  417 │               ...(typeof window !== "undefined" &&
  418 │               window.matchMedia("(prefers-color-scheme: dark)").matches
  419 │                 ? {
  420 │                     background: `
  421 │                   linear-gradient(135deg, 
  422 │                     rgba(31, 41, 55, 0.95) 0%, 
  423 │                     rgba(17, 24, 39, 0.98) 100%
  424 │                   )
  425 │                 `,
  426 │                   }
  427 │                 : {}),
  428 │             }}
  429 │           >
  430 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:430:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="430" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22p-2%22%7D" className="p-2">
  431 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:431:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="431" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22px-3%20py-2%20border-b%20border-gray-200%20dark%3Aborder-gray-600%22%7D" className="px-3 py-2 border-b border-gray-200 dark:border-gray-600">
  432 │                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:432:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="432" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Filtros%20e%20A%C3%A7%C3%B5es%22%2C%22className%22%3A%22text-sm%20font-semibold%20text-gray-900%20dark%3Atext-white%20flex%20items-center%20gap-2%22%7D" className="text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2">
  433 │                   <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:433:18" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="433" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%22%7D" className="w-4 h-4 text-[#FF6B00]" />
  434 │                   Filtros e Ações
  435 │                 </h3>
  436 │               </div>
  437 │ 
  438 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:438:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="438" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22py-1%20space-y-1%22%7D" className="py-1 space-y-1">
  439 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:439:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="439" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  440 │                   onClick={() => {
  441 │                     onFilterApply('selectAll');
  442 │                     setIsFilterOpen(false);
  443 │                   }}
  444 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  445 │                 >
  446 │                   <CheckSquare data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:446:18" data-lov-name="CheckSquare"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="446" data-component-file="CardDeConstrucao.tsx" data-component-name="CheckSquare" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" />
  447 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:447:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="447" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20todos%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar todos</span>
  448 │                 </button>
  449 │ 
  450 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:450:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="450" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  451 │                   onClick={() => {
  452 │                     onFilterApply('selectRecommended');
  453 │                     setIsFilterOpen(false);
  454 │                   }}
  455 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  456 │                 >
  457 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:457:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="457" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  458 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:458:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="458" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clipRule="evenodd" />
  459 │                   </svg>
  460 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:460:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="460" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20recomenda%C3%A7%C3%B5es%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar recomendações</span>
  461 │                 </button>
  462 │ 
  463 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:463:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="463" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22border-t%20border-gray-200%20dark%3Aborder-gray-600%20my-1%22%7D" className="border-t border-gray-200 dark:border-gray-600 my-1"></div>
  464 │ 
  465 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:465:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="465" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-blue-500%2F10%20hover%3Ato-blue-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  466 │                   onClick={() => {
  467 │                     onFilterApply('viewSelected');
  468 │                     setIsFilterOpen(false);
  469 │                   }}
  470 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-blue-500/10 hover:to-blue-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  471 │                 >
  472 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:472:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="472" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-blue-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-blue-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  473 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:473:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="473" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
  474 │                   </svg>
  475 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:475:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="475" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20apenas%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver apenas selecionados</span>
  476 │                 </button>
  477 │ 
  478 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:478:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="478" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-red-500%2F10%20hover%3Ato-red-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  479 │                   onClick={() => {
  480 │                     onFilterApply('clearSelected');
  481 │                     setIsFilterOpen(false);
  482 │                   }}
  483 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-red-500/10 hover:to-red-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  484 │                 >
  485 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:485:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="485" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-red-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-red-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  486 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:486:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="486" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
  487 │                   </svg>
  488 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:488:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="488" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Tirar%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Tirar selecionados</span>
  489 │                 </button>
  490 │ 
  491 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:491:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="491" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-gray-500%2F10%20hover%3Ato-gray-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  492 │                   onClick={() => {
  493 │                     onFilterApply('viewAll');
  494 │                     setIsFilterOpen(false);
  495 │                   }}
  496 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-gray-500/10 hover:to-gray-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  497 │                 >
  498 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:498:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="498" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-gray-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  499 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:499:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="499" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd" />
  500 │                   </svg>
  501 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:501:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="501" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20todas%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver todas</span>
  502 │                 </button>
  503 │               </div>
  504 │             </div>
  505 │           </motion.div>
  506 │         )}
  507 │       </div>
  508 │     );
  509 │   };
  510 │ 
  511 │   // Handle filter actions
  512 │   const handleFilterApply = (filterType: string) => {
  513 │     const combinedActivities = getCombinedActivities();
  514 │     if (combinedActivities.length === 0) return;
  515 │ 
  516 │     switch (filterType) {
  517 │       case 'selectAll':
  518 │         setSelectedActivities2([...combinedActivities]);
  519 │         setFilterState('all');
  520 │         break;
  521 │       case 'selectRecommended':
  522 │         // Seleciona as 3 primeiras atividades como "recomendadas"
  523 │         const recommended = combinedActivities.slice(0, Math.min(3, combinedActivities.length));
  524 │         setSelectedActivities2(recommended);
  525 │         setFilterState('all');
  526 │         break;
  527 │       case 'viewSelected':
  528 │         setFilterState('selected');
  529 │         break;
  530 │       case 'clearSelected':
  531 │         setSelectedActivities2([]);
  532 │         setFilterState('all');
  533 │         break;
  534 │       case 'viewAll':
  535 │         setFilterState('all');
  536 │         break;
  537 │       default:
  538 │         break;
  539 │     }
  540 │   };
  541 │ 
  542 │   const getIconByActivityId = (activityId: string) => {
  543 │     // Sistema de mapeamento 100% único - cada ID tem seu próprio ícone específico
  544 │     const uniqueIconMapping: { [key: string]: any } = {
  545 │       "atividade-adaptada": Heart,
  546 │       "atividades-contos-infantis": BookOpen,
  547 │       "atividades-ia": Brain,
  548 │       "atividades-matematica": Target,
  549 │       "atividades-ortografia-alfabeto": PenTool,
  550 │       "aulas-eletivas": Star,
  551 │       "bncc-descomplicada": BookOpen,
  552 │       "caca-palavras": Puzzle,
  553 │       "capitulo-livro": BookOpen,
  554 │       "charadas": Puzzle,
  555 │       "chatbot-bncc": MessageSquare,
  556 │       "consulta-video": Video,
  557 │       "corretor-gramatical": CheckSquare,
  558 │       "corretor-provas-feedback": CheckSquare,
  559 │       "corretor-provas-papel": FileText,
  560 │       "corretor-questoes": PenTool,
  561 │       "corretor-redacao": PenTool,
  562 │       "criterios-avaliacao": CheckSquare,
  563 │       "desenho-simetrico": Puzzle,
  564 │       "desenvolvimento-caligrafia": PenTool,
  565 │       "dinamicas-sala-aula": Users,
  566 │       "emails-escolares": Mail,
  567 │       "erros-comuns": Search,
  568 │       "exemplos-contextualizados": BookOpen,
  569 │       "experimento-cientifico": Microscope,
  570 │       "fichamento-obra-literaria": BookOpen,
  571 │       "gerador-tracejados": PenTool,
  572 │       "historias-sociais": Heart,
  573 │       "ideias-atividades": Lightbulb,
  574 │       "ideias-aulas-acessiveis": Heart,
  575 │       "ideias-avaliacoes-adaptadas": Heart,
  576 │       "ideias-brincadeiras-infantis": Play,
  577 │       "ideias-confraternizacoes": Users,
  578 │       "ideias-datas-comemorativas": Calendar,
  579 │       "imagem-para-colorir": Palette,
  580 │       "instrucoes-claras": FileText,
  581 │       "jogos-educacionais-interativos": Gamepad2,
  582 │       "jogos-educativos": Puzzle,
  583 │       "lista-exercicios": FileText,
  584 │       "lista-vocabulario": BookOpen,
  585 │       "maquete": Wrench,
  586 │       "mapa-mental": Brain,
  587 │       "mensagens-agradecimento": Heart,
  588 │       "musica-engajar": Music,
  589 │       "niveador-textos": BookOpen,
  590 │       "objetivos-aprendizagem": Target,
  591 │       "palavras-cruzadas": Puzzle,
  592 │       "pei-pdi": Heart,
  593 │       "perguntas-taxonomia-bloom": MessageSquare,
  594 │       "pergunte-texto": MessageSquare,
  595 │       "plano-aula": BookOpen,
  596 │       "plano-ensino": BookOpen,
  597 │       "plano-recuperacao": Heart,
  598 │       "projeto": Wrench,
  599 │       "projeto-vida": Star,
  600 │       "proposta-redacao": PenTool,
  601 │       "prova": CheckSquare,
  602 │       "questoes-pdf": FileText,
  603 │       "questoes-site": Globe,
  604 │       "questoes-texto": FileText,
  605 │       "questoes-video": Video,
  606 │       "redacao": PenTool,
  607 │       "reescritor-texto": PenTool,
  608 │       "reflexao-incidente": MessageSquare,
  609 │       "relatorio": FileText,
  610 │       "relatorio-desempenho": Trophy,
  611 │       "resposta-email": Mail,
  612 │       "revisor-gramatical": CheckSquare,
  613 │       "revisao-guiada": BookOpen,
  614 │       "resumo": FileText,
  615 │       "resumo-texto": FileText,
  616 │       "resumo-video": Video,
  617 │       "sequencia-didatica": BookOpen,
  618 │       "simulado": CheckSquare,
  619 │       "sugestoes-intervencao": Lightbulb,
  620 │       "tabela-apoio": Puzzle,
  621 │       "tarefa-adaptada": Heart,
  622 │       "texto-apoio": BookOpen,
  623 │       "gerar-questoes": PenTool,
  624 │       "apresentacao-slides": Target,
  625 │       "tornar-relevante": Star
  626 │     };
  627 │ 
  628 │     // Verifica se existe mapeamento direto para o ID
  629 │     if (uniqueIconMapping[activityId]) {
  630 │       return uniqueIconMapping[activityId];
  631 │     }
  632 │ 
  633 │     // Sistema de fallback com hash consistente para IDs não mapeados
  634 │     const fallbackIcons = [
  635 │       BookOpen, FileText, PenTool, Search, Brain,
  636 │       Users, MessageSquare, Presentation, ThumbsUp, Heart,
  637 │       Wrench, Target, Compass, Trophy, Edit3,
  638 │       Calendar, Clock, CheckSquare, Star, Award,
  639 │       Microscope, Calculator, Eye, Globe, MapPin,
  640 │       Music, Palette, Camera, Video, Headphones,
  641 │       Lightbulb, Zap, Flag, Key, Shield,
  642 │       TreePine, Sun, Cloud, Home, Car
  643 │     ];
  644 │ 
  645 │     // Gera hash consistente baseado no ID
  646 │     let hash = 0;
  647 │     for (let i = 0; i < activityId.length; i++) {
  648 │       const char = activityId.charCodeAt(i);
  649 │       hash = ((hash << 5) - hash) + char;
  650 │       hash = hash & hash;
  651 │     }
  652 │ 
  653 │     const iconIndex = Math.abs(hash) % fallbackIcons.length;
  654 │     return fallbackIcons[iconIndex];
  655 │   };
  656 │ 
  657 │   const [selectedTrilhasCount, setSelectedTrilhasCount] = useState(0);
  658 │ 
  659 │   useEffect(() => {
  660 │     const trilhasActivityIds = [
  661 │       'projeto-pesquisa',
  662 │       'projeto-cientifico',
  663 │       'projeto-criativo',
  664 │       'projeto-colaborativo',
  665 │       'projeto-individual',
  666 │       'projeto-inovacao',
  667 │       'projeto-sustentabilidade',
  668 │       'projeto-social',
  669 │       'projeto-tecnologico',
  670 │       'projeto-artistico',
  671 │       'projeto-empreendedor',
  672 │       'projeto-interdisciplinar',
  673 │       'projeto-experimental',
  674 │       'projeto-aplicado',
  675 │       'projeto-extensao',
  676 │       'projeto-integrador',
  677 │       'projeto-final',
  678 │     ];
  679 │ 
  680 │     const selectedTrilhas = selectedActivities2.filter(activity =>
  681 │       trilhasActivityIds.includes(activity.id)
  682 │     );
  683 │ 
  684 │     setSelectedTrilhasCount(selectedTrilhas.length);
  685 │   }, [selectedActivities2]);
  686 │ 
  687 │   // Adicionar preenchimento automático dos campos do modal com dados da IA
  688 │   const [selectedActivity, setSelectedActivity] = useState<ActionPlanItem | null>(null);
  689 │   const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  690 │ 
  691 │   const handleEditActivity = (activity: any) => {
  692 │     console.log('🔧 Editando atividade:', activity.id);
  693 │ 
  694 │         // Buscar dados da atividade no action plan se disponível
  695 │     const actionPlanActivity = actionPlan?.find(item => item.id === activity.id);
  696 │ 
  697 │     if (actionPlanActivity?.customFields && Object.keys(actionPlanActivity.customFields).length > 0) {
  698 │       console.log('📋 Preenchendo automaticamente com dados da IA:', actionPlanActivity.customFields);
  699 │ 
  700 │       // Preparar dados automáticos para preenchimento do modal
  701 │       const autoDataKey = `auto_activity_data_${activity.id}`;
  702 │       const autoFormData = {
  703 │         title: actionPlanActivity.title || activity.title,
  704 │         description: actionPlanActivity.description || activity.description,
  705 │         subject: actionPlanActivity.customFields['Disciplina'] || 'Português',
  706 │         theme: actionPlanActivity.customFields['Tema'] || '',
  707 │         schoolYear: actionPlanActivity.customFields['Ano de Escolaridade'] || '',
  708 │         numberOfQuestions: actionPlanActivity.customFields['Quantidade de Questões'] || '10',
  709 │         difficultyLevel: actionPlanActivity.customFields['Nível de Dificuldade'] || 'Médio',
  710 │         questionModel: actionPlanActivity.customFields['Modelo de Questões'] || '',
  711 │         sources: actionPlanActivity.customFields['Fontes'] || '',
  712 │         objectives: actionPlanActivity.customFields['Objetivos'] || '',
  713 │         materials: actionPlanActivity.customFields['Materiais'] || '',
  714 │         instructions: actionPlanActivity.customFields['Instruções'] || '',
  715 │         evaluation: actionPlanActivity.customFields['Critérios de Correção'] || actionPlanActivity.customFields['Critérios de Avaliação'] || ''
  716 │       };
  717 │ 
  718 │       // Salvar dados automáticos no localStorage para o modal usar
  719 │       const autoData = {
  720 │         formData: autoFormData,
  721 │         customFields: actionPlanActivity.customFields,
  722 │         timestamp: Date.now()
  723 │       };
  724 │ 
  725 │       localStorage.setItem(autoDataKey, JSON.stringify(autoData));
  726 │       console.log('💾 Dados automáticos salvos para:', activity.id, autoFormData);
  727 │     }
  728 │ 
  729 │     setSelectedActivity(activity);
  730 │     setIsEditModalOpen(true);
  731 │   };
  732 │ 
  733 │   return (
  734 │     <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:734:4" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="734" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20rounded-2xl%20p-6%20shadow-2xl%20border%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F30%20bg-white%20dark%3Abg-%5B%23021321%5D%22%7D"
  735 │       initial={{ opacity: 0, scale: 0.8, y: 50 }}
  736 │       animate={{ opacity: 1, scale: 1, y: 0 }}
  737 │       exit={{ opacity: 0, scale: 0.8, y: -50 }}
  738 │       transition={{
  739 │         duration: 0.6,
  740 │         ease: [0.25, 0.1, 0.25, 1],
  741 │         type: "spring",
  742 │         stiffness: 100,
  743 │         damping: 15,
  744 │       }}
  745 │       className="relative rounded-2xl p-6 shadow-2xl border border-[#FF6B00]/30 dark:border-[#FF6B00]/30 bg-white dark:bg-[#021321]"
  746 │       style={{
  747 │         width: "1353px",
  748 │         height: "773px"
  749 │       }}
  750 │       data-theme="adaptive"
  751 │     >
  752 │       {/* Cabeçalho Persistente Fixo */}
  753 │       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:753:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="753" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-0%20left-0%20right-0%20h-20%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%20to-%5B%23FF9248%5D%20rounded-t-2xl%20flex%20items-center%20justify-between%20px-6%20z-0%22%7D" className="absolute top-0 left-0 right-0 h-20 bg-gradient-to-r from-[#FF6B00] to-[#FF9248] rounded-t-2xl flex items-center justify-between px-6 z-0">
  754 │         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:754:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="754" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  755 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:755:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="755" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F20%20rounded-lg%20flex%20items-center%20justify-center%22%7D" className="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
  756 │             {step === "contextualization" ? (
  757 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:757:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="757" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  758 │                 className="w-7 h-7 text-white"
  759 │                 fill="none"
  760 │                 viewBox="0 0 24 24"
  761 │                 stroke="currentColor"
  762 │               >
  763 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:763:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="763" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  764 │                   strokeLinecap="round"
  765 │                   strokeLinejoin="round"
  766 │                   strokeWidth={2}
  767 │                   d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
  768 │                 />
  769 │               </svg>
  770 │             ) : step === "actionPlan" ? (
  771 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:771:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="771" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  772 │                 className="w-7 h-7 text-white"
  773 │                 fill="none"
  774 │                 viewBox="0 0 24 24"
  775 │                 stroke="currentColor"
  776 │               >
  777 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:777:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="777" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  778 │                   strokeLinecap="round"
  779 │                   strokeLinejoin="round"
  780 │                   strokeWidth={2}
  781 │                   d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
  782 │                 />
  783 │               </svg>
  784 │             ) : (
  785 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:785:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="785" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%20animate-spin%22%7D"
  786 │                 className="w-7 h-7 text-white animate-spin"
  787 │                 fill="none"
  788 │                 viewBox="0 0 24 24"
  789 │                 stroke="currentColor"
  790 │               >
  791 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:791:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="791" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  792 │                   strokeLinecap="round"
  793 │                   strokeLinejoin="round"
  794 │                   strokeWidth={2}
  795 │                   d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
  796 │                 />
  797 │               </svg>
  798 │             )}
  799 │           </div>
  800 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:800:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="800" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  801 │             <h1 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:801:12" data-lov-name="h1"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="801" data-component-file="CardDeConstrucao.tsx" data-component-name="h1" data-component-content="%7B%22className%22%3A%22text-white%20font-bold%20text-2xl%22%7D" className="text-white font-bold text-2xl">
  802 │               {step === "contextualization"
  803 │                 ? "Quiz de Contextualização"
  804 │                 : step === "actionPlan"
  805 │                   ? "Plano de Ação"
  806 │                   : step === "generating"
  807 │                     ? "Gerando Conteúdo..."
  808 │                     : step === "activities"
  809 │                       ? "Construção de Atividades"
  810 │                       : "School Power"}
  811 │             </h1>
  812 │           </div>
  813 │         </div>
  814 │ 
  815 │         {/* Barra de Progresso */}
  816 │         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:816:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="816" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  817 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:817:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="817" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20flex%20items-center%20justify-between%20w-44%22%7D" className="relative flex items-center justify-between w-44">
  818 │             {/* Background progress line */}
  819 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:819:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="819" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%2F30%20rounded-full%20z-0%22%7D" className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white/30 rounded-full z-0" style={{ left: '16px', right: '16px' }}></div>
  820 │ 
  821 │             {/* Active progress line */}
  822 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:822:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="822" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%20rounded-full%20z-0%20transition-all%20duration-500%20ease-out%22%7D" 
  823 │               className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white rounded-full z-0 transition-all duration-500 ease-out"
  824 │               style={{ 
  825 │                 left: '16px',
  826 │                 width: `${
  827 │                   step === "contextualization" ? "0%" :
  828 │                   step === "actionPlan" ? "50%" :
  829 │                   (step === "generating" || step === "generatingActivities" || step === "activities") ? "100%" : "0%"
  830 │                 }`
  831 │               }}
  832 │             ></div>
  833 │ 
  834 │             {/* Step indicators */}
  835 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:835:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="835" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  836 │               step === "contextualization" ? 'bg-white border-white text-[#FF6B00]' : 'bg-[#FF6B00] border-white text-white'
  837 │             }`}>
  838 │               {step === "contextualization" ? (
  839 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:839:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="839" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%221%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">1</span>
  840 │               ) : (
  841 │                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:841:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="841" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  842 │                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:842:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="842" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  843 │                 </svg>
  844 │               )}
  845 │             </div>
  846 │ 
  847 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:847:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="847" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  848 │               step === "actionPlan" ? 'bg-white border-white text-[#FF6B00]' :
  849 │               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-[#FF6B00] border-white text-white' :
  850 │               'bg-white/20 border-white/30 text-white'
  851 │             }`}>
  852 │               {step === "actionPlan" ? (
  853 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:853:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="853" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  854 │               ) : (step === "generating" || step === "generatingActivities" || step === "activities") ? (
  855 │                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:855:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="855" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  856 │                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:856:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="856" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  857 │                 </svg>
  858 │               ) : (
  859 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:859:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="859" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  860 │               )}
  861 │             </div>
  862 │ 
  863 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:863:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="863" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  864 │               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-white border-white text-[#FF6B00]' : 'bg-white/20 border-white/30 text-white'
  865 │             }`}>
  866 │               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:866:14" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="866" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%223%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">3</span>
  867 │             </div>
  868 │           </div>
  869 │         </div>
  870 │       </div>
  871 │ 
  872 │       {/* Renderização condicional baseada no step */}
  873 │       {step === "generating" || step === "generatingActivities" ? (
  874 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:874:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="874" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20flex%20flex-col%20items-center%20justify-center%20h-full%20text-center%20px-4%20pt-16%22%7D"
  875 │           className="relative z-10 flex flex-col items-center justify-center h-full text-center px-4 pt-16"
  876 │           initial={{ opacity: 0 }}
  877 │           animate={{ opacity: 1 }}
  878 │           transition={{ duration: 0.3 }}
  879 │         >
  880 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:880:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="880" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20mb-4%22%7D" className="relative mb-4">
  881 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:881:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="881" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22animate-spin%20rounded-full%20h-16%20w-16%20border-4%20border-%5B%23FF6B00%5D%2F20%20border-t-%5B%23FF6B00%5D%20mx-auto%22%7D" className="animate-spin rounded-full h-16 w-16 border-4 border-[#FF6B00]/20 border-t-[#FF6B00] mx-auto"></div>
  882 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:882:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="882" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-full%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-transparent%20animate-pulse%22%7D" className="absolute inset-0 rounded-full bg-gradient-to-r from-[#FF6B00]/10 to-transparent animate-pulse"></div>
  883 │           </div>
  884 │           <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:884:10" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="884" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-xl%20sm%3Atext-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-3%22%7D" className="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-3">
  885 │             {step === "generating"
  886 │               ? "🤖 Analisando com IA Gemini"
  887 │               : "🎯 Gerando Atividades"}
  888 │           </h3>
  889 │           <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:889:10" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="889" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-700%20dark%3Atext-gray-300%20mb-4%20max-w-lg%20text-sm%20sm%3Atext-base%22%7D" className="text-gray-700 dark:text-gray-300 mb-4 max-w-lg text-sm sm:text-base">
  890 │             {step === "generating"
  891 │               ? "A IA está processando sua mensagem e contexto para criar um plano de ação personalizado..."
  892 │               : "As atividades aprovadas estão sendo geradas automaticamente pelo School Power..."}
  893 │           </p>
  894 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:894:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="894" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-orange-100%2F20%20dark%3Ato-%5B%2329335C%5D%2F10%20rounded-lg%20p-3%20sm%3Ap-4%20mb-4%20border%20border-%5B%23FF6B00%5D%2F20%20max-w-md%20w-full%22%7D" className="bg-gradient-to-r from-[#FF6B00]/10 to-orange-100/20 dark:to-[#29335C]/10 rounded-lg p-3 sm:p-4 mb-4 border border-[#FF6B00]/20 max-w-md w-full">
  895 │             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:895:12" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="895" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-xs%20sm%3Atext-sm%20text-gray-700%20dark%3Atext-gray-300%20leading-relaxed%22%7D" className="text-xs sm:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
  896 │               {step === "generating" ? (
  897 │                 <>
  898 │                   ✨ Consultando 137 atividades disponíveis
  899 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:899:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="899" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  900 │                   🎯 Personalizando para seu contexto específico
  901 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:901:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="901" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  902 │                   📝 Gerando sugestões inteligentes
  903 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:903:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="903" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  904 │                   🔍 Validando compatibilidade das atividades
  905 │                 </>
  906 │               ) : (
  907 │                 <>
  908 │                   ✅ Personalizando conteúdo das atividades
  909 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:909:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="909" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  910 │                   🎨 Criando materiais visuais
  911 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:911:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="911" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  912 │                   📝 Formatando atividades finais
  913 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:913:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="913" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  914 │                   🚀 Preparando download
  915 │                 </>
  916 │               )}
  917 │             </p>
  918 │           </div>
  919 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:919:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="919" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20justify-center%22%7D" className="flex gap-3 justify-center">
  920 │             {onResetFlow && (
  921 │               <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:921:14" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="921" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22px-4%20py-2%20text-sm%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-lg%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
  922 │                 onClick={onResetFlow}
  923 │                 className="px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
  924 │               >
  925 │                 Cancelar
  926 │               </button>
  927 │             )}
  928 │           </div>
  929 │         </motion.div>
  930 │       ) : step === "activities" ? (
  931 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:931:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="931" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  932 │           key="activities-content"
  933 │           initial={{ opacity: 0, x: 20 }}
  934 │           animate={{ opacity: 1, x: 0 }}
  935 │           transition={{ duration: 0.3 }}
  936 │           className="relative z-10 h-full flex flex-col pt-16"
  937 │         >
  938 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:938:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="938" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-end%20mb-4%22%7D" className="flex items-center justify-end mb-4">
  939 │             <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:939:12" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="939" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Voltar%20ao%20in%C3%ADcio%22%2C%22className%22%3A%22px-3%20py-2%20text-sm%20text-gray-600%20hover%3Atext-gray-900%20dark%3Atext-gray-400%20dark%3Ahover%3Atext-white%20transition-colors%22%7D"
  940 │               onClick={onResetFlow}
  941 │               className="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
  942 │             >
  943 │               Voltar ao início
  944 │             </button>
  945 │           </div>
  946 │ 
  947 │           {/* Interface de Construção */}
  948 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:948:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="948" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-hidden%22%7D" className="flex-1 overflow-hidden">
  949 │             {console.log('🎯 CardDeConstrucao: Passando atividades para ConstructionInterface:', selectedActivities2)}
  950 │             <ConstructionInterface data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:950:12" data-lov-name="ConstructionInterface"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="950" data-component-file="CardDeConstrucao.tsx" data-component-name="ConstructionInterface" data-component-content="%7B%7D" approvedActivities={selectedActivities2} handleEditActivity={handleEditActivity} />
  951 │           </div>
  952 │         </motion.div>
  953 │       ) : (
  954 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:954:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="954" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  955 │           className="relative z-10 h-full flex flex-col pt-16"
  956 │           initial={{ y: 20, opacity: 0 }}
  957 │           animate={{ y: 0, opacity: 1 }}
  958 │           transition={{ delay: 0.2, duration: 0.5 }}
  959 │         >
  960 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:960:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="960" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22text-center%20mb-4%20sm%3Amb-6%22%7D" className="text-center mb-4 sm:mb-6"></div>
  961 │ 
  962 │           {step === "contextualization" ? (
  963 │             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:963:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="963" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
  964 │               key="contextualization-content"
  965 │               initial={{ opacity: 0, x: -20 }}
  966 │               animate={{ opacity: 1, x: 0 }}
  967 │               transition={{ duration: 0.3 }}
  968 │               className="flex-1 flex flex-col overflow-hidden"
  969 │             >
  970 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:970:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="970" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20space-y-3%20sm%3Aspace-y-4%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
  971 │                 className="flex-1 overflow-y-auto space-y-3 sm:space-y-4 mb-3 sm:mb-4 pr-1 sm:pr-2"
  972 │                 style={{
  973 │                   maxHeight: "calc(100% - 80px)",
  974 │                   scrollbarWidth: "thin",
  975 │                   scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
  976 │                 }}
  977 │               >
  978 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:978:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="978" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  979 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:979:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="979" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9A%20Quais%20mat%C3%A9rias%20e%20temas%20ser%C3%A3o%20trabalhados%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  980 │                     📚 Quais matérias e temas serão trabalhados? *
  981 │                   </label>
  982 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:982:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="982" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20as%20mat%C3%A9rias%20e%20temas%20que%20voc%C3%AA%20quer%20estudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  983 │                     value={formData.materias}
  984 │                     onChange={(e) =>
  985 │                       handleInputChange("materias", e.target.value)
  986 │                     }
  987 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
  988 │                     rows={2}
  989 │                     placeholder="Descreva as matérias e temas que você quer estudar..."
  990 │                   />
  991 │                 </div>
  992 │ 
  993 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:993:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="993" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  994 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:994:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="994" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Qual%20o%20p%C3%BAblico-alvo%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  995 │                     🎯 Qual o público-alvo? *
  996 │                   </label>
  997 │                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:997:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="997" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Ensino%20M%C3%A9dio%2C%203%C2%BA%20ano%2C%20vestibular...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  998 │                     type="text"
  999 │                     value={formData.publicoAlvo}
 1000 │                     onChange={(e) =>
 1001 │                       handleInputChange("publicoAlvo", e.target.value)
 1002 │                     }
 1003 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1004 │                     placeholder="Ex: Ensino Médio, 3º ano, vestibular..."
 1005 │                   />
 1006 │                 </div>
 1007 │ 
 1008 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1008:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1008" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1009 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1009:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1009" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%E2%9A%A0%EF%B8%8F%20Quais%20restri%C3%A7%C3%B5es%20ou%20prefer%C3%AAncias%20espec%C3%ADficas%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1010 │                     ⚠️ Quais restrições ou preferências específicas? *
 1011 │                   </label>
 1012 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1012:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1012" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20limita%C3%A7%C3%B5es%20de%20tempo%2C%20dificuldades%20espec%C3%ADficas%2C%20etc...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1013 │                     value={formData.restricoes}
 1014 │                     onChange={(e) =>
 1015 │                       handleInputChange("restricoes", e.target.value)
 1016 │                     }
 1017 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1018 │                     rows={2}
 1019 │                     placeholder="Descreva limitações de tempo, dificuldades específicas, etc..."
 1020 │                   />
 1021 │                 </div>
 1022 │ 
 1023 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1023:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1023" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1024 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1024:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1024" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%85%20Per%C3%ADodo%20de%20entrega%20ou%20datas%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1025 │                     📅 Período de entrega ou datas importantes
 1026 │                   </label>
 1027 │                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1027:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1027" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Prova%20em%202%20semanas%2C%20ENEM%20em%20novembro...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1028 │                     type="text"
 1029 │                     value={formData.datasImportantes}
 1030 │                     onChange={(e) =>
 1031 │                       handleInputChange("datasImportantes", e.target.value)
 1032 │                     }
 1033 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1034 │                     placeholder="Ex: Prova em 2 semanas, ENEM em novembro..."
 1035 │                   />
 1036 │                 </div>
 1037 │ 
 1038 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1038:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1038" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1039 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1039:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1039" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20Outras%20observa%C3%A7%C3%B5es%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1040 │                     📝 Outras observações importantes
 1041 │                   </label>
 1042 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1042:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1042" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Informa%C3%A7%C3%B5es%20adicionais%20que%20podem%20ajudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1043 │                     value={formData.observacoes}
 1044 │                     onChange={(e) =>
 1045 │                       handleInputChange("observacoes", e.target.value)
 1046 │                     }
 1047 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1048 │                     rows={2}
 1049 │                     placeholder="Informações adicionais que podem ajudar..."
 1050 │                   />
 1051 │                 </div>
 1052 │               </div>
 1053 │ 
 1054 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1054:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1054" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1055 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1055:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1055" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20text-sm%20sm%3Atext-base%22%7D"
 1056 │                   onClick={handleSubmitContextualization}
 1057 │                   disabled={!isContextualizationValid || isLoading}
 1058 │                   className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
 1059 │                 >
 1060 │                   {isLoading ? "Processando..." : "Gerar Plano de Aula"}
 1061 │                 </button>
 1062 │               </div>
 1063 │             </motion.div>
 1064 │           ) : (
 1065 │             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1065:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1065" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
 1066 │               key="actionplan-content"
 1067 │               initial={{ opacity: 0, x: 20 }}
 1068 │               animate={{ opacity: 1, x: 0 }}
 1069 │               transition={{ duration: 0.3 }}
 1070 │               className="flex-1 flex flex-col overflow-hidden"
 1071 │             >
 1072 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1072:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1072" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%20sm%3Amb-4%22%7D" className="flex items-center justify-between mb-3 sm:mb-4">
 1073 │                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1073:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1073" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-base%20sm%3Atext-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%22%7D" className="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
 1074 │                   {showAddActivityInterface ? "Adicionar Atividade Manual" : "Atividades Sugeridas"}
 1075 │                 </h3>
 1076 │                 {!showAddActivityInterface && (
 1077 │                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1077:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1077" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D" className="flex items-center gap-2">
 1078 │                     <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1078:20" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1078" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-%5B%23FF6B00%5D%2F10%20to-%5B%23FF9248%5D%2F5%20hover%3Afrom-%5B%23FF6B00%5D%2F20%20hover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-%5B%23FF6B00%5D%2F30%20hover%3Aborder-%5B%23FF6B00%5D%2F50%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
 1079 │                       onClick={() => setShowAddActivityInterface(true)}
 1080 │                       className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-[#FF6B00]/10 to-[#FF9248]/5 hover:from-[#FF6B00]/20 hover:to-[#FF9248]/10 border border-[#FF6B00]/30 hover:border-[#FF6B00]/50 transition-all duration-300 shadow-sm hover:shadow-md"
 1081 │                       title="Adicionar Atividade Manual"
 1082 │                     >
 1083 │                       <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1083:22" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1083" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1084 │                         <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1084:24" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1084" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1085 │                       </svg>
 1086 │                     </button>
 1087 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1087:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1087" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22selecionada%22%2C%22className%22%3A%22bg-%5B%23FF6B00%5D%2F10%20text-%5B%23FF6B00%5D%20px-2%20sm%3Apx-3%20py-1%20rounded-full%20text-xs%20sm%3Atext-sm%20font-medium%22%7D" className="bg-[#FF6B00]/10 text-[#FF6B00] px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium">
 1088 │                       {selectedActivities2.length} selecionada
 1089 │                       {selectedActivities2.length !== 1 ? "s" : ""}
 1090 │                       {selectedTrilhasCount > 0 && (
 1091 │                         <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1091:24" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1091" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22(%20trilha%20)%22%2C%22className%22%3A%22ml-1%20text-orange-600%22%7D" className="ml-1 text-orange-600">
 1092 │                           ({selectedTrilhasCount} trilha{selectedTrilhasCount !== 1 ? "s" : ""})
 1093 │                         </span>
 1094 │                       )}
 1095 │                     </div>
 1096 │                     <GridToggleComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1096:20" data-lov-name="GridToggleComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1096" data-component-file="CardDeConstrucao.tsx" data-component-name="GridToggleComponent" data-component-content="%7B%7D" 
 1097 │                       viewMode={viewMode}
 1098 │                       onToggle={() => setViewMode(viewMode === 'list' ? 'grid' : 'list')}
 1099 │                     />
 1100 │                     <FilterComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1100:20" data-lov-name="FilterComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1100" data-component-file="CardDeConstrucao.tsx" data-component-name="FilterComponent" data-component-content="%7B%7D" 
 1101 │                       activities={getCombinedActivities()}
 1102 │                       selectedActivities2={selectedActivities2}
 1103 │                       onFilterApply={(filterType) => handleFilterApply(filterType)}
 1104 │                     />
 1105 │                   </div>
 1106 │                 )}
 1107 │               </div>
 1108 │ 
 1109 │               {showAddActivityInterface ? (
 1110 │                 <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1110:16" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1110" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
 1111 │                   className="flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2"
 1112 │                   initial={{ opacity: 0, x: 20 }}
 1113 │                   animate={{ opacity: 1, x: 0 }}
 1114 │                   transition={{ duration: 0.3 }}
 1115 │                 >
 1116 │                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1116:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1116" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22space-y-4%22%7D" className="space-y-4">
 1117 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1117:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1117" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1118 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1118:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1118" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20T%C3%ADtulo%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1119 │                         📝 Título da Atividade *
 1120 │                       </label>
 1121 │                       <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1121:22" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1121" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Lista%20de%20Exerc%C3%ADcios%20sobre%20Fun%C3%A7%C3%B5es%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1122 │                         type="text"
 1123 │                         value={manualActivityForm.title}
 1124 │                         onChange={(e) => handleManualFormChange('title', e.target.value)}
 1125 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1126 │                         placeholder="Ex: Lista de Exercícios sobre Funções"
 1127 │                         maxLength={100}
 1128 │                       />
 1129 │                     </div>
 1130 │ 
 1131 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1131:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1131" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1132 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1132:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1132" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Tipo%20de%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1133 │                         🎯 Tipo de Atividade *
 1134 │                       </label>
 1135 │                       <select data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1135:22" data-lov-name="select"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1135" data-component-file="CardDeConstrucao.tsx" data-component-name="select" data-component-content="%7B%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%22%7D"
 1136 │                         value={manualActivityForm.typeId}
 1137 │                         onChange={(e) => handleManualFormChange('typeId', e.target.value)}
 1138 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm"
 1139 │                       >
 1140 │                         <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1140:24" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1140" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%22text%22%3A%22Selecione%20o%20tipo%20de%20atividade...%22%7D" value="">Selecione o tipo de atividade...</option>
 1141 │                         {schoolPowerActivities.map((activity) => (
 1142 │                           <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1142:26" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1142" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%7D" key={activity.id} value={activity.id}>
 1143 │                             {activity.name}
 1144 │                           </option>
 1145 │                         ))}
 1146 │                       </select>
 1147 │                     </div>
 1148 │ 
 1149 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1149:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1149" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1150 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1150:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1150" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8B%20Descri%C3%A7%C3%A3o%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1151 │                         📋 Descrição da Atividade *
 1152 │                       </label>
 1153 │                       <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1153:22" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1153" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20detalhadamente%20o%20que%20voc%C3%AA%20quer%20que%20seja%20feito%20nesta%20atividade...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1154 │                         value={manualActivityForm.description}
 1155 │                         onChange={(e) => handleManualFormChange('description', e.target.value)}
 1156 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1157 │                         rows={4}
 1158 │                         placeholder="Descreva detalhadamente o que você quer que seja feito nesta atividade..."
 1159 │                         maxLength={500}
 1160 │                       />
 1161 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1161:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1161" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%2F500%20caracteres%22%2C%22className%22%3A%22text-xs%20text-gray-500%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-500 dark:text-gray-400 mt-1">
 1162 │                         {manualActivityForm.description.length}/500 caracteres
 1163 │                       </div>
 1164 │                     </div>
 1165 │ 
 1166 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1166:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1166" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D" className="flex gap-3 pt-4">
 1167 │                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1167:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1167" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-xl%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
 1168 │                         onClick={() => setShowAddActivityInterface(false)}
 1169 │                         className="flex-1 px-4 py-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
 1170 │                       >
 1171 │                         Cancelar
 1172 │                       </button>
 1173 │                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1173:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1173" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Adicionar%20Atividade%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D"
 1174 │                         onClick={handleAddManualActivity}
 1175 │                         disabled={!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()}
 1176 │                         className="flex-1 px-4 py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
 1177 │                       >
 1178 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1178:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1178" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%22%7D" className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1179 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1179:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1179" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1180 │                         </svg>
 1181 │                         Adicionar Atividade
 1182 │                       </button>
 1183 │                     </div>
 1184 │                   </div>
 1185 │                 </motion.div>
 1186 │               ) : (
 1187 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1187:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1187" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D"
 1188 │                   className={`flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2 ${
 1189 │                     viewMode === 'grid' 
 1190 │                       ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 auto-rows-min' 
 1191 │                       : 'space-y-2 sm:space-y-3'
 1192 │                   }`}
 1193 │                   style={{
 1194 │                     maxHeight: "calc(100% - 80px)",
 1195 │                     scrollbarWidth: "thin",
 1196 │                     scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
 1197 │                   }}
 1198 │                 >
 1199 │                   {(filterState === 'selected' 
 1200 │                     ? selectedActivities2 
 1201 │                     : getCombinedActivities()
 1202 │                   )?.map((activity, index) => {
 1203 │                     const isSelected = selectedActivities2.some(
 1204 │                       (item) => item.id === activity.id,
 1205 │                     );
 1206 │ 
 1207 │                     const badgeProps = getTrilhasBadgeProps(activity.id);
 1208 │ 
 1209 │                     return (
 1210 │                       <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1210:22" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1210" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%7D"
 1211 │                         key={activity.id}
 1212 │                         className={`relative p-6 border-2 transition-all duration-300 cursor-pointer ${
 1213 │                           viewMode === 'grid' ? 'rounded-[32px]' : 'rounded-[32px] mb-4'
 1214 │                         } ${
 1215 │                           isSelected
 1216 │                             ? 'border-[#FF6B00] bg-[#FF6B00]/5 dark:bg-[#FF6B00]/10 shadow-lg transform scale-[1.02]'
 1217 │                             : 'border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-[#FF6B00]/50 hover:shadow-md'
 1218 │                         }`}
 1219 │                         initial={{ opacity: 0, y: 20 }}
 1220 │                         animate={{ opacity: 1, y: 0 }}
 1221 │                         transition={{ duration: 0.3, delay: index * 0.05 }}
 1222 │                         onClick={() => handleActivityToggle(activity)}
 1223 │                       >
 1224 │                         {/* Badge Manual - para atividades manuais */}
 1225 │                         {activity.isManual && (
 1226 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1226:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1226" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`absolute top-4 z-20 ${badgeProps.showBadge ? 'right-[131px]' : 'right-4'}`}>
 1227 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1227:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1227" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20px-4%20py-2%20border-2%20border-purple-500%20rounded-full%20bg-purple-500%2F10%20hover%3Abg-purple-500%2F15%20hover%3Aborder-purple-600%20transition-all%20duration-300%20cursor-default%20hover%3Ascale-105%22%7D" className="flex items-center gap-3 px-4 py-2 border-2 border-purple-500 rounded-full bg-purple-500/10 hover:bg-purple-500/15 hover:border-purple-600 transition-all duration-300 cursor-default hover:scale-105">
 1228 │                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1228:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1228" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-2%20h-6%20min-w-2%20min-h-6%20flex%20items-center%20justify-center%20relative%20flex-shrink-0%22%7D" className="w-2 h-6 min-w-2 min-h-6 flex items-center justify-center relative flex-shrink-0">
 1229 │                                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1229:32" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1229" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-purple-600%20transition-all%20duration-300%20relative%20z-10%22%7D" className="w-5 h-5 text-purple-600 transition-all duration-300 relative z-10" fill="currentColor" viewBox="0 0 20 20">
 1230 │                                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1230:34" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1230" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
 1231 │                                 </svg>
 1232 │                               </div>
 1233 │                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1233:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1233" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Manual%22%2C%22className%22%3A%22text-sm%20font-bold%20text-purple-600%20whitespace-nowrap%20transition-all%20duration-300%22%7D" className="text-sm font-bold text-purple-600 whitespace-nowrap transition-all duration-300">
 1234 │                                 Manual
 1235 │                               </span>                            </div>
 1236 │                           </div>
 1237 │                         )}
 1238 │ 
 1239 │                         {/* Badge Trilhas */}
 1240 │                         {badgeProps.showBadge && (
 1241 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1241:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1241" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-4%20right-4%20z-20%22%7D" className="absolute top-4 right-4 z-20">
 1242 │                             <TrilhasBadge data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1242:28" data-lov-name="TrilhasBadge"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1242" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasBadge" data-component-content="%7B%7D" />
 1243 │                           </div>
 1244 │                         )}
 1245 │ 
 1246 │                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1246:24" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1246" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-start%20gap-4%22%7D" className="flex items-start gap-4">
 1247 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1247:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1247" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%22%7D" className="flex-1">
 1248 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1248:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1248" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D" className="flex items-center gap-3 mb-2">
 1249 │                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1249:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1249" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" 
 1250 │                                 className={`icon-container ${isSelected ? 'active' : ''}`}
 1251 │                                 onClick={(e) => {
 1252 │                                   e.stopPropagation();
 1253 │                                   handleActivityToggle(activity);
 1254 │                                 }}
 1255 │                                 style={{
 1256 │                                   width: '40px',
 1257 │                                   height: '40px',
 1258 │                                   minWidth: '40px',
 1259 │                                   minHeight: '40px',
 1260 │                                   borderRadius: '14px',
 1261 │                                   display: 'flex',
 1262 │                                   alignItems: 'center',
 1263 │                                   justifyContent: 'center',
 1264 │                                   background: isSelected 
 1265 │                                     ? 'linear-gradient(135deg, #FF6E06, #FF8A39)' 
 1266 │                                     : 'rgba(255, 110, 6, 0.1)',
 1267 │                                   transition: 'all 0.3s ease',
 1268 │                                   position: 'relative',
 1269 │                                   overflow: 'hidden',
 1270 │                                   cursor: 'pointer',
 1271 │                                   boxShadow: isSelected 
 1272 │                                     ? '0 6px 12px rgba(255, 110, 6, 0.3)' 
 1273 │                                     : 'none',
 1274 │                                   transform: isSelected ? 'scale(1.05)' : 'scale(1)'
 1275 │                                 }}
 1276 │                               >
 1277 │                                 {isSelected ? (
 1278 │                                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1278:34" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1278" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-white%20transition-all%20duration-300%20relative%20z-10%22%7D" 
 1279 │                                     className="w-5 h-5 text-white transition-all duration-300 relative z-10" 
 1280 │                                     fill="currentColor" 
 1281 │                                     viewBox="0 0 20 20"
 1282 │                                   >
 1283 │                                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1283:36" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1283" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" 
 1284 │                                       fillRule="evenodd" 
 1285 │                                       d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" 
 1286 │                                       clipRule="evenodd"/>
 1287 │                                   </svg>
 1288 │                                 ) : (
 1289 │                                   React.createElement(getIconByActivityId(activity.id), {
 1290 │                                     className: `w-5 h-5 transition-all duration-300 relative z-10`,
 1291 │                                     style: {
 1292 │                                       color: '#FF6E06'
 1293 │                                     }
 1294 │                                   })
 1295 │                                 )}
 1296 │                                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1296:32" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1296" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22icon-glow%22%7D" 
 1297 │                                   className="icon-glow"
 1298 │                                   style={{
 1299 │                                     position: 'absolute',
 1300 │                                     top: '50%',
 1301 │                                     left: '50%',
 1302 │                                     width: '20px',
 1303 │                                     height: '20px',
 1304 │                                     background: 'radial-gradient(circle, rgba(255, 110, 6, 0.5), transparent)',
 1305 │                                     borderRadius: '50%',
 1306 │                                     transform: isSelected 
 1307 │                                       ? 'translate(-50%, -50%) scale(2.2)' 
 1308 │                                       : 'translate(-50%, -50%) scale(0)',
 1309 │                                     transition: 'transform 0.3s ease'
 1310 │                                   }}
 1311 │                                 />
 1312 │                               </div>
 1313 │ 
 1314 │                               <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1314:30" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1314" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20line-clamp-2%20flex-1%20pr-8%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 flex-1 pr-8">
 1315 │                                 {activity.title}
 1316 │                               </h3>
 1317 │                             </div>
 1318 │ 
 1319 │                             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1319:28" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1319" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20leading-relaxed%20line-clamp-3%20mb-3%22%7D" className="text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-3 mb-3">
 1320 │                               {activity.description}
 1321 │                             </p>
 1322 │ 
 1323 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1323:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1323" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8A%20%E2%80%A2%20%E2%8F%B1%EF%B8%8F%22%2C%22className%22%3A%22text-xs%20text-gray-600%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-600 dark:text-gray-400 mt-1">
 1324 │                                         📊 {activity.difficulty} • ⏱️ {activity.duration || '30 min'}
 1325 │                                       </div>
 1326 │ 
 1327 │                                       {/* Exibir customFields como tags/badges */}
 1328 │                                       {activity.customFields && Object.keys(activity.customFields).length > 0 && (
 1329 │                                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1329:40" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1329" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-3%20flex%20flex-wrap%20gap-2%22%7D" className="mt-3 flex flex-wrap gap-2">
 1330 │                                           {Object.entries(activity.customFields).map(([key, value]) => (
 1331 │                                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1331:44" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1331" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22inline-flex%20items-center%20px-2.5%20py-1%20rounded-full%20text-xs%20font-medium%20bg-gradient-to-r%20from-blue-50%20to-indigo-50%20dark%3Afrom-blue-900%2F30%20dark%3Ato-indigo-900%2F30%20text-blue-700%20dark%3Atext-blue-300%20border%20border-blue-200%20dark%3Aborder-blue-700%20hover%3Afrom-blue-100%20hover%3Ato-indigo-100%20dark%3Ahover%3Afrom-blue-900%2F40%20dark%3Ahover%3Ato-indigo-900%2F40%20transition-all%20duration-200%22%7D" 
 1332 │                                               key={key} 
 1333 │                                               className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-900/40 dark:hover:to-indigo-900/40 transition-all duration-200"
 1334 │                                             >
 1335 │                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1335:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1335" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22%3A%22%2C%22className%22%3A%22font-semibold%22%7D" className="font-semibold">{key}:</span>
 1336 │                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1336:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1336" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22className%22%3A%22ml-1%20truncate%20max-w-%5B150px%5D%22%7D" className="ml-1 truncate max-w-[150px]">{value}</span>
 1337 │                                             </div>
 1338 │                                           ))}
 1339 │                                         </div>
 1340 │                                       )}
 1341 │ 
 1342 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1342:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1342" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-2%22%7D" className="mt-2">
 1343 │                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1343:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1343" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22ID%3A%22%2C%22className%22%3A%22text-xs%20px-2%20py-1%20bg-gray-100%20dark%3Abg-gray-800%20text-gray-500%20dark%3Atext-gray-400%20rounded%22%7D" className="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded">
 1344 │                                 ID: {activity.id}
 1345 │                               </span>
 1346 │                             </div>
 1347 │                           </div>
 1348 │                         </div>
 1349 │ 
 1350 │                         {isSelected && (
 1351 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1351:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1351" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-%5B32px%5D%20border-2%20border-%5B%23FF6B00%5D%20animate-pulse%20opacity-50%20pointer-events-none%22%7D" className="absolute inset-0 rounded-[32px] border-2 border-[#FF6B00] animate-pulse opacity-50 pointer-events-none"></div>
 1352 │                         )}
 1353 │                       </motion.div>
 1354 │                     );
 1355 │                   })}
 1356 │ 
 1357 │                   {filterState === 'selected' && selectedActivities2.length === 0 && (
 1358 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1358:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1358" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1359 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1359:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1359" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1360 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1360:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1360" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1361 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1361:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1361" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
 1362 │                         </svg>
 1363 │                       </div>
 1364 │                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1364:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1364" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20selecionada%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1365 │                         Nenhuma atividade selecionada
 1366 │                       </h3>
 1367 │                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1367:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1367" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Selecione%20algumas%20atividades%20primeiro%20para%20v%C3%AA-las%20aqui%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1368 │                         Selecione algumas atividades primeiro para vê-las aqui
 1369 │                       </p>
 1370 │                     </div>
 1371 │                   )}
 1372 │ 
 1373 │                   {getCombinedActivities().length === 0 && (
 1374 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1374:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1374" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1375 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1375:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1375" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1376 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1376:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1376" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1377 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1377:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1377" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1378 │                         </svg>
 1379 │                       </div>
 1380 │                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1380:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1380" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20dispon%C3%ADvel%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1381 │                         Nenhuma atividade disponível
 1382 │                       </h3>
 1383 │                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1383:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1383" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Adicione%20atividades%20manuais%20ou%20aguarde%20as%20sugest%C3%B5es%20da%20IA%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1384 │                         Adicione atividades manuais ou aguarde as sugestões da IA
 1385 │                       </p>
 1386 │                     </div>
 1387 │                   )}
 1388 │                 </div>
 1389 │               )}
 1390 │ 
 1391 │               {!showAddActivityInterface && (
 1392 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1392:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1392" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1393 │                   <Button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1393:18" data-lov-name="Button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1393" data-component-file="CardDeConstrucao.tsx" data-component-name="Button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20gap-2%20text-sm%20sm%3Atext-base%22%7D"
 1394 │                     onClick={handleApproveActionPlan}
 1395 │                     disabled={selectedActivities2.length === 0 || isLoading}
 1396 │                     className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base"
 1397 │                   >
 1398 │                     <Target data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1398:20" data-lov-name="Target"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1398" data-component-file="CardDeConstrucao.tsx" data-component-name="Target" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20sm%3Aw-5%20sm%3Ah-5%22%7D" className="w-4 h-4 sm:w-5 sm:h-5" />
 1399 │                     {isLoading
 1400 │                       ? "Processando..."
 1401 │                       : `Aprovar Plano (${selectedActivities2.length})`}
 1402 │                   </Button>
 1403 │                 </div>
 1404 │               )}
 1405 │             </motion.div>
 1406 │           )}
 1407 │         </motion.div>
 1408 │       )}
 1409 │ 
 1410 │       {/* Debug Panel para verificar sistema de Trilhas */}
 1411 │       {actionPlan && (
 1412 │         <TrilhasDebugPanel data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1412:8" data-lov-name="TrilhasDebugPanel"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1412" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasDebugPanel" data-component-content="%7B%7D" 
 1413 │           activities={actionPlan.map(activity => ({ 
 1414 │             id: activity.id, 
 1415 │             title: activity.title 
 1416 │           }))}
 1417 │           isVisible={showTrilhasDebug}
 1418 │         />
 1419 │       )}
 1420 │ 
 1421 │       {/* Botão para toggle do debug (só visível em desenvolvimento) */}
 1422 │       {process.env.NODE_ENV === 'development' && actionPlan && (
 1423 │         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1423:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1423" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22fixed%20bottom-4%20left-4%20z-40%20bg-blue-500%20text-white%20px-3%20py-2%20rounded-lg%20text-xs%20font-medium%20shadow-lg%20hover%3Abg-blue-600%20transition-colors%22%7D"
 1424 │           onClick={() => setShowTrilhasDebug(!showTrilhasDebug)}
 1425 │           className="fixed bottom-4 left-4 z-40 bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-medium shadow-lg hover:bg-blue-600 transition-colors"
 1426 │         >
 1427 │           {showTrilhasDebug ? '🔍 Fechar Debug' : '🔍 Debug Trilhas'}
 1428 │         </button>
 1429 │       )}
 1430 │     </motion.div>
 1431 │   );
 1432 │ }
 1433 │ 
 1434 │ import {
 1435 │   AlertDialog,
 1436 │   AlertDialogAction,
 1437 │   AlertDialogCancel,
 1438 │   AlertDialogContent,
 1439 │   AlertDialogDescription,
 1440 │   AlertDialogFooter,
 1441 │   AlertDialogHeader,
 1442 │   AlertDialogTitle,
 1443 │   AlertDialogTrigger,
 1444 │ } from "@/components/ui/alert-dialog"
 1445 │ import {
 1446 │   Form,
 1447 │   FormControl,
 1448 │   FormDescription,
 1449 │   FormField,
 1450 │   FormItem,
 1451 │   FormLabel,
 1452 │   FormMessage,
 1453 │ } from "@/components/ui/form"
 1454 │ import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
 1455 │ import { ScrollArea } from "@/components/ui/scroll-area"
 1456 │ import { Separator } from "@/components/ui/separator"
      ·          ────┬────
      ·              ╰── `Separator` redefined here
 1457 │ import { Slider } from "@/components/ui/slider"
 1458 │ import { Switch } from "@/components/ui/switch"
 1459 │ import { Textarea } from "@/components/ui/textarea"
      ╰────

  × the name `Textarea` is defined multiple times
      ╭─[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:21:1]
   21 │   Eye,
   22 │   Play
   23 │ } from 'lucide-react';
   24 │ import { Textarea } from '@/components/ui/textarea';
      ·          ────┬───
      ·              ╰── previous definition of `Textarea` here
   25 │ import { Label } from '@/components/ui/label';
   26 │ import { Input } from '@/components/ui/input';
   27 │ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 │ import { Separator } from '@/components/ui/separator';
   29 │ import { Progress } from '@/components/ui/progress';
   30 │ import { ConstructionGrid } from './ConstructionGrid';
   31 │ 
   32 │ import { 
   33 │   Wrench, CheckSquare, Filter, 
   34 │   Trophy, Zap, Brain, Heart, 
   35 │   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 │   Microscope, Palette, Music, Camera, Video, Headphones,
   37 │   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 │   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 │   Pause, SkipForward, Volume2, Wifi, Battery,
   40 │   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 │   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 │ } from "lucide-react";
   43 │ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 │ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 │ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 │ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 │ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 │ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 │ import { ConstructionInterface } from './index';
   50 │ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 │ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 │ 
   53 │ // Convert to proper format with name field
   54 │ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 │   ...activity,
   56 │   name: activity.name || activity.title || activity.description
   57 │ }));
   58 │ 
   59 │ export interface ContextualizationData {
   60 │   materias: string;
   61 │   publicoAlvo: string;
   62 │   restricoes: string;
   63 │   datasImportantes?: string;
   64 │   observacoes?: string;
   65 │ }
   66 │ 
   67 │ export interface ActionPlanItem {
   68 │   id: string;
   69 │   title: string;
   70 │   description: string;
   71 │   duration?: string;
   72 │   difficulty?: string;
   73 │   category?: string;
   74 │   type?: string;
   75 │   approved: boolean;
   76 │   isTrilhasEligible?: boolean;
   77 │   customFields?: Record<string, string>;
   78 │   isManual?: boolean;
   79 │ }
   80 │ 
   81 │ interface CardDeConstrucaoProps {
   82 │   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 │   contextualizationData?: ContextualizationData | null;
   84 │   actionPlan?: ActionPlanItem[] | null;
   85 │   onSubmitContextualization: (data: ContextualizationData) => void;
   86 │   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 │   onResetFlow: () => void;
   88 │   isLoading?: boolean;
   89 │ }
   90 │ 
   91 │ export function CardDeConstrucao({ 
   92 │   step, 
   93 │   contextualizationData, 
   94 │   actionPlan, 
   95 │   onSubmitContextualization, 
   96 │   onApproveActionPlan, 
   97 │   onResetFlow,
   98 │   isLoading 
   99 │ }: CardDeConstrucaoProps) {
  100 │   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 │     materias: '',
  102 │     publicoAlvo: '',
  103 │     restricoes: '',
  104 │     datasImportantes: '',
  105 │     observacoes: ''
  106 │   });
  107 │ 
  108 │   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 │   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 │   // Form data for contextualization
  111 │   const [formData, setFormData] = useState<ContextualizationData>({
  112 │     materias: "",
  113 │     publicoAlvo: "",
  114 │     restricoes: "",
  115 │     datasImportantes: "",
  116 │     observacoes: "",
  117 │   });
  118 │ 
  119 │   // Selected activities for action plan
  120 │   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 │ 
  122 │   // Filter state for action plan
  123 │   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 │ 
  125 │   // View mode state (list or grid)
  126 │   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 │ 
  128 │   // Debug state for trilhas system
  129 │   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 │ 
  131 │   // Estado para mostrar a interface de adicionar atividade manual
  132 │   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 │ 
  134 │   // Manual activity addition state
  135 │   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 │ 
  137 │   // Manual activity form state
  138 │   const [manualActivityForm, setManualActivityForm] = useState({
  139 │     title: '',
  140 │     typeId: '',
  141 │     description: ''
  142 │   });
  143 │ 
  144 │   // State for activity building process
  145 │   const [isBuilding, setIsBuilding] = useState(false);
  146 │ 
  147 │   // State for tracking building progress
  148 │   const [progress, setProgress] = useState<{
  149 │     total: number;
  150 │     completed: number;
  151 │     current: string;
  152 │     errors: string[];
  153 │   } | null>(null);
  154 │ 
  155 │   // Function to simulate activity building
  156 │   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 │     setIsBuilding(true);
  158 │     setProgress({
  159 │       total: activities.length,
  160 │       completed: 0,
  161 │       current: '',
  162 │       errors: []
  163 │     });
  164 │ 
  165 │     let allSuccess = true;
  166 │ 
  167 │     for (let i = 0; i < activities.length; i++) {
  168 │       const activity = activities[i];
  169 │       setProgress(prev => ({
  170 │         ...prev,
  171 │         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 │       }));
  173 │ 
  174 │       try {
  175 │         // Simulate building
  176 │         await new Promise(resolve => setTimeout(resolve, 1000));
  177 │ 
  178 │         // Simulate occasional errors
  179 │         if (Math.random() < 0.2) {
  180 │           throw new Error(`Falha ao construir ${activity.title}`);
  181 │         }
  182 │ 
  183 │         setProgress(prev => ({
  184 │           ...prev,
  185 │           completed: prev.completed + 1
  186 │         }));
  187 │       } catch (error: any) {
  188 │         console.error(error);
  189 │         allSuccess = false;
  190 │         setProgress(prev => ({
  191 │           ...prev,
  192 │           errors: [...prev.errors, error.message]
  193 │         }));
  194 │       }
  195 │     }
  196 │ 
  197 │     setIsBuilding(false);
  198 │     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 │     return allSuccess;
  200 │   };
  201 │ 
  202 │   // Load existing data when component mounts
  203 │   useEffect(() => {
  204 │     if (contextualizationData) {
  205 │       setFormData(contextualizationData);
  206 │     }
  207 │   }, [contextualizationData]);
  208 │ 
  209 │   // Handle form input changes
  210 │   const handleInputChange = (
  211 │     field: keyof ContextualizationData,
  212 │     value: string,
  213 │   ) => {
  214 │     setFormData((prev) => ({
  215 │       ...prev,
  216 │       [field]: value,
  217 │     }));
  218 │   };
  219 │ 
  220 │   // Handle contextualization form submission
  221 │   const handleSubmitContextualization = () => {
  222 │     if (onSubmitContextualization) {
  223 │       onSubmitContextualization(formData);
  224 │     }
  225 │   };
  226 │ 
  227 │   // Handle activity selection toggle
  228 │   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 │     setSelectedActivities2((prev) => {
  230 │       const isSelected = prev.some((item) => item.id === activity.id);
  231 │       if (isSelected) {
  232 │         return prev.filter((item) => item.id !== activity.id);
  233 │       } else {
  234 │         return [...prev, { ...activity, approved: true }];
  235 │       }
  236 │     });
  237 │   };
  238 │ 
  239 │   useEffect(() => {
  240 │     if (actionPlan) {
  241 │       console.log('🎯 ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 │       const approved = actionPlan.filter(item => item.approved);
  243 │       setSelectedActivities2(approved);
  244 │     }
  245 │   }, [actionPlan, step]);
  246 │ 
  247 │   const handleApproveActionPlan = async () => {
  248 │     console.log('✅ Plano de ação aprovado! Iniciando construção automática com ModalBinderEngine...');
  249 │ 
  250 │     // Aprovar plano primeiro
  251 │     onApproveActionPlan(selectedActivities2);
  252 │ 
  253 │     // Construir atividades automaticamente usando o novo sistema
  254 │     if (selectedActivities2.length > 0) {
  255 │       try {
  256 │         console.log('🔧 Iniciando construção automática com ModalBinderEngine...');
  257 │         console.log('📋 Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 │ 
  259 │         // Usar o contexto de contextualização para enriquecer a geração
  260 │         const contextData = {
  261 │           materias: formData.materias,
  262 │           publicoAlvo: formData.publicoAlvo,
  263 │           restricoes: formData.restricoes,
  264 │           datasImportantes: formData.datasImportantes,
  265 │           observacoes: formData.observacoes
  266 │         };
  267 │ 
  268 │         console.log('🎯 Dados de contexto para geração:', contextData);
  269 │ 
  270 │         const success = await buildActivities(selectedActivities2, contextData);
  271 │ 
  272 │         if (success) {
  273 │           console.log('🎉 Todas as atividades foram construídas automaticamente com ModalBinderEngine!');
  274 │ 
  275 │           // Exibir notificação de sucesso
  276 │           console.log('✅ Sistema de construção automática funcionando corretamente!');
  277 │         } else {
  278 │           console.warn('⚠️ Algumas atividades podem ter falhado na construção automática');
  279 │         }
  280 │       } catch (error) {
  281 │         console.error('❌ Erro durante construção automática:', error);
  282 │         console.error('📊 Detalhes do erro:', {
  283 │           message: error.message,
  284 │           stack: error.stack,
  285 │           selectedActivities: selectedActivities2.length,
  286 │           contextData: !!contextData
  287 │         });
  288 │       }
  289 │     } else {
  290 │       console.log('ℹ️ Nenhuma atividade selecionada para construção automática');
  291 │     }
  292 │   };
  293 │ 
  294 │   // Handle manual activity form submission
  295 │   const handleAddManualActivity = () => {
  296 │     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 │       return;
  298 │     }
  299 │ 
  300 │     // Find the activity type from schoolPowerActivities
  301 │     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 │ 
  303 │     const newManualActivity: ActionPlanItem = {
  304 │       id: manualActivityForm.typeId,
  305 │       title: manualActivityForm.title,
  306 │       description: manualActivityForm.description,
  307 │       duration: "Personalizado",
  308 │       difficulty: "Personalizado", 
  309 │       category: activityType?.tags[0] || "manual",
  310 │       type: activityType?.name || "Atividade Manual",
  311 │       isManual: true,
  312 │       approved: false,
  313 │       customFields: {} // Atividades manuais também podem ter customFields
  314 │     };
  315 │ 
  316 │     // Add to manual activities list
  317 │     setManualActivities(prev => [...prev, newManualActivity]);
  318 │ 
  319 │     // Clear form
  320 │     setManualActivityForm({
  321 │       title: '',
  322 │       typeId: '',
  323 │       description: ''
  324 │     });
  325 │ 
  326 │     // Return to action plan interface
  327 │     setShowAddActivityInterface(false);
  328 │   };
  329 │ 
  330 │   // Handle manual activity form changes
  331 │   const handleManualFormChange = (field: string, value: string) => {
  332 │     setManualActivityForm(prev => ({
  333 │       ...prev,
  334 │       [field]: value
  335 │     }));
  336 │   };
  337 │ 
  338 │   // Get combined activities (AI suggestions + manual)
  339 │   const getCombinedActivities = () => {
  340 │     const aiActivities = actionPlan || [];
  341 │     const allActivities = [...aiActivities, ...manualActivities];
  342 │     return allActivities;
  343 │   };
  344 │ 
  345 │   // Check if contextualization form is valid
  346 │   const isContextualizationValid =
  347 │     formData.materias.trim() && formData.publicoAlvo.trim();
  348 │ 
  349 │   // Grid Toggle Component
  350 │   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 │     viewMode: 'list' | 'grid';
  352 │     onToggle: () => void;
  353 │   }) => {
  354 │     return (
  355 │       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 │         onClick={onToggle}
  357 │         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 │         title={viewMode === 'list' ? 'Visualização em Grade' : 'Visualização em Lista'}
  359 │       >
  360 │         {viewMode === 'list' ? (
  361 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 │           </svg>
  364 │         ) : (
  365 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 │           </svg>
  368 │         )}
  369 │       </button>
  370 │     );
  371 │   };
  372 │ 
  373 │   // Filter Component
  374 │   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 │     activities: ActionPlanItem[];
  376 │     selectedActivities2: ActionPlanItem[];
  377 │     onFilterApply: (filterType: string) => void;
  378 │   }) => {
  379 │     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 │     const filterRef = useRef<HTMLDivElement>(null);
  381 │ 
  382 │     useEffect(() => {
  383 │       const handleClickOutside = (event: MouseEvent) => {
  384 │         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 │           setIsFilterOpen(false);
  386 │         }
  387 │       };
  388 │ 
  389 │       document.addEventListener('mousedown', handleClickOutside);
  390 │       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 │     }, []);
  392 │ 
  393 │     return (
  394 │       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 │         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 │           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 │           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 │           title="Filtros e Ações"
  399 │         >
  400 │           <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:400:10" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="400" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" />
  401 │         </button>
  402 │ 
  403 │         {isFilterOpen && (
  404 │           <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:404:10" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="404" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22absolute%20top-full%20right-0%20mt-3%20w-56%20bg-white%20dark%3Abg-gray-800%20rounded-2xl%20shadow-2xl%20border%20border-gray-200%20dark%3Aborder-gray-600%20overflow-hidden%20z-50%20backdrop-blur-sm%22%7D"
  405 │             initial={{ opacity: 0, y: -10, scale: 0.95 }}
  406 │             animate={{ opacity: 1, y: 0, scale: 1 }}
  407 │             exit={{ opacity: 0, y: -10, scale: 0.95 }}
  408 │             transition={{ duration: 0.2, ease: [0.25, 0.1, 0.25, 1] }}
  409 │             className="absolute top-full right-0 mt-3 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 overflow-hidden z-50 backdrop-blur-sm"
  410 │             style={{
  411 │               background: `
  412 │                 linear-gradient(135deg, 
  413 │                   rgba(255, 255, 255, 0.95) 0%, 
  414 │                   rgba(248, 250, 252, 0.98) 100%
  415 │                 )
  416 │               `,
  417 │               ...(typeof window !== "undefined" &&
  418 │               window.matchMedia("(prefers-color-scheme: dark)").matches
  419 │                 ? {
  420 │                     background: `
  421 │                   linear-gradient(135deg, 
  422 │                     rgba(31, 41, 55, 0.95) 0%, 
  423 │                     rgba(17, 24, 39, 0.98) 100%
  424 │                   )
  425 │                 `,
  426 │                   }
  427 │                 : {}),
  428 │             }}
  429 │           >
  430 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:430:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="430" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22p-2%22%7D" className="p-2">
  431 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:431:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="431" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22px-3%20py-2%20border-b%20border-gray-200%20dark%3Aborder-gray-600%22%7D" className="px-3 py-2 border-b border-gray-200 dark:border-gray-600">
  432 │                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:432:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="432" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Filtros%20e%20A%C3%A7%C3%B5es%22%2C%22className%22%3A%22text-sm%20font-semibold%20text-gray-900%20dark%3Atext-white%20flex%20items-center%20gap-2%22%7D" className="text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2">
  433 │                   <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:433:18" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="433" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%22%7D" className="w-4 h-4 text-[#FF6B00]" />
  434 │                   Filtros e Ações
  435 │                 </h3>
  436 │               </div>
  437 │ 
  438 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:438:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="438" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22py-1%20space-y-1%22%7D" className="py-1 space-y-1">
  439 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:439:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="439" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  440 │                   onClick={() => {
  441 │                     onFilterApply('selectAll');
  442 │                     setIsFilterOpen(false);
  443 │                   }}
  444 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  445 │                 >
  446 │                   <CheckSquare data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:446:18" data-lov-name="CheckSquare"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="446" data-component-file="CardDeConstrucao.tsx" data-component-name="CheckSquare" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" />
  447 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:447:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="447" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20todos%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar todos</span>
  448 │                 </button>
  449 │ 
  450 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:450:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="450" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  451 │                   onClick={() => {
  452 │                     onFilterApply('selectRecommended');
  453 │                     setIsFilterOpen(false);
  454 │                   }}
  455 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  456 │                 >
  457 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:457:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="457" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  458 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:458:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="458" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clipRule="evenodd" />
  459 │                   </svg>
  460 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:460:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="460" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20recomenda%C3%A7%C3%B5es%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar recomendações</span>
  461 │                 </button>
  462 │ 
  463 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:463:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="463" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22border-t%20border-gray-200%20dark%3Aborder-gray-600%20my-1%22%7D" className="border-t border-gray-200 dark:border-gray-600 my-1"></div>
  464 │ 
  465 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:465:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="465" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-blue-500%2F10%20hover%3Ato-blue-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  466 │                   onClick={() => {
  467 │                     onFilterApply('viewSelected');
  468 │                     setIsFilterOpen(false);
  469 │                   }}
  470 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-blue-500/10 hover:to-blue-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  471 │                 >
  472 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:472:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="472" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-blue-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-blue-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  473 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:473:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="473" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
  474 │                   </svg>
  475 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:475:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="475" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20apenas%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver apenas selecionados</span>
  476 │                 </button>
  477 │ 
  478 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:478:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="478" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-red-500%2F10%20hover%3Ato-red-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  479 │                   onClick={() => {
  480 │                     onFilterApply('clearSelected');
  481 │                     setIsFilterOpen(false);
  482 │                   }}
  483 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-red-500/10 hover:to-red-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  484 │                 >
  485 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:485:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="485" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-red-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-red-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  486 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:486:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="486" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
  487 │                   </svg>
  488 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:488:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="488" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Tirar%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Tirar selecionados</span>
  489 │                 </button>
  490 │ 
  491 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:491:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="491" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-gray-500%2F10%20hover%3Ato-gray-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  492 │                   onClick={() => {
  493 │                     onFilterApply('viewAll');
  494 │                     setIsFilterOpen(false);
  495 │                   }}
  496 │                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-gray-500/10 hover:to-gray-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  497 │                 >
  498 │                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:498:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="498" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-gray-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  499 │                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:499:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="499" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd" />
  500 │                   </svg>
  501 │                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:501:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="501" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20todas%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver todas</span>
  502 │                 </button>
  503 │               </div>
  504 │             </div>
  505 │           </motion.div>
  506 │         )}
  507 │       </div>
  508 │     );
  509 │   };
  510 │ 
  511 │   // Handle filter actions
  512 │   const handleFilterApply = (filterType: string) => {
  513 │     const combinedActivities = getCombinedActivities();
  514 │     if (combinedActivities.length === 0) return;
  515 │ 
  516 │     switch (filterType) {
  517 │       case 'selectAll':
  518 │         setSelectedActivities2([...combinedActivities]);
  519 │         setFilterState('all');
  520 │         break;
  521 │       case 'selectRecommended':
  522 │         // Seleciona as 3 primeiras atividades como "recomendadas"
  523 │         const recommended = combinedActivities.slice(0, Math.min(3, combinedActivities.length));
  524 │         setSelectedActivities2(recommended);
  525 │         setFilterState('all');
  526 │         break;
  527 │       case 'viewSelected':
  528 │         setFilterState('selected');
  529 │         break;
  530 │       case 'clearSelected':
  531 │         setSelectedActivities2([]);
  532 │         setFilterState('all');
  533 │         break;
  534 │       case 'viewAll':
  535 │         setFilterState('all');
  536 │         break;
  537 │       default:
  538 │         break;
  539 │     }
  540 │   };
  541 │ 
  542 │   const getIconByActivityId = (activityId: string) => {
  543 │     // Sistema de mapeamento 100% único - cada ID tem seu próprio ícone específico
  544 │     const uniqueIconMapping: { [key: string]: any } = {
  545 │       "atividade-adaptada": Heart,
  546 │       "atividades-contos-infantis": BookOpen,
  547 │       "atividades-ia": Brain,
  548 │       "atividades-matematica": Target,
  549 │       "atividades-ortografia-alfabeto": PenTool,
  550 │       "aulas-eletivas": Star,
  551 │       "bncc-descomplicada": BookOpen,
  552 │       "caca-palavras": Puzzle,
  553 │       "capitulo-livro": BookOpen,
  554 │       "charadas": Puzzle,
  555 │       "chatbot-bncc": MessageSquare,
  556 │       "consulta-video": Video,
  557 │       "corretor-gramatical": CheckSquare,
  558 │       "corretor-provas-feedback": CheckSquare,
  559 │       "corretor-provas-papel": FileText,
  560 │       "corretor-questoes": PenTool,
  561 │       "corretor-redacao": PenTool,
  562 │       "criterios-avaliacao": CheckSquare,
  563 │       "desenho-simetrico": Puzzle,
  564 │       "desenvolvimento-caligrafia": PenTool,
  565 │       "dinamicas-sala-aula": Users,
  566 │       "emails-escolares": Mail,
  567 │       "erros-comuns": Search,
  568 │       "exemplos-contextualizados": BookOpen,
  569 │       "experimento-cientifico": Microscope,
  570 │       "fichamento-obra-literaria": BookOpen,
  571 │       "gerador-tracejados": PenTool,
  572 │       "historias-sociais": Heart,
  573 │       "ideias-atividades": Lightbulb,
  574 │       "ideias-aulas-acessiveis": Heart,
  575 │       "ideias-avaliacoes-adaptadas": Heart,
  576 │       "ideias-brincadeiras-infantis": Play,
  577 │       "ideias-confraternizacoes": Users,
  578 │       "ideias-datas-comemorativas": Calendar,
  579 │       "imagem-para-colorir": Palette,
  580 │       "instrucoes-claras": FileText,
  581 │       "jogos-educacionais-interativos": Gamepad2,
  582 │       "jogos-educativos": Puzzle,
  583 │       "lista-exercicios": FileText,
  584 │       "lista-vocabulario": BookOpen,
  585 │       "maquete": Wrench,
  586 │       "mapa-mental": Brain,
  587 │       "mensagens-agradecimento": Heart,
  588 │       "musica-engajar": Music,
  589 │       "niveador-textos": BookOpen,
  590 │       "objetivos-aprendizagem": Target,
  591 │       "palavras-cruzadas": Puzzle,
  592 │       "pei-pdi": Heart,
  593 │       "perguntas-taxonomia-bloom": MessageSquare,
  594 │       "pergunte-texto": MessageSquare,
  595 │       "plano-aula": BookOpen,
  596 │       "plano-ensino": BookOpen,
  597 │       "plano-recuperacao": Heart,
  598 │       "projeto": Wrench,
  599 │       "projeto-vida": Star,
  600 │       "proposta-redacao": PenTool,
  601 │       "prova": CheckSquare,
  602 │       "questoes-pdf": FileText,
  603 │       "questoes-site": Globe,
  604 │       "questoes-texto": FileText,
  605 │       "questoes-video": Video,
  606 │       "redacao": PenTool,
  607 │       "reescritor-texto": PenTool,
  608 │       "reflexao-incidente": MessageSquare,
  609 │       "relatorio": FileText,
  610 │       "relatorio-desempenho": Trophy,
  611 │       "resposta-email": Mail,
  612 │       "revisor-gramatical": CheckSquare,
  613 │       "revisao-guiada": BookOpen,
  614 │       "resumo": FileText,
  615 │       "resumo-texto": FileText,
  616 │       "resumo-video": Video,
  617 │       "sequencia-didatica": BookOpen,
  618 │       "simulado": CheckSquare,
  619 │       "sugestoes-intervencao": Lightbulb,
  620 │       "tabela-apoio": Puzzle,
  621 │       "tarefa-adaptada": Heart,
  622 │       "texto-apoio": BookOpen,
  623 │       "gerar-questoes": PenTool,
  624 │       "apresentacao-slides": Target,
  625 │       "tornar-relevante": Star
  626 │     };
  627 │ 
  628 │     // Verifica se existe mapeamento direto para o ID
  629 │     if (uniqueIconMapping[activityId]) {
  630 │       return uniqueIconMapping[activityId];
  631 │     }
  632 │ 
  633 │     // Sistema de fallback com hash consistente para IDs não mapeados
  634 │     const fallbackIcons = [
  635 │       BookOpen, FileText, PenTool, Search, Brain,
  636 │       Users, MessageSquare, Presentation, ThumbsUp, Heart,
  637 │       Wrench, Target, Compass, Trophy, Edit3,
  638 │       Calendar, Clock, CheckSquare, Star, Award,
  639 │       Microscope, Calculator, Eye, Globe, MapPin,
  640 │       Music, Palette, Camera, Video, Headphones,
  641 │       Lightbulb, Zap, Flag, Key, Shield,
  642 │       TreePine, Sun, Cloud, Home, Car
  643 │     ];
  644 │ 
  645 │     // Gera hash consistente baseado no ID
  646 │     let hash = 0;
  647 │     for (let i = 0; i < activityId.length; i++) {
  648 │       const char = activityId.charCodeAt(i);
  649 │       hash = ((hash << 5) - hash) + char;
  650 │       hash = hash & hash;
  651 │     }
  652 │ 
  653 │     const iconIndex = Math.abs(hash) % fallbackIcons.length;
  654 │     return fallbackIcons[iconIndex];
  655 │   };
  656 │ 
  657 │   const [selectedTrilhasCount, setSelectedTrilhasCount] = useState(0);
  658 │ 
  659 │   useEffect(() => {
  660 │     const trilhasActivityIds = [
  661 │       'projeto-pesquisa',
  662 │       'projeto-cientifico',
  663 │       'projeto-criativo',
  664 │       'projeto-colaborativo',
  665 │       'projeto-individual',
  666 │       'projeto-inovacao',
  667 │       'projeto-sustentabilidade',
  668 │       'projeto-social',
  669 │       'projeto-tecnologico',
  670 │       'projeto-artistico',
  671 │       'projeto-empreendedor',
  672 │       'projeto-interdisciplinar',
  673 │       'projeto-experimental',
  674 │       'projeto-aplicado',
  675 │       'projeto-extensao',
  676 │       'projeto-integrador',
  677 │       'projeto-final',
  678 │     ];
  679 │ 
  680 │     const selectedTrilhas = selectedActivities2.filter(activity =>
  681 │       trilhasActivityIds.includes(activity.id)
  682 │     );
  683 │ 
  684 │     setSelectedTrilhasCount(selectedTrilhas.length);
  685 │   }, [selectedActivities2]);
  686 │ 
  687 │   // Adicionar preenchimento automático dos campos do modal com dados da IA
  688 │   const [selectedActivity, setSelectedActivity] = useState<ActionPlanItem | null>(null);
  689 │   const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  690 │ 
  691 │   const handleEditActivity = (activity: any) => {
  692 │     console.log('🔧 Editando atividade:', activity.id);
  693 │ 
  694 │         // Buscar dados da atividade no action plan se disponível
  695 │     const actionPlanActivity = actionPlan?.find(item => item.id === activity.id);
  696 │ 
  697 │     if (actionPlanActivity?.customFields && Object.keys(actionPlanActivity.customFields).length > 0) {
  698 │       console.log('📋 Preenchendo automaticamente com dados da IA:', actionPlanActivity.customFields);
  699 │ 
  700 │       // Preparar dados automáticos para preenchimento do modal
  701 │       const autoDataKey = `auto_activity_data_${activity.id}`;
  702 │       const autoFormData = {
  703 │         title: actionPlanActivity.title || activity.title,
  704 │         description: actionPlanActivity.description || activity.description,
  705 │         subject: actionPlanActivity.customFields['Disciplina'] || 'Português',
  706 │         theme: actionPlanActivity.customFields['Tema'] || '',
  707 │         schoolYear: actionPlanActivity.customFields['Ano de Escolaridade'] || '',
  708 │         numberOfQuestions: actionPlanActivity.customFields['Quantidade de Questões'] || '10',
  709 │         difficultyLevel: actionPlanActivity.customFields['Nível de Dificuldade'] || 'Médio',
  710 │         questionModel: actionPlanActivity.customFields['Modelo de Questões'] || '',
  711 │         sources: actionPlanActivity.customFields['Fontes'] || '',
  712 │         objectives: actionPlanActivity.customFields['Objetivos'] || '',
  713 │         materials: actionPlanActivity.customFields['Materiais'] || '',
  714 │         instructions: actionPlanActivity.customFields['Instruções'] || '',
  715 │         evaluation: actionPlanActivity.customFields['Critérios de Correção'] || actionPlanActivity.customFields['Critérios de Avaliação'] || ''
  716 │       };
  717 │ 
  718 │       // Salvar dados automáticos no localStorage para o modal usar
  719 │       const autoData = {
  720 │         formData: autoFormData,
  721 │         customFields: actionPlanActivity.customFields,
  722 │         timestamp: Date.now()
  723 │       };
  724 │ 
  725 │       localStorage.setItem(autoDataKey, JSON.stringify(autoData));
  726 │       console.log('💾 Dados automáticos salvos para:', activity.id, autoFormData);
  727 │     }
  728 │ 
  729 │     setSelectedActivity(activity);
  730 │     setIsEditModalOpen(true);
  731 │   };
  732 │ 
  733 │   return (
  734 │     <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:734:4" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="734" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20rounded-2xl%20p-6%20shadow-2xl%20border%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F30%20bg-white%20dark%3Abg-%5B%23021321%5D%22%7D"
  735 │       initial={{ opacity: 0, scale: 0.8, y: 50 }}
  736 │       animate={{ opacity: 1, scale: 1, y: 0 }}
  737 │       exit={{ opacity: 0, scale: 0.8, y: -50 }}
  738 │       transition={{
  739 │         duration: 0.6,
  740 │         ease: [0.25, 0.1, 0.25, 1],
  741 │         type: "spring",
  742 │         stiffness: 100,
  743 │         damping: 15,
  744 │       }}
  745 │       className="relative rounded-2xl p-6 shadow-2xl border border-[#FF6B00]/30 dark:border-[#FF6B00]/30 bg-white dark:bg-[#021321]"
  746 │       style={{
  747 │         width: "1353px",
  748 │         height: "773px"
  749 │       }}
  750 │       data-theme="adaptive"
  751 │     >
  752 │       {/* Cabeçalho Persistente Fixo */}
  753 │       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:753:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="753" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-0%20left-0%20right-0%20h-20%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%20to-%5B%23FF9248%5D%20rounded-t-2xl%20flex%20items-center%20justify-between%20px-6%20z-0%22%7D" className="absolute top-0 left-0 right-0 h-20 bg-gradient-to-r from-[#FF6B00] to-[#FF9248] rounded-t-2xl flex items-center justify-between px-6 z-0">
  754 │         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:754:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="754" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  755 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:755:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="755" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F20%20rounded-lg%20flex%20items-center%20justify-center%22%7D" className="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
  756 │             {step === "contextualization" ? (
  757 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:757:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="757" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  758 │                 className="w-7 h-7 text-white"
  759 │                 fill="none"
  760 │                 viewBox="0 0 24 24"
  761 │                 stroke="currentColor"
  762 │               >
  763 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:763:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="763" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  764 │                   strokeLinecap="round"
  765 │                   strokeLinejoin="round"
  766 │                   strokeWidth={2}
  767 │                   d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
  768 │                 />
  769 │               </svg>
  770 │             ) : step === "actionPlan" ? (
  771 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:771:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="771" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  772 │                 className="w-7 h-7 text-white"
  773 │                 fill="none"
  774 │                 viewBox="0 0 24 24"
  775 │                 stroke="currentColor"
  776 │               >
  777 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:777:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="777" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  778 │                   strokeLinecap="round"
  779 │                   strokeLinejoin="round"
  780 │                   strokeWidth={2}
  781 │                   d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
  782 │                 />
  783 │               </svg>
  784 │             ) : (
  785 │               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:785:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="785" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%20animate-spin%22%7D"
  786 │                 className="w-7 h-7 text-white animate-spin"
  787 │                 fill="none"
  788 │                 viewBox="0 0 24 24"
  789 │                 stroke="currentColor"
  790 │               >
  791 │                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:791:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="791" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  792 │                   strokeLinecap="round"
  793 │                   strokeLinejoin="round"
  794 │                   strokeWidth={2}
  795 │                   d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
  796 │                 />
  797 │               </svg>
  798 │             )}
  799 │           </div>
  800 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:800:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="800" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  801 │             <h1 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:801:12" data-lov-name="h1"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="801" data-component-file="CardDeConstrucao.tsx" data-component-name="h1" data-component-content="%7B%22className%22%3A%22text-white%20font-bold%20text-2xl%22%7D" className="text-white font-bold text-2xl">
  802 │               {step === "contextualization"
  803 │                 ? "Quiz de Contextualização"
  804 │                 : step === "actionPlan"
  805 │                   ? "Plano de Ação"
  806 │                   : step === "generating"
  807 │                     ? "Gerando Conteúdo..."
  808 │                     : step === "activities"
  809 │                       ? "Construção de Atividades"
  810 │                       : "School Power"}
  811 │             </h1>
  812 │           </div>
  813 │         </div>
  814 │ 
  815 │         {/* Barra de Progresso */}
  816 │         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:816:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="816" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  817 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:817:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="817" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20flex%20items-center%20justify-between%20w-44%22%7D" className="relative flex items-center justify-between w-44">
  818 │             {/* Background progress line */}
  819 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:819:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="819" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%2F30%20rounded-full%20z-0%22%7D" className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white/30 rounded-full z-0" style={{ left: '16px', right: '16px' }}></div>
  820 │ 
  821 │             {/* Active progress line */}
  822 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:822:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="822" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%20rounded-full%20z-0%20transition-all%20duration-500%20ease-out%22%7D" 
  823 │               className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white rounded-full z-0 transition-all duration-500 ease-out"
  824 │               style={{ 
  825 │                 left: '16px',
  826 │                 width: `${
  827 │                   step === "contextualization" ? "0%" :
  828 │                   step === "actionPlan" ? "50%" :
  829 │                   (step === "generating" || step === "generatingActivities" || step === "activities") ? "100%" : "0%"
  830 │                 }`
  831 │               }}
  832 │             ></div>
  833 │ 
  834 │             {/* Step indicators */}
  835 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:835:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="835" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  836 │               step === "contextualization" ? 'bg-white border-white text-[#FF6B00]' : 'bg-[#FF6B00] border-white text-white'
  837 │             }`}>
  838 │               {step === "contextualization" ? (
  839 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:839:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="839" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%221%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">1</span>
  840 │               ) : (
  841 │                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:841:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="841" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  842 │                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:842:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="842" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  843 │                 </svg>
  844 │               )}
  845 │             </div>
  846 │ 
  847 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:847:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="847" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  848 │               step === "actionPlan" ? 'bg-white border-white text-[#FF6B00]' :
  849 │               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-[#FF6B00] border-white text-white' :
  850 │               'bg-white/20 border-white/30 text-white'
  851 │             }`}>
  852 │               {step === "actionPlan" ? (
  853 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:853:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="853" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  854 │               ) : (step === "generating" || step === "generatingActivities" || step === "activities") ? (
  855 │                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:855:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="855" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  856 │                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:856:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="856" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  857 │                 </svg>
  858 │               ) : (
  859 │                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:859:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="859" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  860 │               )}
  861 │             </div>
  862 │ 
  863 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:863:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="863" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  864 │               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-white border-white text-[#FF6B00]' : 'bg-white/20 border-white/30 text-white'
  865 │             }`}>
  866 │               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:866:14" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="866" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%223%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">3</span>
  867 │             </div>
  868 │           </div>
  869 │         </div>
  870 │       </div>
  871 │ 
  872 │       {/* Renderização condicional baseada no step */}
  873 │       {step === "generating" || step === "generatingActivities" ? (
  874 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:874:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="874" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20flex%20flex-col%20items-center%20justify-center%20h-full%20text-center%20px-4%20pt-16%22%7D"
  875 │           className="relative z-10 flex flex-col items-center justify-center h-full text-center px-4 pt-16"
  876 │           initial={{ opacity: 0 }}
  877 │           animate={{ opacity: 1 }}
  878 │           transition={{ duration: 0.3 }}
  879 │         >
  880 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:880:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="880" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20mb-4%22%7D" className="relative mb-4">
  881 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:881:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="881" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22animate-spin%20rounded-full%20h-16%20w-16%20border-4%20border-%5B%23FF6B00%5D%2F20%20border-t-%5B%23FF6B00%5D%20mx-auto%22%7D" className="animate-spin rounded-full h-16 w-16 border-4 border-[#FF6B00]/20 border-t-[#FF6B00] mx-auto"></div>
  882 │             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:882:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="882" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-full%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-transparent%20animate-pulse%22%7D" className="absolute inset-0 rounded-full bg-gradient-to-r from-[#FF6B00]/10 to-transparent animate-pulse"></div>
  883 │           </div>
  884 │           <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:884:10" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="884" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-xl%20sm%3Atext-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-3%22%7D" className="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-3">
  885 │             {step === "generating"
  886 │               ? "🤖 Analisando com IA Gemini"
  887 │               : "🎯 Gerando Atividades"}
  888 │           </h3>
  889 │           <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:889:10" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="889" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-700%20dark%3Atext-gray-300%20mb-4%20max-w-lg%20text-sm%20sm%3Atext-base%22%7D" className="text-gray-700 dark:text-gray-300 mb-4 max-w-lg text-sm sm:text-base">
  890 │             {step === "generating"
  891 │               ? "A IA está processando sua mensagem e contexto para criar um plano de ação personalizado..."
  892 │               : "As atividades aprovadas estão sendo geradas automaticamente pelo School Power..."}
  893 │           </p>
  894 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:894:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="894" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-orange-100%2F20%20dark%3Ato-%5B%2329335C%5D%2F10%20rounded-lg%20p-3%20sm%3Ap-4%20mb-4%20border%20border-%5B%23FF6B00%5D%2F20%20max-w-md%20w-full%22%7D" className="bg-gradient-to-r from-[#FF6B00]/10 to-orange-100/20 dark:to-[#29335C]/10 rounded-lg p-3 sm:p-4 mb-4 border border-[#FF6B00]/20 max-w-md w-full">
  895 │             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:895:12" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="895" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-xs%20sm%3Atext-sm%20text-gray-700%20dark%3Atext-gray-300%20leading-relaxed%22%7D" className="text-xs sm:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
  896 │               {step === "generating" ? (
  897 │                 <>
  898 │                   ✨ Consultando 137 atividades disponíveis
  899 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:899:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="899" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  900 │                   🎯 Personalizando para seu contexto específico
  901 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:901:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="901" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  902 │                   📝 Gerando sugestões inteligentes
  903 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:903:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="903" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  904 │                   🔍 Validando compatibilidade das atividades
  905 │                 </>
  906 │               ) : (
  907 │                 <>
  908 │                   ✅ Personalizando conteúdo das atividades
  909 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:909:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="909" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  910 │                   🎨 Criando materiais visuais
  911 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:911:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="911" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  912 │                   📝 Formatando atividades finais
  913 │                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:913:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="913" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  914 │                   🚀 Preparando download
  915 │                 </>
  916 │               )}
  917 │             </p>
  918 │           </div>
  919 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:919:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="919" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20justify-center%22%7D" className="flex gap-3 justify-center">
  920 │             {onResetFlow && (
  921 │               <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:921:14" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="921" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22px-4%20py-2%20text-sm%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-lg%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
  922 │                 onClick={onResetFlow}
  923 │                 className="px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
  924 │               >
  925 │                 Cancelar
  926 │               </button>
  927 │             )}
  928 │           </div>
  929 │         </motion.div>
  930 │       ) : step === "activities" ? (
  931 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:931:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="931" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  932 │           key="activities-content"
  933 │           initial={{ opacity: 0, x: 20 }}
  934 │           animate={{ opacity: 1, x: 0 }}
  935 │           transition={{ duration: 0.3 }}
  936 │           className="relative z-10 h-full flex flex-col pt-16"
  937 │         >
  938 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:938:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="938" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-end%20mb-4%22%7D" className="flex items-center justify-end mb-4">
  939 │             <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:939:12" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="939" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Voltar%20ao%20in%C3%ADcio%22%2C%22className%22%3A%22px-3%20py-2%20text-sm%20text-gray-600%20hover%3Atext-gray-900%20dark%3Atext-gray-400%20dark%3Ahover%3Atext-white%20transition-colors%22%7D"
  940 │               onClick={onResetFlow}
  941 │               className="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
  942 │             >
  943 │               Voltar ao início
  944 │             </button>
  945 │           </div>
  946 │ 
  947 │           {/* Interface de Construção */}
  948 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:948:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="948" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-hidden%22%7D" className="flex-1 overflow-hidden">
  949 │             {console.log('🎯 CardDeConstrucao: Passando atividades para ConstructionInterface:', selectedActivities2)}
  950 │             <ConstructionInterface data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:950:12" data-lov-name="ConstructionInterface"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="950" data-component-file="CardDeConstrucao.tsx" data-component-name="ConstructionInterface" data-component-content="%7B%7D" approvedActivities={selectedActivities2} handleEditActivity={handleEditActivity} />
  951 │           </div>
  952 │         </motion.div>
  953 │       ) : (
  954 │         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:954:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="954" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  955 │           className="relative z-10 h-full flex flex-col pt-16"
  956 │           initial={{ y: 20, opacity: 0 }}
  957 │           animate={{ y: 0, opacity: 1 }}
  958 │           transition={{ delay: 0.2, duration: 0.5 }}
  959 │         >
  960 │           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:960:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="960" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22text-center%20mb-4%20sm%3Amb-6%22%7D" className="text-center mb-4 sm:mb-6"></div>
  961 │ 
  962 │           {step === "contextualization" ? (
  963 │             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:963:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="963" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
  964 │               key="contextualization-content"
  965 │               initial={{ opacity: 0, x: -20 }}
  966 │               animate={{ opacity: 1, x: 0 }}
  967 │               transition={{ duration: 0.3 }}
  968 │               className="flex-1 flex flex-col overflow-hidden"
  969 │             >
  970 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:970:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="970" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20space-y-3%20sm%3Aspace-y-4%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
  971 │                 className="flex-1 overflow-y-auto space-y-3 sm:space-y-4 mb-3 sm:mb-4 pr-1 sm:pr-2"
  972 │                 style={{
  973 │                   maxHeight: "calc(100% - 80px)",
  974 │                   scrollbarWidth: "thin",
  975 │                   scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
  976 │                 }}
  977 │               >
  978 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:978:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="978" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  979 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:979:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="979" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9A%20Quais%20mat%C3%A9rias%20e%20temas%20ser%C3%A3o%20trabalhados%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  980 │                     📚 Quais matérias e temas serão trabalhados? *
  981 │                   </label>
  982 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:982:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="982" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20as%20mat%C3%A9rias%20e%20temas%20que%20voc%C3%AA%20quer%20estudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  983 │                     value={formData.materias}
  984 │                     onChange={(e) =>
  985 │                       handleInputChange("materias", e.target.value)
  986 │                     }
  987 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
  988 │                     rows={2}
  989 │                     placeholder="Descreva as matérias e temas que você quer estudar..."
  990 │                   />
  991 │                 </div>
  992 │ 
  993 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:993:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="993" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  994 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:994:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="994" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Qual%20o%20p%C3%BAblico-alvo%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  995 │                     🎯 Qual o público-alvo? *
  996 │                   </label>
  997 │                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:997:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="997" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Ensino%20M%C3%A9dio%2C%203%C2%BA%20ano%2C%20vestibular...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  998 │                     type="text"
  999 │                     value={formData.publicoAlvo}
 1000 │                     onChange={(e) =>
 1001 │                       handleInputChange("publicoAlvo", e.target.value)
 1002 │                     }
 1003 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1004 │                     placeholder="Ex: Ensino Médio, 3º ano, vestibular..."
 1005 │                   />
 1006 │                 </div>
 1007 │ 
 1008 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1008:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1008" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1009 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1009:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1009" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%E2%9A%A0%EF%B8%8F%20Quais%20restri%C3%A7%C3%B5es%20ou%20prefer%C3%AAncias%20espec%C3%ADficas%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1010 │                     ⚠️ Quais restrições ou preferências específicas? *
 1011 │                   </label>
 1012 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1012:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1012" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20limita%C3%A7%C3%B5es%20de%20tempo%2C%20dificuldades%20espec%C3%ADficas%2C%20etc...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1013 │                     value={formData.restricoes}
 1014 │                     onChange={(e) =>
 1015 │                       handleInputChange("restricoes", e.target.value)
 1016 │                     }
 1017 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1018 │                     rows={2}
 1019 │                     placeholder="Descreva limitações de tempo, dificuldades específicas, etc..."
 1020 │                   />
 1021 │                 </div>
 1022 │ 
 1023 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1023:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1023" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1024 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1024:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1024" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%85%20Per%C3%ADodo%20de%20entrega%20ou%20datas%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1025 │                     📅 Período de entrega ou datas importantes
 1026 │                   </label>
 1027 │                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1027:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1027" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Prova%20em%202%20semanas%2C%20ENEM%20em%20novembro...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1028 │                     type="text"
 1029 │                     value={formData.datasImportantes}
 1030 │                     onChange={(e) =>
 1031 │                       handleInputChange("datasImportantes", e.target.value)
 1032 │                     }
 1033 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1034 │                     placeholder="Ex: Prova em 2 semanas, ENEM em novembro..."
 1035 │                   />
 1036 │                 </div>
 1037 │ 
 1038 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1038:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1038" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1039 │                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1039:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1039" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20Outras%20observa%C3%A7%C3%B5es%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1040 │                     📝 Outras observações importantes
 1041 │                   </label>
 1042 │                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1042:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1042" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Informa%C3%A7%C3%B5es%20adicionais%20que%20podem%20ajudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1043 │                     value={formData.observacoes}
 1044 │                     onChange={(e) =>
 1045 │                       handleInputChange("observacoes", e.target.value)
 1046 │                     }
 1047 │                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1048 │                     rows={2}
 1049 │                     placeholder="Informações adicionais que podem ajudar..."
 1050 │                   />
 1051 │                 </div>
 1052 │               </div>
 1053 │ 
 1054 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1054:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1054" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1055 │                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1055:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1055" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20text-sm%20sm%3Atext-base%22%7D"
 1056 │                   onClick={handleSubmitContextualization}
 1057 │                   disabled={!isContextualizationValid || isLoading}
 1058 │                   className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
 1059 │                 >
 1060 │                   {isLoading ? "Processando..." : "Gerar Plano de Aula"}
 1061 │                 </button>
 1062 │               </div>
 1063 │             </motion.div>
 1064 │           ) : (
 1065 │             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1065:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1065" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
 1066 │               key="actionplan-content"
 1067 │               initial={{ opacity: 0, x: 20 }}
 1068 │               animate={{ opacity: 1, x: 0 }}
 1069 │               transition={{ duration: 0.3 }}
 1070 │               className="flex-1 flex flex-col overflow-hidden"
 1071 │             >
 1072 │               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1072:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1072" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%20sm%3Amb-4%22%7D" className="flex items-center justify-between mb-3 sm:mb-4">
 1073 │                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1073:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1073" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-base%20sm%3Atext-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%22%7D" className="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
 1074 │                   {showAddActivityInterface ? "Adicionar Atividade Manual" : "Atividades Sugeridas"}
 1075 │                 </h3>
 1076 │                 {!showAddActivityInterface && (
 1077 │                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1077:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1077" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D" className="flex items-center gap-2">
 1078 │                     <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1078:20" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1078" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-%5B%23FF6B00%5D%2F10%20to-%5B%23FF9248%5D%2F5%20hover%3Afrom-%5B%23FF6B00%5D%2F20%20hover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-%5B%23FF6B00%5D%2F30%20hover%3Aborder-%5B%23FF6B00%5D%2F50%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
 1079 │                       onClick={() => setShowAddActivityInterface(true)}
 1080 │                       className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-[#FF6B00]/10 to-[#FF9248]/5 hover:from-[#FF6B00]/20 hover:to-[#FF9248]/10 border border-[#FF6B00]/30 hover:border-[#FF6B00]/50 transition-all duration-300 shadow-sm hover:shadow-md"
 1081 │                       title="Adicionar Atividade Manual"
 1082 │                     >
 1083 │                       <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1083:22" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1083" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1084 │                         <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1084:24" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1084" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1085 │                       </svg>
 1086 │                     </button>
 1087 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1087:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1087" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22selecionada%22%2C%22className%22%3A%22bg-%5B%23FF6B00%5D%2F10%20text-%5B%23FF6B00%5D%20px-2%20sm%3Apx-3%20py-1%20rounded-full%20text-xs%20sm%3Atext-sm%20font-medium%22%7D" className="bg-[#FF6B00]/10 text-[#FF6B00] px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium">
 1088 │                       {selectedActivities2.length} selecionada
 1089 │                       {selectedActivities2.length !== 1 ? "s" : ""}
 1090 │                       {selectedTrilhasCount > 0 && (
 1091 │                         <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1091:24" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1091" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22(%20trilha%20)%22%2C%22className%22%3A%22ml-1%20text-orange-600%22%7D" className="ml-1 text-orange-600">
 1092 │                           ({selectedTrilhasCount} trilha{selectedTrilhasCount !== 1 ? "s" : ""})
 1093 │                         </span>
 1094 │                       )}
 1095 │                     </div>
 1096 │                     <GridToggleComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1096:20" data-lov-name="GridToggleComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1096" data-component-file="CardDeConstrucao.tsx" data-component-name="GridToggleComponent" data-component-content="%7B%7D" 
 1097 │                       viewMode={viewMode}
 1098 │                       onToggle={() => setViewMode(viewMode === 'list' ? 'grid' : 'list')}
 1099 │                     />
 1100 │                     <FilterComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1100:20" data-lov-name="FilterComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1100" data-component-file="CardDeConstrucao.tsx" data-component-name="FilterComponent" data-component-content="%7B%7D" 
 1101 │                       activities={getCombinedActivities()}
 1102 │                       selectedActivities2={selectedActivities2}
 1103 │                       onFilterApply={(filterType) => handleFilterApply(filterType)}
 1104 │                     />
 1105 │                   </div>
 1106 │                 )}
 1107 │               </div>
 1108 │ 
 1109 │               {showAddActivityInterface ? (
 1110 │                 <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1110:16" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1110" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
 1111 │                   className="flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2"
 1112 │                   initial={{ opacity: 0, x: 20 }}
 1113 │                   animate={{ opacity: 1, x: 0 }}
 1114 │                   transition={{ duration: 0.3 }}
 1115 │                 >
 1116 │                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1116:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1116" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22space-y-4%22%7D" className="space-y-4">
 1117 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1117:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1117" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1118 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1118:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1118" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20T%C3%ADtulo%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1119 │                         📝 Título da Atividade *
 1120 │                       </label>
 1121 │                       <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1121:22" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1121" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Lista%20de%20Exerc%C3%ADcios%20sobre%20Fun%C3%A7%C3%B5es%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1122 │                         type="text"
 1123 │                         value={manualActivityForm.title}
 1124 │                         onChange={(e) => handleManualFormChange('title', e.target.value)}
 1125 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1126 │                         placeholder="Ex: Lista de Exercícios sobre Funções"
 1127 │                         maxLength={100}
 1128 │                       />
 1129 │                     </div>
 1130 │ 
 1131 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1131:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1131" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1132 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1132:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1132" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Tipo%20de%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1133 │                         🎯 Tipo de Atividade *
 1134 │                       </label>
 1135 │                       <select data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1135:22" data-lov-name="select"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1135" data-component-file="CardDeConstrucao.tsx" data-component-name="select" data-component-content="%7B%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%22%7D"
 1136 │                         value={manualActivityForm.typeId}
 1137 │                         onChange={(e) => handleManualFormChange('typeId', e.target.value)}
 1138 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm"
 1139 │                       >
 1140 │                         <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1140:24" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1140" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%22text%22%3A%22Selecione%20o%20tipo%20de%20atividade...%22%7D" value="">Selecione o tipo de atividade...</option>
 1141 │                         {schoolPowerActivities.map((activity) => (
 1142 │                           <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1142:26" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1142" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%7D" key={activity.id} value={activity.id}>
 1143 │                             {activity.name}
 1144 │                           </option>
 1145 │                         ))}
 1146 │                       </select>
 1147 │                     </div>
 1148 │ 
 1149 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1149:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1149" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1150 │                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1150:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1150" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8B%20Descri%C3%A7%C3%A3o%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1151 │                         📋 Descrição da Atividade *
 1152 │                       </label>
 1153 │                       <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1153:22" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1153" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20detalhadamente%20o%20que%20voc%C3%AA%20quer%20que%20seja%20feito%20nesta%20atividade...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1154 │                         value={manualActivityForm.description}
 1155 │                         onChange={(e) => handleManualFormChange('description', e.target.value)}
 1156 │                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1157 │                         rows={4}
 1158 │                         placeholder="Descreva detalhadamente o que você quer que seja feito nesta atividade..."
 1159 │                         maxLength={500}
 1160 │                       />
 1161 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1161:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1161" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%2F500%20caracteres%22%2C%22className%22%3A%22text-xs%20text-gray-500%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-500 dark:text-gray-400 mt-1">
 1162 │                         {manualActivityForm.description.length}/500 caracteres
 1163 │                       </div>
 1164 │                     </div>
 1165 │ 
 1166 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1166:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1166" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D" className="flex gap-3 pt-4">
 1167 │                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1167:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1167" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-xl%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
 1168 │                         onClick={() => setShowAddActivityInterface(false)}
 1169 │                         className="flex-1 px-4 py-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
 1170 │                       >
 1171 │                         Cancelar
 1172 │                       </button>
 1173 │                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1173:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1173" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Adicionar%20Atividade%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D"
 1174 │                         onClick={handleAddManualActivity}
 1175 │                         disabled={!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()}
 1176 │                         className="flex-1 px-4 py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
 1177 │                       >
 1178 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1178:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1178" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%22%7D" className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1179 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1179:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1179" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1180 │                         </svg>
 1181 │                         Adicionar Atividade
 1182 │                       </button>
 1183 │                     </div>
 1184 │                   </div>
 1185 │                 </motion.div>
 1186 │               ) : (
 1187 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1187:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1187" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D"
 1188 │                   className={`flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2 ${
 1189 │                     viewMode === 'grid' 
 1190 │                       ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 auto-rows-min' 
 1191 │                       : 'space-y-2 sm:space-y-3'
 1192 │                   }`}
 1193 │                   style={{
 1194 │                     maxHeight: "calc(100% - 80px)",
 1195 │                     scrollbarWidth: "thin",
 1196 │                     scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
 1197 │                   }}
 1198 │                 >
 1199 │                   {(filterState === 'selected' 
 1200 │                     ? selectedActivities2 
 1201 │                     : getCombinedActivities()
 1202 │                   )?.map((activity, index) => {
 1203 │                     const isSelected = selectedActivities2.some(
 1204 │                       (item) => item.id === activity.id,
 1205 │                     );
 1206 │ 
 1207 │                     const badgeProps = getTrilhasBadgeProps(activity.id);
 1208 │ 
 1209 │                     return (
 1210 │                       <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1210:22" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1210" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%7D"
 1211 │                         key={activity.id}
 1212 │                         className={`relative p-6 border-2 transition-all duration-300 cursor-pointer ${
 1213 │                           viewMode === 'grid' ? 'rounded-[32px]' : 'rounded-[32px] mb-4'
 1214 │                         } ${
 1215 │                           isSelected
 1216 │                             ? 'border-[#FF6B00] bg-[#FF6B00]/5 dark:bg-[#FF6B00]/10 shadow-lg transform scale-[1.02]'
 1217 │                             : 'border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-[#FF6B00]/50 hover:shadow-md'
 1218 │                         }`}
 1219 │                         initial={{ opacity: 0, y: 20 }}
 1220 │                         animate={{ opacity: 1, y: 0 }}
 1221 │                         transition={{ duration: 0.3, delay: index * 0.05 }}
 1222 │                         onClick={() => handleActivityToggle(activity)}
 1223 │                       >
 1224 │                         {/* Badge Manual - para atividades manuais */}
 1225 │                         {activity.isManual && (
 1226 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1226:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1226" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`absolute top-4 z-20 ${badgeProps.showBadge ? 'right-[131px]' : 'right-4'}`}>
 1227 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1227:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1227" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20px-4%20py-2%20border-2%20border-purple-500%20rounded-full%20bg-purple-500%2F10%20hover%3Abg-purple-500%2F15%20hover%3Aborder-purple-600%20transition-all%20duration-300%20cursor-default%20hover%3Ascale-105%22%7D" className="flex items-center gap-3 px-4 py-2 border-2 border-purple-500 rounded-full bg-purple-500/10 hover:bg-purple-500/15 hover:border-purple-600 transition-all duration-300 cursor-default hover:scale-105">
 1228 │                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1228:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1228" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-2%20h-6%20min-w-2%20min-h-6%20flex%20items-center%20justify-center%20relative%20flex-shrink-0%22%7D" className="w-2 h-6 min-w-2 min-h-6 flex items-center justify-center relative flex-shrink-0">
 1229 │                                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1229:32" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1229" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-purple-600%20transition-all%20duration-300%20relative%20z-10%22%7D" className="w-5 h-5 text-purple-600 transition-all duration-300 relative z-10" fill="currentColor" viewBox="0 0 20 20">
 1230 │                                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1230:34" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1230" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
 1231 │                                 </svg>
 1232 │                               </div>
 1233 │                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1233:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1233" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Manual%22%2C%22className%22%3A%22text-sm%20font-bold%20text-purple-600%20whitespace-nowrap%20transition-all%20duration-300%22%7D" className="text-sm font-bold text-purple-600 whitespace-nowrap transition-all duration-300">
 1234 │                                 Manual
 1235 │                               </span>                            </div>
 1236 │                           </div>
 1237 │                         )}
 1238 │ 
 1239 │                         {/* Badge Trilhas */}
 1240 │                         {badgeProps.showBadge && (
 1241 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1241:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1241" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-4%20right-4%20z-20%22%7D" className="absolute top-4 right-4 z-20">
 1242 │                             <TrilhasBadge data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1242:28" data-lov-name="TrilhasBadge"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1242" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasBadge" data-component-content="%7B%7D" />
 1243 │                           </div>
 1244 │                         )}
 1245 │ 
 1246 │                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1246:24" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1246" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-start%20gap-4%22%7D" className="flex items-start gap-4">
 1247 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1247:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1247" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%22%7D" className="flex-1">
 1248 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1248:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1248" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D" className="flex items-center gap-3 mb-2">
 1249 │                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1249:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1249" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" 
 1250 │                                 className={`icon-container ${isSelected ? 'active' : ''}`}
 1251 │                                 onClick={(e) => {
 1252 │                                   e.stopPropagation();
 1253 │                                   handleActivityToggle(activity);
 1254 │                                 }}
 1255 │                                 style={{
 1256 │                                   width: '40px',
 1257 │                                   height: '40px',
 1258 │                                   minWidth: '40px',
 1259 │                                   minHeight: '40px',
 1260 │                                   borderRadius: '14px',
 1261 │                                   display: 'flex',
 1262 │                                   alignItems: 'center',
 1263 │                                   justifyContent: 'center',
 1264 │                                   background: isSelected 
 1265 │                                     ? 'linear-gradient(135deg, #FF6E06, #FF8A39)' 
 1266 │                                     : 'rgba(255, 110, 6, 0.1)',
 1267 │                                   transition: 'all 0.3s ease',
 1268 │                                   position: 'relative',
 1269 │                                   overflow: 'hidden',
 1270 │                                   cursor: 'pointer',
 1271 │                                   boxShadow: isSelected 
 1272 │                                     ? '0 6px 12px rgba(255, 110, 6, 0.3)' 
 1273 │                                     : 'none',
 1274 │                                   transform: isSelected ? 'scale(1.05)' : 'scale(1)'
 1275 │                                 }}
 1276 │                               >
 1277 │                                 {isSelected ? (
 1278 │                                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1278:34" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1278" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-white%20transition-all%20duration-300%20relative%20z-10%22%7D" 
 1279 │                                     className="w-5 h-5 text-white transition-all duration-300 relative z-10" 
 1280 │                                     fill="currentColor" 
 1281 │                                     viewBox="0 0 20 20"
 1282 │                                   >
 1283 │                                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1283:36" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1283" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" 
 1284 │                                       fillRule="evenodd" 
 1285 │                                       d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" 
 1286 │                                       clipRule="evenodd"/>
 1287 │                                   </svg>
 1288 │                                 ) : (
 1289 │                                   React.createElement(getIconByActivityId(activity.id), {
 1290 │                                     className: `w-5 h-5 transition-all duration-300 relative z-10`,
 1291 │                                     style: {
 1292 │                                       color: '#FF6E06'
 1293 │                                     }
 1294 │                                   })
 1295 │                                 )}
 1296 │                                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1296:32" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1296" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22icon-glow%22%7D" 
 1297 │                                   className="icon-glow"
 1298 │                                   style={{
 1299 │                                     position: 'absolute',
 1300 │                                     top: '50%',
 1301 │                                     left: '50%',
 1302 │                                     width: '20px',
 1303 │                                     height: '20px',
 1304 │                                     background: 'radial-gradient(circle, rgba(255, 110, 6, 0.5), transparent)',
 1305 │                                     borderRadius: '50%',
 1306 │                                     transform: isSelected 
 1307 │                                       ? 'translate(-50%, -50%) scale(2.2)' 
 1308 │                                       : 'translate(-50%, -50%) scale(0)',
 1309 │                                     transition: 'transform 0.3s ease'
 1310 │                                   }}
 1311 │                                 />
 1312 │                               </div>
 1313 │ 
 1314 │                               <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1314:30" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1314" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20line-clamp-2%20flex-1%20pr-8%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 flex-1 pr-8">
 1315 │                                 {activity.title}
 1316 │                               </h3>
 1317 │                             </div>
 1318 │ 
 1319 │                             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1319:28" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1319" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20leading-relaxed%20line-clamp-3%20mb-3%22%7D" className="text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-3 mb-3">
 1320 │                               {activity.description}
 1321 │                             </p>
 1322 │ 
 1323 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1323:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1323" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8A%20%E2%80%A2%20%E2%8F%B1%EF%B8%8F%22%2C%22className%22%3A%22text-xs%20text-gray-600%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-600 dark:text-gray-400 mt-1">
 1324 │                                         📊 {activity.difficulty} • ⏱️ {activity.duration || '30 min'}
 1325 │                                       </div>
 1326 │ 
 1327 │                                       {/* Exibir customFields como tags/badges */}
 1328 │                                       {activity.customFields && Object.keys(activity.customFields).length > 0 && (
 1329 │                                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1329:40" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1329" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-3%20flex%20flex-wrap%20gap-2%22%7D" className="mt-3 flex flex-wrap gap-2">
 1330 │                                           {Object.entries(activity.customFields).map(([key, value]) => (
 1331 │                                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1331:44" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1331" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22inline-flex%20items-center%20px-2.5%20py-1%20rounded-full%20text-xs%20font-medium%20bg-gradient-to-r%20from-blue-50%20to-indigo-50%20dark%3Afrom-blue-900%2F30%20dark%3Ato-indigo-900%2F30%20text-blue-700%20dark%3Atext-blue-300%20border%20border-blue-200%20dark%3Aborder-blue-700%20hover%3Afrom-blue-100%20hover%3Ato-indigo-100%20dark%3Ahover%3Afrom-blue-900%2F40%20dark%3Ahover%3Ato-indigo-900%2F40%20transition-all%20duration-200%22%7D" 
 1332 │                                               key={key} 
 1333 │                                               className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-900/40 dark:hover:to-indigo-900/40 transition-all duration-200"
 1334 │                                             >
 1335 │                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1335:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1335" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22%3A%22%2C%22className%22%3A%22font-semibold%22%7D" className="font-semibold">{key}:</span>
 1336 │                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1336:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1336" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22className%22%3A%22ml-1%20truncate%20max-w-%5B150px%5D%22%7D" className="ml-1 truncate max-w-[150px]">{value}</span>
 1337 │                                             </div>
 1338 │                                           ))}
 1339 │                                         </div>
 1340 │                                       )}
 1341 │ 
 1342 │                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1342:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1342" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-2%22%7D" className="mt-2">
 1343 │                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1343:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1343" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22ID%3A%22%2C%22className%22%3A%22text-xs%20px-2%20py-1%20bg-gray-100%20dark%3Abg-gray-800%20text-gray-500%20dark%3Atext-gray-400%20rounded%22%7D" className="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded">
 1344 │                                 ID: {activity.id}
 1345 │                               </span>
 1346 │                             </div>
 1347 │                           </div>
 1348 │                         </div>
 1349 │ 
 1350 │                         {isSelected && (
 1351 │                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1351:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1351" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-%5B32px%5D%20border-2%20border-%5B%23FF6B00%5D%20animate-pulse%20opacity-50%20pointer-events-none%22%7D" className="absolute inset-0 rounded-[32px] border-2 border-[#FF6B00] animate-pulse opacity-50 pointer-events-none"></div>
 1352 │                         )}
 1353 │                       </motion.div>
 1354 │                     );
 1355 │                   })}
 1356 │ 
 1357 │                   {filterState === 'selected' && selectedActivities2.length === 0 && (
 1358 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1358:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1358" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1359 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1359:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1359" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1360 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1360:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1360" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1361 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1361:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1361" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
 1362 │                         </svg>
 1363 │                       </div>
 1364 │                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1364:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1364" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20selecionada%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1365 │                         Nenhuma atividade selecionada
 1366 │                       </h3>
 1367 │                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1367:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1367" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Selecione%20algumas%20atividades%20primeiro%20para%20v%C3%AA-las%20aqui%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1368 │                         Selecione algumas atividades primeiro para vê-las aqui
 1369 │                       </p>
 1370 │                     </div>
 1371 │                   )}
 1372 │ 
 1373 │                   {getCombinedActivities().length === 0 && (
 1374 │                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1374:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1374" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1375 │                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1375:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1375" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1376 │                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1376:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1376" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1377 │                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1377:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1377" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1378 │                         </svg>
 1379 │                       </div>
 1380 │                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1380:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1380" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20dispon%C3%ADvel%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1381 │                         Nenhuma atividade disponível
 1382 │                       </h3>
 1383 │                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1383:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1383" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Adicione%20atividades%20manuais%20ou%20aguarde%20as%20sugest%C3%B5es%20da%20IA%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1384 │                         Adicione atividades manuais ou aguarde as sugestões da IA
 1385 │                       </p>
 1386 │                     </div>
 1387 │                   )}
 1388 │                 </div>
 1389 │               )}
 1390 │ 
 1391 │               {!showAddActivityInterface && (
 1392 │                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1392:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1392" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1393 │                   <Button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1393:18" data-lov-name="Button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1393" data-component-file="CardDeConstrucao.tsx" data-component-name="Button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20gap-2%20text-sm%20sm%3Atext-base%22%7D"
 1394 │                     onClick={handleApproveActionPlan}
 1395 │                     disabled={selectedActivities2.length === 0 || isLoading}
 1396 │                     className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base"
 1397 │                   >
 1398 │                     <Target data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1398:20" data-lov-name="Target"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1398" data-component-file="CardDeConstrucao.tsx" data-component-name="Target" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20sm%3Aw-5%20sm%3Ah-5%22%7D" className="w-4 h-4 sm:w-5 sm:h-5" />
 1399 │                     {isLoading
 1400 │                       ? "Processando..."
 1401 │                       : `Aprovar Plano (${selectedActivities2.length})`}
 1402 │                   </Button>
 1403 │                 </div>
 1404 │               )}
 1405 │             </motion.div>
 1406 │           )}
 1407 │         </motion.div>
 1408 │       )}
 1409 │ 
 1410 │       {/* Debug Panel para verificar sistema de Trilhas */}
 1411 │       {actionPlan && (
 1412 │         <TrilhasDebugPanel data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1412:8" data-lov-name="TrilhasDebugPanel"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1412" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasDebugPanel" data-component-content="%7B%7D" 
 1413 │           activities={actionPlan.map(activity => ({ 
 1414 │             id: activity.id, 
 1415 │             title: activity.title 
 1416 │           }))}
 1417 │           isVisible={showTrilhasDebug}
 1418 │         />
 1419 │       )}
 1420 │ 
 1421 │       {/* Botão para toggle do debug (só visível em desenvolvimento) */}
 1422 │       {process.env.NODE_ENV === 'development' && actionPlan && (
 1423 │         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1423:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1423" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22fixed%20bottom-4%20left-4%20z-40%20bg-blue-500%20text-white%20px-3%20py-2%20rounded-lg%20text-xs%20font-medium%20shadow-lg%20hover%3Abg-blue-600%20transition-colors%22%7D"
 1424 │           onClick={() => setShowTrilhasDebug(!showTrilhasDebug)}
 1425 │           className="fixed bottom-4 left-4 z-40 bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-medium shadow-lg hover:bg-blue-600 transition-colors"
 1426 │         >
 1427 │           {showTrilhasDebug ? '🔍 Fechar Debug' : '🔍 Debug Trilhas'}
 1428 │         </button>
 1429 │       )}
 1430 │     </motion.div>
 1431 │   );
 1432 │ }
 1433 │ 
 1434 │ import {
 1435 │   AlertDialog,
 1436 │   AlertDialogAction,
 1437 │   AlertDialogCancel,
 1438 │   AlertDialogContent,
 1439 │   AlertDialogDescription,
 1440 │   AlertDialogFooter,
 1441 │   AlertDialogHeader,
 1442 │   AlertDialogTitle,
 1443 │   AlertDialogTrigger,
 1444 │ } from "@/components/ui/alert-dialog"
 1445 │ import {
 1446 │   Form,
 1447 │   FormControl,
 1448 │   FormDescription,
 1449 │   FormField,
 1450 │   FormItem,
 1451 │   FormLabel,
 1452 │   FormMessage,
 1453 │ } from "@/components/ui/form"
 1454 │ import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
 1455 │ import { ScrollArea } from "@/components/ui/scroll-area"
 1456 │ import { Separator } from "@/components/ui/separator"
 1457 │ import { Slider } from "@/components/ui/slider"
 1458 │ import { Switch } from "@/components/ui/switch"
 1459 │ import { Textarea } from "@/components/ui/textarea"
      ·          ────┬───
      ·              ╰── `Textarea` redefined here
 1460 │ import { Trash } from "lucide-react"
 1461 │ import { Calendar } from "@/components/ui/calendar"
 1462 │ import { cn } from "@/lib/utils"
      ╰────

  × the name `Calendar` is defined multiple times
      ╭─[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:13:1]
   13 │   Target,
   14 │   BookOpen,
   15 │   Users,
   16 │   Calendar,
      ·   ────┬───
      ·       ╰── previous definition of `Calendar` here
   17 │   AlertCircle,
   18 │   Loader2,
   19 │   FileText,
   20 │   Edit3,
   21 │   Eye,
   22 │   Play
   23 │ } from 'lucide-react';
   24 │ import { Textarea } from '@/components/ui/textarea';
   25 │ import { Label } from '@/components/ui/label';
   26 │ import { Input } from '@/components/ui/input';
   27 │ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 │ import { Separator } from '@/components/ui/separator';
   29 │ import { Progress } from '@/components/ui/progress';
   30 │ import { ConstructionGrid } from './ConstructionGrid';
   31 │ 
   32 │ import { 
   33 │   Wrench, CheckSquare, Filter, 
   34 │   Trophy, Zap, Brain, Heart, 
   35 │   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 │   Microscope, Palette, Music, Camera, Video, Headphones,
   37 │   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 │   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 │   Pause, SkipForward, Volume2, Wifi, Battery,
   40 │   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 │   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 │ } from "lucide-react";
   43 │ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 │ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 │ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 │ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 │ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 │ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 │ import { ConstructionInterface } from './index';
   50 │ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 │ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 │ 
   53 │ // Convert to proper format with name field
   54 │ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 │   ...activity,
   56 │   name: activity.name || activity.title || activity.description
   57 │ }));
   58 │ 
   59 │ export interface ContextualizationData {
   60 │   materias: string;
   61 │   publicoAlvo: string;
   62 │   restricoes: string;
   63 │   datasImportantes?: string;
   64 │   observacoes?: string;
   65 │ }
   66 │ 
   67 │ export interface ActionPlanItem {
   68 │   id: string;
   69 │   title: string;
   70 │   description: string;
   71 │   duration?: string;
   72 │   difficulty?: string;
   73 │   category?: string;
   74 │   type?: string;
   75 │   approved: boolean;
   76 │   isTrilhasEligible?: boolean;
   77 │   customFields?: Record<string, string>;
   78 │   isManual?: boolean;
   79 │ }
   80 │ 
   81 │ interface CardDeConstrucaoProps {
   82 │   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 │   contextualizationData?: ContextualizationData | null;
   84 │   actionPlan?: ActionPlanItem[] | null;
   85 │   onSubmitContextualization: (data: ContextualizationData) => void;
   86 │   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 │   onResetFlow: () => void;
   88 │   isLoading?: boolean;
   89 │ }
   90 │ 
   91 │ export function CardDeConstrucao({ 
   92 │   step, 
   93 │   contextualizationData, 
   94 │   actionPlan, 
   95 │   onSubmitContextualization, 
   96 │   onApproveActionPlan, 
   97 │   onResetFlow,
   98 │   isLoading 
   99 │ }: CardDeConstrucaoProps) {
  100 │   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 │     materias: '',
  102 │     publicoAlvo: '',
  103 │     restricoes: '',
  104 │     datasImportantes: '',
  105 │     observacoes: ''
  106 │   });
  107 │ 
  108 │   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 │   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 │   // Form data for contextualization
  111 │   const [formData, setFormData] = useState<ContextualizationData>({
  112 │     materias: "",
  113 │     publicoAlvo: "",
  114 │     restricoes: "",
  115 │     datasImportantes: "",
  116 │     observacoes: "",
  117 │   });
  118 │ 
  119 │   // Selected activities for action plan
  120 │   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 │ 
  122 │   // Filter state for action plan
  123 │   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 │ 
  125 │   // View mode state (list or grid)
  126 │   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 │ 
  128 │   // Debug state for trilhas system
  129 │   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 │ 
  131 │   // Estado para mostrar a interface de adicionar atividade manual
  132 │   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 │ 
  134 │   // Manual activity addition state
  135 │   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 │ 
  137 │   // Manual activity form state
  138 │   const [manualActivityForm, setManualActivityForm] = useState({
  139 │     title: '',
  140 │     typeId: '',
  141 │     description: ''
  142 │   });
  143 │ 
  144 │   // State for activity building process
  145 │   const [isBuilding, setIsBuilding] = useState(false);
  146 │ 
  147 │   // State for tracking building progress
  148 │   const [progress, setProgress] = useState<{
  149 │     total: number;
  150 │     completed: number;
  151 │     current: string;
  152 │     errors: string[];
  153 │   } | null>(null);
  154 │ 
  155 │   // Function to simulate activity building
  156 │   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 │     setIsBuilding(true);
  158 │     setProgress({
  159 │       total: activities.length,
  160 │       completed: 0,
  161 │       current: '',
  162 │       errors: []
  163 │     });
  164 │ 
  165 │     let allSuccess = true;
  166 │ 
  167 │     for (let i = 0; i < activities.length; i++) {
  168 │       const activity = activities[i];
  169 │       setProgress(prev => ({
  170 │         ...prev,
  171 │         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 │       }));
  173 │ 
  174 │       try {
  175 │         // Simulate building
  176 │         await new Promise(resolve => setTimeout(resolve, 1000));
  177 │ 
  178 │         // Simulate occasional errors
  179 │         if (Math.random() < 0.2) {
  180 │           throw new Error(`Falha ao construir ${activity.title}`);
  181 │         }
  182 │ 
  183 │         setProgress(prev => ({
  184 │           ...prev,
  185 │           completed: prev.completed + 1
  186 │         }));
  187 │       } catch (error: any) {
  188 │         console.error(error);
  189 │         allSuccess = false;
  190 │         setProgress(prev => ({
  191 │           ...prev,
  192 │           errors: [...prev.errors, error.message]
  193 │         }));
  194 │       }
  195 │     }
  196 │ 
  197 │     setIsBuilding(false);
  198 │     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 │     return allSuccess;
  200 │   };
  201 │ 
  202 │   // Load existing data when component mounts
  203 │   useEffect(() => {
  204 │     if (contextualizationData) {
  205 │       setFormData(contextualizationData);
  206 │     }
  207 │   }, [contextualizationData]);
  208 │ 
  209 │   // Handle form input changes
  210 │   const handleInputChange = (
  211 │     field: keyof ContextualizationData,
  212 │     value: string,
  213 │   ) => {
  214 │     setFormData((prev) => ({
  215 │       ...prev,
  216 │       [field]: value,
  217 │     }));
  218 │   };
  219 │ 
  220 │   // Handle contextualization form submission
  221 │   const handleSubmitContextualization = () => {
  222 │     if (onSubmitContextualization) {
  223 │       onSubmitContextualization(formData);
  224 │     }
  225 │   };
  226 │ 
  227 │   // Handle activity selection toggle
  228 │   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 │     setSelectedActivities2((prev) => {
  230 │       const isSelected = prev.some((item) => item.id === activity.id);
  231 │       if (isSelected) {
  232 │         return prev.filter((item) => item.id !== activity.id);
  233 │       } else {
  234 │         return [...prev, { ...activity, approved: true }];
  235 │       }
  236 │     });
  237 │   };
  238 │ 
  239 │   useEffect(() => {
  240 │     if (actionPlan) {
  241 │       console.log('🎯 ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 │       const approved = actionPlan.filter(item => item.approved);
  243 │       setSelectedActivities2(approved);
  244 │     }
  245 │   }, [actionPlan, step]);
  246 │ 
  247 │   const handleApproveActionPlan = async () => {
  248 │     console.log('✅ Plano de ação aprovado! Iniciando construção automática com ModalBinderEngine...');
  249 │ 
  250 │     // Aprovar plano primeiro
  251 │     onApproveActionPlan(selectedActivities2);
  252 │ 
  253 │     // Construir atividades automaticamente usando o novo sistema
  254 │     if (selectedActivities2.length > 0) {
  255 │       try {
  256 │         console.log('🔧 Iniciando construção automática com ModalBinderEngine...');
  257 │         console.log('📋 Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 │ 
  259 │         // Usar o contexto de contextualização para enriquecer a geração
  260 │         const contextData = {
  261 │           materias: formData.materias,
  262 │           publicoAlvo: formData.publicoAlvo,
  263 │           restricoes: formData.restricoes,
  264 │           datasImportantes: formData.datasImportantes,
  265 │           observacoes: formData.observacoes
  266 │         };
  267 │ 
  268 │         console.log('🎯 Dados de contexto para geração:', contextData);
  269 │ 
  270 │         const success = await buildActivities(selectedActivities2, contextData);
  271 │ 
  272 │         if (success) {
  273 │           console.log('🎉 Todas as atividades foram construídas automaticamente com ModalBinderEngine!');
  274 │ 
  275 │           // Exibir notificação de sucesso
  276 │           console.log('✅ Sistema de construção automática funcionando corretamente!');
  277 │         } else {
  278 │           console.warn('⚠️ Algumas atividades podem ter falhado na construção automática');
  279 │         }
  280 │       } catch (error) {
  281 │         console.error('❌ Erro durante construção automática:', error);
  282 │         console.error('📊 Detalhes do erro:', {
  283 │           message: error.message,
  284 │           stack: error.stack,
  285 │           selectedActivities: selectedActivities2.length,
  286 │           contextData: !!contextData
  287 │         });
  288 │       }
  289 │     } else {
  290 │       console.log('ℹ️ Nenhuma atividade selecionada para construção automática');
  291 │     }
  292 │   };
  293 │ 
  294 │   // Handle manual activity form submission
  295 │   const handleAddManualActivity = () => {
  296 │     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 │       return;
  298 │     }
  299 │ 
  300 │     // Find the activity type from schoolPowerActivities
  301 │     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 │ 
  303 │     const newManualActivity: ActionPlanItem = {
  304 │       id: manualActivityForm.typeId,
  305 │       title: manualActivityForm.title,
  306 │       description: manualActivityForm.description,
  307 │       duration: "Personalizado",
  308 │       difficulty: "Personalizado", 
  309 │       category: activityType?.tags[0] || "manual",
  310 │       type: activityType?.name || "Atividade Manual",
  311 │       isManual: true,
  312 │       approved: false,
  313 │       customFields: {} // Atividades manuais também podem ter customFields
  314 │     };
  315 │ 
  316 │     // Add to manual activities list
  317 │     setManualActivities(prev => [...prev, newManualActivity]);
  318 │ 
  319 │     // Clear form
  320 │     setManualActivityForm({
  321 │       title: '',
  322 │       typeId: '',
  323 │       description: ''
  324 │     });
  325 │ 
  326 │     // Return to action plan interface
  327 │     setShowAddActivityInterface(false);
  328 │   };
  329 │ 
  330 │   // Handle manual activity form changes
  331 │   const handleManualFormChange = (field: string, value: string) => {
  332 │     setManualActivityForm(prev => ({
  333 │       ...prev,
  334 │       [field]: value
  335 │     }));
  336 │   };
  337 │ 
  338 │   // Get combined activities (AI suggestions + manual)
  339 │   const getCombinedActivities = () => {
  340 │     const aiActivities = actionPlan || [];
  341 │     const allActivities = [...aiActivities, ...manualActivities];
  342 │     return allActivities;
  343 │   };
  344 │ 
  345 │   // Check if contextualization form is valid
  346 │   const isContextualizationValid =
  347 │     formData.materias.trim() && formData.publicoAlvo.trim();
  348 │ 
  349 │   // Grid Toggle Component
  350 │   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 │     viewMode: 'list' | 'grid';
  352 │     onToggle: () => void;
  353 │   }) => {
  354 │     return (
  355 │       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 │         onClick={onToggle}
  357 │         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 │         title={viewMode === 'list' ? 'Visualização em Grade' : 'Visualização em Lista'}
  359 │       >
  360 │         {viewMode === 'list' ? (
  361 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 │           </svg>
  364 │         ) : (
  365 │           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 │             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 │           </svg>
  368 │         )}
  369 │       </button>
  370 │     );
  371 │   };
  372 │ 
  373 │   // Filter Component
  374 │   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 │     activities: ActionPlanItem[];
  376 │     selectedActivities2: ActionPlanItem[];
  377 │     onFilterApply: (filterType: string) => void;
  378 │   }) => {
  379 │     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 │     const filterRef = useRef<HTMLDivElement>(null);
  381 │ 
  382 │     useEffect(() => {
  383 │       const handleClickOutside = (event: MouseEvent) => {
  384 │         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 │           setIsFilterOpen(false);
  386 │         }
  387 │       };
  388 │ 
  389 │       document.addEventListener('mousedown', handleClickOutside);
  390 │       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 │     }, []);
  392 │ 
  393 │     return (
  394 │       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 │         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 │           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 │           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 │           title="Filtros e Ações"
  399 │         >