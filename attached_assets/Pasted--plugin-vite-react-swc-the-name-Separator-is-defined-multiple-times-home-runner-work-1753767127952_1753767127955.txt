[plugin:vite:react-swc] Ã— the name `Separator` is defined multiple times
      â•­â”€[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:25:1]
   25 â”‚ import { Label } from '@/components/ui/label';
   26 â”‚ import { Input } from '@/components/ui/input';
   27 â”‚ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 â”‚ import { Separator } from '@/components/ui/separator';
      Â·          â”€â”€â”€â”€â”¬â”€â”€â”€â”€
      Â·              â•°â”€â”€ previous definition of `Separator` here
   29 â”‚ import { Progress } from '@/components/ui/progress';
   30 â”‚ import { ConstructionGrid } from './ConstructionGrid';
   31 â”‚ 
   32 â”‚ import { 
   33 â”‚   Wrench, CheckSquare, Filter, 
   34 â”‚   Trophy, Zap, Brain, Heart, 
   35 â”‚   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 â”‚   Microscope, Palette, Music, Camera, Video, Headphones,
   37 â”‚   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 â”‚   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 â”‚   Pause, SkipForward, Volume2, Wifi, Battery,
   40 â”‚   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 â”‚   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 â”‚ } from "lucide-react";
   43 â”‚ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 â”‚ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 â”‚ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 â”‚ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 â”‚ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 â”‚ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 â”‚ import { ConstructionInterface } from './index';
   50 â”‚ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 â”‚ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 â”‚ 
   53 â”‚ // Convert to proper format with name field
   54 â”‚ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 â”‚   ...activity,
   56 â”‚   name: activity.name || activity.title || activity.description
   57 â”‚ }));
   58 â”‚ 
   59 â”‚ export interface ContextualizationData {
   60 â”‚   materias: string;
   61 â”‚   publicoAlvo: string;
   62 â”‚   restricoes: string;
   63 â”‚   datasImportantes?: string;
   64 â”‚   observacoes?: string;
   65 â”‚ }
   66 â”‚ 
   67 â”‚ export interface ActionPlanItem {
   68 â”‚   id: string;
   69 â”‚   title: string;
   70 â”‚   description: string;
   71 â”‚   duration?: string;
   72 â”‚   difficulty?: string;
   73 â”‚   category?: string;
   74 â”‚   type?: string;
   75 â”‚   approved: boolean;
   76 â”‚   isTrilhasEligible?: boolean;
   77 â”‚   customFields?: Record<string, string>;
   78 â”‚   isManual?: boolean;
   79 â”‚ }
   80 â”‚ 
   81 â”‚ interface CardDeConstrucaoProps {
   82 â”‚   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 â”‚   contextualizationData?: ContextualizationData | null;
   84 â”‚   actionPlan?: ActionPlanItem[] | null;
   85 â”‚   onSubmitContextualization: (data: ContextualizationData) => void;
   86 â”‚   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 â”‚   onResetFlow: () => void;
   88 â”‚   isLoading?: boolean;
   89 â”‚ }
   90 â”‚ 
   91 â”‚ export function CardDeConstrucao({ 
   92 â”‚   step, 
   93 â”‚   contextualizationData, 
   94 â”‚   actionPlan, 
   95 â”‚   onSubmitContextualization, 
   96 â”‚   onApproveActionPlan, 
   97 â”‚   onResetFlow,
   98 â”‚   isLoading 
   99 â”‚ }: CardDeConstrucaoProps) {
  100 â”‚   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 â”‚     materias: '',
  102 â”‚     publicoAlvo: '',
  103 â”‚     restricoes: '',
  104 â”‚     datasImportantes: '',
  105 â”‚     observacoes: ''
  106 â”‚   });
  107 â”‚ 
  108 â”‚   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 â”‚   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 â”‚   // Form data for contextualization
  111 â”‚   const [formData, setFormData] = useState<ContextualizationData>({
  112 â”‚     materias: "",
  113 â”‚     publicoAlvo: "",
  114 â”‚     restricoes: "",
  115 â”‚     datasImportantes: "",
  116 â”‚     observacoes: "",
  117 â”‚   });
  118 â”‚ 
  119 â”‚   // Selected activities for action plan
  120 â”‚   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 â”‚ 
  122 â”‚   // Filter state for action plan
  123 â”‚   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 â”‚ 
  125 â”‚   // View mode state (list or grid)
  126 â”‚   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 â”‚ 
  128 â”‚   // Debug state for trilhas system
  129 â”‚   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 â”‚ 
  131 â”‚   // Estado para mostrar a interface de adicionar atividade manual
  132 â”‚   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 â”‚ 
  134 â”‚   // Manual activity addition state
  135 â”‚   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 â”‚ 
  137 â”‚   // Manual activity form state
  138 â”‚   const [manualActivityForm, setManualActivityForm] = useState({
  139 â”‚     title: '',
  140 â”‚     typeId: '',
  141 â”‚     description: ''
  142 â”‚   });
  143 â”‚ 
  144 â”‚   // State for activity building process
  145 â”‚   const [isBuilding, setIsBuilding] = useState(false);
  146 â”‚ 
  147 â”‚   // State for tracking building progress
  148 â”‚   const [progress, setProgress] = useState<{
  149 â”‚     total: number;
  150 â”‚     completed: number;
  151 â”‚     current: string;
  152 â”‚     errors: string[];
  153 â”‚   } | null>(null);
  154 â”‚ 
  155 â”‚   // Function to simulate activity building
  156 â”‚   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 â”‚     setIsBuilding(true);
  158 â”‚     setProgress({
  159 â”‚       total: activities.length,
  160 â”‚       completed: 0,
  161 â”‚       current: '',
  162 â”‚       errors: []
  163 â”‚     });
  164 â”‚ 
  165 â”‚     let allSuccess = true;
  166 â”‚ 
  167 â”‚     for (let i = 0; i < activities.length; i++) {
  168 â”‚       const activity = activities[i];
  169 â”‚       setProgress(prev => ({
  170 â”‚         ...prev,
  171 â”‚         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 â”‚       }));
  173 â”‚ 
  174 â”‚       try {
  175 â”‚         // Simulate building
  176 â”‚         await new Promise(resolve => setTimeout(resolve, 1000));
  177 â”‚ 
  178 â”‚         // Simulate occasional errors
  179 â”‚         if (Math.random() < 0.2) {
  180 â”‚           throw new Error(`Falha ao construir ${activity.title}`);
  181 â”‚         }
  182 â”‚ 
  183 â”‚         setProgress(prev => ({
  184 â”‚           ...prev,
  185 â”‚           completed: prev.completed + 1
  186 â”‚         }));
  187 â”‚       } catch (error: any) {
  188 â”‚         console.error(error);
  189 â”‚         allSuccess = false;
  190 â”‚         setProgress(prev => ({
  191 â”‚           ...prev,
  192 â”‚           errors: [...prev.errors, error.message]
  193 â”‚         }));
  194 â”‚       }
  195 â”‚     }
  196 â”‚ 
  197 â”‚     setIsBuilding(false);
  198 â”‚     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 â”‚     return allSuccess;
  200 â”‚   };
  201 â”‚ 
  202 â”‚   // Load existing data when component mounts
  203 â”‚   useEffect(() => {
  204 â”‚     if (contextualizationData) {
  205 â”‚       setFormData(contextualizationData);
  206 â”‚     }
  207 â”‚   }, [contextualizationData]);
  208 â”‚ 
  209 â”‚   // Handle form input changes
  210 â”‚   const handleInputChange = (
  211 â”‚     field: keyof ContextualizationData,
  212 â”‚     value: string,
  213 â”‚   ) => {
  214 â”‚     setFormData((prev) => ({
  215 â”‚       ...prev,
  216 â”‚       [field]: value,
  217 â”‚     }));
  218 â”‚   };
  219 â”‚ 
  220 â”‚   // Handle contextualization form submission
  221 â”‚   const handleSubmitContextualization = () => {
  222 â”‚     if (onSubmitContextualization) {
  223 â”‚       onSubmitContextualization(formData);
  224 â”‚     }
  225 â”‚   };
  226 â”‚ 
  227 â”‚   // Handle activity selection toggle
  228 â”‚   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 â”‚     setSelectedActivities2((prev) => {
  230 â”‚       const isSelected = prev.some((item) => item.id === activity.id);
  231 â”‚       if (isSelected) {
  232 â”‚         return prev.filter((item) => item.id !== activity.id);
  233 â”‚       } else {
  234 â”‚         return [...prev, { ...activity, approved: true }];
  235 â”‚       }
  236 â”‚     });
  237 â”‚   };
  238 â”‚ 
  239 â”‚   useEffect(() => {
  240 â”‚     if (actionPlan) {
  241 â”‚       console.log('ðŸŽ¯ ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 â”‚       const approved = actionPlan.filter(item => item.approved);
  243 â”‚       setSelectedActivities2(approved);
  244 â”‚     }
  245 â”‚   }, [actionPlan, step]);
  246 â”‚ 
  247 â”‚   const handleApproveActionPlan = async () => {
  248 â”‚     console.log('âœ… Plano de aÃ§Ã£o aprovado! Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  249 â”‚ 
  250 â”‚     // Aprovar plano primeiro
  251 â”‚     onApproveActionPlan(selectedActivities2);
  252 â”‚ 
  253 â”‚     // Construir atividades automaticamente usando o novo sistema
  254 â”‚     if (selectedActivities2.length > 0) {
  255 â”‚       try {
  256 â”‚         console.log('ðŸ”§ Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  257 â”‚         console.log('ðŸ“‹ Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 â”‚ 
  259 â”‚         // Usar o contexto de contextualizaÃ§Ã£o para enriquecer a geraÃ§Ã£o
  260 â”‚         const contextData = {
  261 â”‚           materias: formData.materias,
  262 â”‚           publicoAlvo: formData.publicoAlvo,
  263 â”‚           restricoes: formData.restricoes,
  264 â”‚           datasImportantes: formData.datasImportantes,
  265 â”‚           observacoes: formData.observacoes
  266 â”‚         };
  267 â”‚ 
  268 â”‚         console.log('ðŸŽ¯ Dados de contexto para geraÃ§Ã£o:', contextData);
  269 â”‚ 
  270 â”‚         const success = await buildActivities(selectedActivities2, contextData);
  271 â”‚ 
  272 â”‚         if (success) {
  273 â”‚           console.log('ðŸŽ‰ Todas as atividades foram construÃ­das automaticamente com ModalBinderEngine!');
  274 â”‚ 
  275 â”‚           // Exibir notificaÃ§Ã£o de sucesso
  276 â”‚           console.log('âœ… Sistema de construÃ§Ã£o automÃ¡tica funcionando corretamente!');
  277 â”‚         } else {
  278 â”‚           console.warn('âš ï¸ Algumas atividades podem ter falhado na construÃ§Ã£o automÃ¡tica');
  279 â”‚         }
  280 â”‚       } catch (error) {
  281 â”‚         console.error('âŒ Erro durante construÃ§Ã£o automÃ¡tica:', error);
  282 â”‚         console.error('ðŸ“Š Detalhes do erro:', {
  283 â”‚           message: error.message,
  284 â”‚           stack: error.stack,
  285 â”‚           selectedActivities: selectedActivities2.length,
  286 â”‚           contextData: !!contextData
  287 â”‚         });
  288 â”‚       }
  289 â”‚     } else {
  290 â”‚       console.log('â„¹ï¸ Nenhuma atividade selecionada para construÃ§Ã£o automÃ¡tica');
  291 â”‚     }
  292 â”‚   };
  293 â”‚ 
  294 â”‚   // Handle manual activity form submission
  295 â”‚   const handleAddManualActivity = () => {
  296 â”‚     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 â”‚       return;
  298 â”‚     }
  299 â”‚ 
  300 â”‚     // Find the activity type from schoolPowerActivities
  301 â”‚     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 â”‚ 
  303 â”‚     const newManualActivity: ActionPlanItem = {
  304 â”‚       id: manualActivityForm.typeId,
  305 â”‚       title: manualActivityForm.title,
  306 â”‚       description: manualActivityForm.description,
  307 â”‚       duration: "Personalizado",
  308 â”‚       difficulty: "Personalizado", 
  309 â”‚       category: activityType?.tags[0] || "manual",
  310 â”‚       type: activityType?.name || "Atividade Manual",
  311 â”‚       isManual: true,
  312 â”‚       approved: false,
  313 â”‚       customFields: {} // Atividades manuais tambÃ©m podem ter customFields
  314 â”‚     };
  315 â”‚ 
  316 â”‚     // Add to manual activities list
  317 â”‚     setManualActivities(prev => [...prev, newManualActivity]);
  318 â”‚ 
  319 â”‚     // Clear form
  320 â”‚     setManualActivityForm({
  321 â”‚       title: '',
  322 â”‚       typeId: '',
  323 â”‚       description: ''
  324 â”‚     });
  325 â”‚ 
  326 â”‚     // Return to action plan interface
  327 â”‚     setShowAddActivityInterface(false);
  328 â”‚   };
  329 â”‚ 
  330 â”‚   // Handle manual activity form changes
  331 â”‚   const handleManualFormChange = (field: string, value: string) => {
  332 â”‚     setManualActivityForm(prev => ({
  333 â”‚       ...prev,
  334 â”‚       [field]: value
  335 â”‚     }));
  336 â”‚   };
  337 â”‚ 
  338 â”‚   // Get combined activities (AI suggestions + manual)
  339 â”‚   const getCombinedActivities = () => {
  340 â”‚     const aiActivities = actionPlan || [];
  341 â”‚     const allActivities = [...aiActivities, ...manualActivities];
  342 â”‚     return allActivities;
  343 â”‚   };
  344 â”‚ 
  345 â”‚   // Check if contextualization form is valid
  346 â”‚   const isContextualizationValid =
  347 â”‚     formData.materias.trim() && formData.publicoAlvo.trim();
  348 â”‚ 
  349 â”‚   // Grid Toggle Component
  350 â”‚   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 â”‚     viewMode: 'list' | 'grid';
  352 â”‚     onToggle: () => void;
  353 â”‚   }) => {
  354 â”‚     return (
  355 â”‚       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 â”‚         onClick={onToggle}
  357 â”‚         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 â”‚         title={viewMode === 'list' ? 'VisualizaÃ§Ã£o em Grade' : 'VisualizaÃ§Ã£o em Lista'}
  359 â”‚       >
  360 â”‚         {viewMode === 'list' ? (
  361 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 â”‚           </svg>
  364 â”‚         ) : (
  365 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 â”‚           </svg>
  368 â”‚         )}
  369 â”‚       </button>
  370 â”‚     );
  371 â”‚   };
  372 â”‚ 
  373 â”‚   // Filter Component
  374 â”‚   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 â”‚     activities: ActionPlanItem[];
  376 â”‚     selectedActivities2: ActionPlanItem[];
  377 â”‚     onFilterApply: (filterType: string) => void;
  378 â”‚   }) => {
  379 â”‚     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 â”‚     const filterRef = useRef<HTMLDivElement>(null);
  381 â”‚ 
  382 â”‚     useEffect(() => {
  383 â”‚       const handleClickOutside = (event: MouseEvent) => {
  384 â”‚         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 â”‚           setIsFilterOpen(false);
  386 â”‚         }
  387 â”‚       };
  388 â”‚ 
  389 â”‚       document.addEventListener('mousedown', handleClickOutside);
  390 â”‚       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 â”‚     }, []);
  392 â”‚ 
  393 â”‚     return (
  394 â”‚       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 â”‚         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 â”‚           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 â”‚           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 â”‚           title="Filtros e AÃ§Ãµes"
  399 â”‚         >
  400 â”‚           <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:400:10" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="400" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" />
  401 â”‚         </button>
  402 â”‚ 
  403 â”‚         {isFilterOpen && (
  404 â”‚           <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:404:10" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="404" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22absolute%20top-full%20right-0%20mt-3%20w-56%20bg-white%20dark%3Abg-gray-800%20rounded-2xl%20shadow-2xl%20border%20border-gray-200%20dark%3Aborder-gray-600%20overflow-hidden%20z-50%20backdrop-blur-sm%22%7D"
  405 â”‚             initial={{ opacity: 0, y: -10, scale: 0.95 }}
  406 â”‚             animate={{ opacity: 1, y: 0, scale: 1 }}
  407 â”‚             exit={{ opacity: 0, y: -10, scale: 0.95 }}
  408 â”‚             transition={{ duration: 0.2, ease: [0.25, 0.1, 0.25, 1] }}
  409 â”‚             className="absolute top-full right-0 mt-3 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 overflow-hidden z-50 backdrop-blur-sm"
  410 â”‚             style={{
  411 â”‚               background: `
  412 â”‚                 linear-gradient(135deg, 
  413 â”‚                   rgba(255, 255, 255, 0.95) 0%, 
  414 â”‚                   rgba(248, 250, 252, 0.98) 100%
  415 â”‚                 )
  416 â”‚               `,
  417 â”‚               ...(typeof window !== "undefined" &&
  418 â”‚               window.matchMedia("(prefers-color-scheme: dark)").matches
  419 â”‚                 ? {
  420 â”‚                     background: `
  421 â”‚                   linear-gradient(135deg, 
  422 â”‚                     rgba(31, 41, 55, 0.95) 0%, 
  423 â”‚                     rgba(17, 24, 39, 0.98) 100%
  424 â”‚                   )
  425 â”‚                 `,
  426 â”‚                   }
  427 â”‚                 : {}),
  428 â”‚             }}
  429 â”‚           >
  430 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:430:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="430" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22p-2%22%7D" className="p-2">
  431 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:431:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="431" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22px-3%20py-2%20border-b%20border-gray-200%20dark%3Aborder-gray-600%22%7D" className="px-3 py-2 border-b border-gray-200 dark:border-gray-600">
  432 â”‚                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:432:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="432" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Filtros%20e%20A%C3%A7%C3%B5es%22%2C%22className%22%3A%22text-sm%20font-semibold%20text-gray-900%20dark%3Atext-white%20flex%20items-center%20gap-2%22%7D" className="text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2">
  433 â”‚                   <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:433:18" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="433" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%22%7D" className="w-4 h-4 text-[#FF6B00]" />
  434 â”‚                   Filtros e AÃ§Ãµes
  435 â”‚                 </h3>
  436 â”‚               </div>
  437 â”‚ 
  438 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:438:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="438" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22py-1%20space-y-1%22%7D" className="py-1 space-y-1">
  439 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:439:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="439" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  440 â”‚                   onClick={() => {
  441 â”‚                     onFilterApply('selectAll');
  442 â”‚                     setIsFilterOpen(false);
  443 â”‚                   }}
  444 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  445 â”‚                 >
  446 â”‚                   <CheckSquare data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:446:18" data-lov-name="CheckSquare"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="446" data-component-file="CardDeConstrucao.tsx" data-component-name="CheckSquare" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" />
  447 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:447:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="447" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20todos%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar todos</span>
  448 â”‚                 </button>
  449 â”‚ 
  450 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:450:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="450" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  451 â”‚                   onClick={() => {
  452 â”‚                     onFilterApply('selectRecommended');
  453 â”‚                     setIsFilterOpen(false);
  454 â”‚                   }}
  455 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  456 â”‚                 >
  457 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:457:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="457" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  458 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:458:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="458" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clipRule="evenodd" />
  459 â”‚                   </svg>
  460 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:460:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="460" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20recomenda%C3%A7%C3%B5es%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar recomendaÃ§Ãµes</span>
  461 â”‚                 </button>
  462 â”‚ 
  463 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:463:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="463" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22border-t%20border-gray-200%20dark%3Aborder-gray-600%20my-1%22%7D" className="border-t border-gray-200 dark:border-gray-600 my-1"></div>
  464 â”‚ 
  465 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:465:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="465" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-blue-500%2F10%20hover%3Ato-blue-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  466 â”‚                   onClick={() => {
  467 â”‚                     onFilterApply('viewSelected');
  468 â”‚                     setIsFilterOpen(false);
  469 â”‚                   }}
  470 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-blue-500/10 hover:to-blue-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  471 â”‚                 >
  472 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:472:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="472" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-blue-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-blue-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  473 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:473:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="473" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
  474 â”‚                   </svg>
  475 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:475:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="475" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20apenas%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver apenas selecionados</span>
  476 â”‚                 </button>
  477 â”‚ 
  478 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:478:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="478" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-red-500%2F10%20hover%3Ato-red-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  479 â”‚                   onClick={() => {
  480 â”‚                     onFilterApply('clearSelected');
  481 â”‚                     setIsFilterOpen(false);
  482 â”‚                   }}
  483 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-red-500/10 hover:to-red-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  484 â”‚                 >
  485 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:485:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="485" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-red-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-red-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  486 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:486:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="486" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
  487 â”‚                   </svg>
  488 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:488:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="488" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Tirar%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Tirar selecionados</span>
  489 â”‚                 </button>
  490 â”‚ 
  491 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:491:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="491" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-gray-500%2F10%20hover%3Ato-gray-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  492 â”‚                   onClick={() => {
  493 â”‚                     onFilterApply('viewAll');
  494 â”‚                     setIsFilterOpen(false);
  495 â”‚                   }}
  496 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-gray-500/10 hover:to-gray-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  497 â”‚                 >
  498 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:498:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="498" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-gray-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  499 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:499:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="499" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd" />
  500 â”‚                   </svg>
  501 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:501:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="501" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20todas%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver todas</span>
  502 â”‚                 </button>
  503 â”‚               </div>
  504 â”‚             </div>
  505 â”‚           </motion.div>
  506 â”‚         )}
  507 â”‚       </div>
  508 â”‚     );
  509 â”‚   };
  510 â”‚ 
  511 â”‚   // Handle filter actions
  512 â”‚   const handleFilterApply = (filterType: string) => {
  513 â”‚     const combinedActivities = getCombinedActivities();
  514 â”‚     if (combinedActivities.length === 0) return;
  515 â”‚ 
  516 â”‚     switch (filterType) {
  517 â”‚       case 'selectAll':
  518 â”‚         setSelectedActivities2([...combinedActivities]);
  519 â”‚         setFilterState('all');
  520 â”‚         break;
  521 â”‚       case 'selectRecommended':
  522 â”‚         // Seleciona as 3 primeiras atividades como "recomendadas"
  523 â”‚         const recommended = combinedActivities.slice(0, Math.min(3, combinedActivities.length));
  524 â”‚         setSelectedActivities2(recommended);
  525 â”‚         setFilterState('all');
  526 â”‚         break;
  527 â”‚       case 'viewSelected':
  528 â”‚         setFilterState('selected');
  529 â”‚         break;
  530 â”‚       case 'clearSelected':
  531 â”‚         setSelectedActivities2([]);
  532 â”‚         setFilterState('all');
  533 â”‚         break;
  534 â”‚       case 'viewAll':
  535 â”‚         setFilterState('all');
  536 â”‚         break;
  537 â”‚       default:
  538 â”‚         break;
  539 â”‚     }
  540 â”‚   };
  541 â”‚ 
  542 â”‚   const getIconByActivityId = (activityId: string) => {
  543 â”‚     // Sistema de mapeamento 100% Ãºnico - cada ID tem seu prÃ³prio Ã­cone especÃ­fico
  544 â”‚     const uniqueIconMapping: { [key: string]: any } = {
  545 â”‚       "atividade-adaptada": Heart,
  546 â”‚       "atividades-contos-infantis": BookOpen,
  547 â”‚       "atividades-ia": Brain,
  548 â”‚       "atividades-matematica": Target,
  549 â”‚       "atividades-ortografia-alfabeto": PenTool,
  550 â”‚       "aulas-eletivas": Star,
  551 â”‚       "bncc-descomplicada": BookOpen,
  552 â”‚       "caca-palavras": Puzzle,
  553 â”‚       "capitulo-livro": BookOpen,
  554 â”‚       "charadas": Puzzle,
  555 â”‚       "chatbot-bncc": MessageSquare,
  556 â”‚       "consulta-video": Video,
  557 â”‚       "corretor-gramatical": CheckSquare,
  558 â”‚       "corretor-provas-feedback": CheckSquare,
  559 â”‚       "corretor-provas-papel": FileText,
  560 â”‚       "corretor-questoes": PenTool,
  561 â”‚       "corretor-redacao": PenTool,
  562 â”‚       "criterios-avaliacao": CheckSquare,
  563 â”‚       "desenho-simetrico": Puzzle,
  564 â”‚       "desenvolvimento-caligrafia": PenTool,
  565 â”‚       "dinamicas-sala-aula": Users,
  566 â”‚       "emails-escolares": Mail,
  567 â”‚       "erros-comuns": Search,
  568 â”‚       "exemplos-contextualizados": BookOpen,
  569 â”‚       "experimento-cientifico": Microscope,
  570 â”‚       "fichamento-obra-literaria": BookOpen,
  571 â”‚       "gerador-tracejados": PenTool,
  572 â”‚       "historias-sociais": Heart,
  573 â”‚       "ideias-atividades": Lightbulb,
  574 â”‚       "ideias-aulas-acessiveis": Heart,
  575 â”‚       "ideias-avaliacoes-adaptadas": Heart,
  576 â”‚       "ideias-brincadeiras-infantis": Play,
  577 â”‚       "ideias-confraternizacoes": Users,
  578 â”‚       "ideias-datas-comemorativas": Calendar,
  579 â”‚       "imagem-para-colorir": Palette,
  580 â”‚       "instrucoes-claras": FileText,
  581 â”‚       "jogos-educacionais-interativos": Gamepad2,
  582 â”‚       "jogos-educativos": Puzzle,
  583 â”‚       "lista-exercicios": FileText,
  584 â”‚       "lista-vocabulario": BookOpen,
  585 â”‚       "maquete": Wrench,
  586 â”‚       "mapa-mental": Brain,
  587 â”‚       "mensagens-agradecimento": Heart,
  588 â”‚       "musica-engajar": Music,
  589 â”‚       "niveador-textos": BookOpen,
  590 â”‚       "objetivos-aprendizagem": Target,
  591 â”‚       "palavras-cruzadas": Puzzle,
  592 â”‚       "pei-pdi": Heart,
  593 â”‚       "perguntas-taxonomia-bloom": MessageSquare,
  594 â”‚       "pergunte-texto": MessageSquare,
  595 â”‚       "plano-aula": BookOpen,
  596 â”‚       "plano-ensino": BookOpen,
  597 â”‚       "plano-recuperacao": Heart,
  598 â”‚       "projeto": Wrench,
  599 â”‚       "projeto-vida": Star,
  600 â”‚       "proposta-redacao": PenTool,
  601 â”‚       "prova": CheckSquare,
  602 â”‚       "questoes-pdf": FileText,
  603 â”‚       "questoes-site": Globe,
  604 â”‚       "questoes-texto": FileText,
  605 â”‚       "questoes-video": Video,
  606 â”‚       "redacao": PenTool,
  607 â”‚       "reescritor-texto": PenTool,
  608 â”‚       "reflexao-incidente": MessageSquare,
  609 â”‚       "relatorio": FileText,
  610 â”‚       "relatorio-desempenho": Trophy,
  611 â”‚       "resposta-email": Mail,
  612 â”‚       "revisor-gramatical": CheckSquare,
  613 â”‚       "revisao-guiada": BookOpen,
  614 â”‚       "resumo": FileText,
  615 â”‚       "resumo-texto": FileText,
  616 â”‚       "resumo-video": Video,
  617 â”‚       "sequencia-didatica": BookOpen,
  618 â”‚       "simulado": CheckSquare,
  619 â”‚       "sugestoes-intervencao": Lightbulb,
  620 â”‚       "tabela-apoio": Puzzle,
  621 â”‚       "tarefa-adaptada": Heart,
  622 â”‚       "texto-apoio": BookOpen,
  623 â”‚       "gerar-questoes": PenTool,
  624 â”‚       "apresentacao-slides": Target,
  625 â”‚       "tornar-relevante": Star
  626 â”‚     };
  627 â”‚ 
  628 â”‚     // Verifica se existe mapeamento direto para o ID
  629 â”‚     if (uniqueIconMapping[activityId]) {
  630 â”‚       return uniqueIconMapping[activityId];
  631 â”‚     }
  632 â”‚ 
  633 â”‚     // Sistema de fallback com hash consistente para IDs nÃ£o mapeados
  634 â”‚     const fallbackIcons = [
  635 â”‚       BookOpen, FileText, PenTool, Search, Brain,
  636 â”‚       Users, MessageSquare, Presentation, ThumbsUp, Heart,
  637 â”‚       Wrench, Target, Compass, Trophy, Edit3,
  638 â”‚       Calendar, Clock, CheckSquare, Star, Award,
  639 â”‚       Microscope, Calculator, Eye, Globe, MapPin,
  640 â”‚       Music, Palette, Camera, Video, Headphones,
  641 â”‚       Lightbulb, Zap, Flag, Key, Shield,
  642 â”‚       TreePine, Sun, Cloud, Home, Car
  643 â”‚     ];
  644 â”‚ 
  645 â”‚     // Gera hash consistente baseado no ID
  646 â”‚     let hash = 0;
  647 â”‚     for (let i = 0; i < activityId.length; i++) {
  648 â”‚       const char = activityId.charCodeAt(i);
  649 â”‚       hash = ((hash << 5) - hash) + char;
  650 â”‚       hash = hash & hash;
  651 â”‚     }
  652 â”‚ 
  653 â”‚     const iconIndex = Math.abs(hash) % fallbackIcons.length;
  654 â”‚     return fallbackIcons[iconIndex];
  655 â”‚   };
  656 â”‚ 
  657 â”‚   const [selectedTrilhasCount, setSelectedTrilhasCount] = useState(0);
  658 â”‚ 
  659 â”‚   useEffect(() => {
  660 â”‚     const trilhasActivityIds = [
  661 â”‚       'projeto-pesquisa',
  662 â”‚       'projeto-cientifico',
  663 â”‚       'projeto-criativo',
  664 â”‚       'projeto-colaborativo',
  665 â”‚       'projeto-individual',
  666 â”‚       'projeto-inovacao',
  667 â”‚       'projeto-sustentabilidade',
  668 â”‚       'projeto-social',
  669 â”‚       'projeto-tecnologico',
  670 â”‚       'projeto-artistico',
  671 â”‚       'projeto-empreendedor',
  672 â”‚       'projeto-interdisciplinar',
  673 â”‚       'projeto-experimental',
  674 â”‚       'projeto-aplicado',
  675 â”‚       'projeto-extensao',
  676 â”‚       'projeto-integrador',
  677 â”‚       'projeto-final',
  678 â”‚     ];
  679 â”‚ 
  680 â”‚     const selectedTrilhas = selectedActivities2.filter(activity =>
  681 â”‚       trilhasActivityIds.includes(activity.id)
  682 â”‚     );
  683 â”‚ 
  684 â”‚     setSelectedTrilhasCount(selectedTrilhas.length);
  685 â”‚   }, [selectedActivities2]);
  686 â”‚ 
  687 â”‚   // Adicionar preenchimento automÃ¡tico dos campos do modal com dados da IA
  688 â”‚   const [selectedActivity, setSelectedActivity] = useState<ActionPlanItem | null>(null);
  689 â”‚   const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  690 â”‚ 
  691 â”‚   const handleEditActivity = (activity: any) => {
  692 â”‚     console.log('ðŸ”§ Editando atividade:', activity.id);
  693 â”‚ 
  694 â”‚         // Buscar dados da atividade no action plan se disponÃ­vel
  695 â”‚     const actionPlanActivity = actionPlan?.find(item => item.id === activity.id);
  696 â”‚ 
  697 â”‚     if (actionPlanActivity?.customFields && Object.keys(actionPlanActivity.customFields).length > 0) {
  698 â”‚       console.log('ðŸ“‹ Preenchendo automaticamente com dados da IA:', actionPlanActivity.customFields);
  699 â”‚ 
  700 â”‚       // Preparar dados automÃ¡ticos para preenchimento do modal
  701 â”‚       const autoDataKey = `auto_activity_data_${activity.id}`;
  702 â”‚       const autoFormData = {
  703 â”‚         title: actionPlanActivity.title || activity.title,
  704 â”‚         description: actionPlanActivity.description || activity.description,
  705 â”‚         subject: actionPlanActivity.customFields['Disciplina'] || 'PortuguÃªs',
  706 â”‚         theme: actionPlanActivity.customFields['Tema'] || '',
  707 â”‚         schoolYear: actionPlanActivity.customFields['Ano de Escolaridade'] || '',
  708 â”‚         numberOfQuestions: actionPlanActivity.customFields['Quantidade de QuestÃµes'] || '10',
  709 â”‚         difficultyLevel: actionPlanActivity.customFields['NÃ­vel de Dificuldade'] || 'MÃ©dio',
  710 â”‚         questionModel: actionPlanActivity.customFields['Modelo de QuestÃµes'] || '',
  711 â”‚         sources: actionPlanActivity.customFields['Fontes'] || '',
  712 â”‚         objectives: actionPlanActivity.customFields['Objetivos'] || '',
  713 â”‚         materials: actionPlanActivity.customFields['Materiais'] || '',
  714 â”‚         instructions: actionPlanActivity.customFields['InstruÃ§Ãµes'] || '',
  715 â”‚         evaluation: actionPlanActivity.customFields['CritÃ©rios de CorreÃ§Ã£o'] || actionPlanActivity.customFields['CritÃ©rios de AvaliaÃ§Ã£o'] || ''
  716 â”‚       };
  717 â”‚ 
  718 â”‚       // Salvar dados automÃ¡ticos no localStorage para o modal usar
  719 â”‚       const autoData = {
  720 â”‚         formData: autoFormData,
  721 â”‚         customFields: actionPlanActivity.customFields,
  722 â”‚         timestamp: Date.now()
  723 â”‚       };
  724 â”‚ 
  725 â”‚       localStorage.setItem(autoDataKey, JSON.stringify(autoData));
  726 â”‚       console.log('ðŸ’¾ Dados automÃ¡ticos salvos para:', activity.id, autoFormData);
  727 â”‚     }
  728 â”‚ 
  729 â”‚     setSelectedActivity(activity);
  730 â”‚     setIsEditModalOpen(true);
  731 â”‚   };
  732 â”‚ 
  733 â”‚   return (
  734 â”‚     <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:734:4" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="734" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20rounded-2xl%20p-6%20shadow-2xl%20border%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F30%20bg-white%20dark%3Abg-%5B%23021321%5D%22%7D"
  735 â”‚       initial={{ opacity: 0, scale: 0.8, y: 50 }}
  736 â”‚       animate={{ opacity: 1, scale: 1, y: 0 }}
  737 â”‚       exit={{ opacity: 0, scale: 0.8, y: -50 }}
  738 â”‚       transition={{
  739 â”‚         duration: 0.6,
  740 â”‚         ease: [0.25, 0.1, 0.25, 1],
  741 â”‚         type: "spring",
  742 â”‚         stiffness: 100,
  743 â”‚         damping: 15,
  744 â”‚       }}
  745 â”‚       className="relative rounded-2xl p-6 shadow-2xl border border-[#FF6B00]/30 dark:border-[#FF6B00]/30 bg-white dark:bg-[#021321]"
  746 â”‚       style={{
  747 â”‚         width: "1353px",
  748 â”‚         height: "773px"
  749 â”‚       }}
  750 â”‚       data-theme="adaptive"
  751 â”‚     >
  752 â”‚       {/* CabeÃ§alho Persistente Fixo */}
  753 â”‚       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:753:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="753" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-0%20left-0%20right-0%20h-20%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%20to-%5B%23FF9248%5D%20rounded-t-2xl%20flex%20items-center%20justify-between%20px-6%20z-0%22%7D" className="absolute top-0 left-0 right-0 h-20 bg-gradient-to-r from-[#FF6B00] to-[#FF9248] rounded-t-2xl flex items-center justify-between px-6 z-0">
  754 â”‚         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:754:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="754" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  755 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:755:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="755" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F20%20rounded-lg%20flex%20items-center%20justify-center%22%7D" className="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
  756 â”‚             {step === "contextualization" ? (
  757 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:757:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="757" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  758 â”‚                 className="w-7 h-7 text-white"
  759 â”‚                 fill="none"
  760 â”‚                 viewBox="0 0 24 24"
  761 â”‚                 stroke="currentColor"
  762 â”‚               >
  763 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:763:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="763" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  764 â”‚                   strokeLinecap="round"
  765 â”‚                   strokeLinejoin="round"
  766 â”‚                   strokeWidth={2}
  767 â”‚                   d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
  768 â”‚                 />
  769 â”‚               </svg>
  770 â”‚             ) : step === "actionPlan" ? (
  771 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:771:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="771" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  772 â”‚                 className="w-7 h-7 text-white"
  773 â”‚                 fill="none"
  774 â”‚                 viewBox="0 0 24 24"
  775 â”‚                 stroke="currentColor"
  776 â”‚               >
  777 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:777:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="777" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  778 â”‚                   strokeLinecap="round"
  779 â”‚                   strokeLinejoin="round"
  780 â”‚                   strokeWidth={2}
  781 â”‚                   d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
  782 â”‚                 />
  783 â”‚               </svg>
  784 â”‚             ) : (
  785 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:785:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="785" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%20animate-spin%22%7D"
  786 â”‚                 className="w-7 h-7 text-white animate-spin"
  787 â”‚                 fill="none"
  788 â”‚                 viewBox="0 0 24 24"
  789 â”‚                 stroke="currentColor"
  790 â”‚               >
  791 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:791:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="791" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  792 â”‚                   strokeLinecap="round"
  793 â”‚                   strokeLinejoin="round"
  794 â”‚                   strokeWidth={2}
  795 â”‚                   d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
  796 â”‚                 />
  797 â”‚               </svg>
  798 â”‚             )}
  799 â”‚           </div>
  800 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:800:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="800" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  801 â”‚             <h1 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:801:12" data-lov-name="h1"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="801" data-component-file="CardDeConstrucao.tsx" data-component-name="h1" data-component-content="%7B%22className%22%3A%22text-white%20font-bold%20text-2xl%22%7D" className="text-white font-bold text-2xl">
  802 â”‚               {step === "contextualization"
  803 â”‚                 ? "Quiz de ContextualizaÃ§Ã£o"
  804 â”‚                 : step === "actionPlan"
  805 â”‚                   ? "Plano de AÃ§Ã£o"
  806 â”‚                   : step === "generating"
  807 â”‚                     ? "Gerando ConteÃºdo..."
  808 â”‚                     : step === "activities"
  809 â”‚                       ? "ConstruÃ§Ã£o de Atividades"
  810 â”‚                       : "School Power"}
  811 â”‚             </h1>
  812 â”‚           </div>
  813 â”‚         </div>
  814 â”‚ 
  815 â”‚         {/* Barra de Progresso */}
  816 â”‚         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:816:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="816" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  817 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:817:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="817" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20flex%20items-center%20justify-between%20w-44%22%7D" className="relative flex items-center justify-between w-44">
  818 â”‚             {/* Background progress line */}
  819 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:819:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="819" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%2F30%20rounded-full%20z-0%22%7D" className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white/30 rounded-full z-0" style={{ left: '16px', right: '16px' }}></div>
  820 â”‚ 
  821 â”‚             {/* Active progress line */}
  822 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:822:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="822" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%20rounded-full%20z-0%20transition-all%20duration-500%20ease-out%22%7D" 
  823 â”‚               className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white rounded-full z-0 transition-all duration-500 ease-out"
  824 â”‚               style={{ 
  825 â”‚                 left: '16px',
  826 â”‚                 width: `${
  827 â”‚                   step === "contextualization" ? "0%" :
  828 â”‚                   step === "actionPlan" ? "50%" :
  829 â”‚                   (step === "generating" || step === "generatingActivities" || step === "activities") ? "100%" : "0%"
  830 â”‚                 }`
  831 â”‚               }}
  832 â”‚             ></div>
  833 â”‚ 
  834 â”‚             {/* Step indicators */}
  835 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:835:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="835" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  836 â”‚               step === "contextualization" ? 'bg-white border-white text-[#FF6B00]' : 'bg-[#FF6B00] border-white text-white'
  837 â”‚             }`}>
  838 â”‚               {step === "contextualization" ? (
  839 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:839:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="839" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%221%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">1</span>
  840 â”‚               ) : (
  841 â”‚                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:841:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="841" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  842 â”‚                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:842:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="842" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  843 â”‚                 </svg>
  844 â”‚               )}
  845 â”‚             </div>
  846 â”‚ 
  847 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:847:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="847" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  848 â”‚               step === "actionPlan" ? 'bg-white border-white text-[#FF6B00]' :
  849 â”‚               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-[#FF6B00] border-white text-white' :
  850 â”‚               'bg-white/20 border-white/30 text-white'
  851 â”‚             }`}>
  852 â”‚               {step === "actionPlan" ? (
  853 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:853:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="853" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  854 â”‚               ) : (step === "generating" || step === "generatingActivities" || step === "activities") ? (
  855 â”‚                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:855:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="855" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  856 â”‚                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:856:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="856" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  857 â”‚                 </svg>
  858 â”‚               ) : (
  859 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:859:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="859" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  860 â”‚               )}
  861 â”‚             </div>
  862 â”‚ 
  863 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:863:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="863" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  864 â”‚               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-white border-white text-[#FF6B00]' : 'bg-white/20 border-white/30 text-white'
  865 â”‚             }`}>
  866 â”‚               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:866:14" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="866" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%223%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">3</span>
  867 â”‚             </div>
  868 â”‚           </div>
  869 â”‚         </div>
  870 â”‚       </div>
  871 â”‚ 
  872 â”‚       {/* RenderizaÃ§Ã£o condicional baseada no step */}
  873 â”‚       {step === "generating" || step === "generatingActivities" ? (
  874 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:874:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="874" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20flex%20flex-col%20items-center%20justify-center%20h-full%20text-center%20px-4%20pt-16%22%7D"
  875 â”‚           className="relative z-10 flex flex-col items-center justify-center h-full text-center px-4 pt-16"
  876 â”‚           initial={{ opacity: 0 }}
  877 â”‚           animate={{ opacity: 1 }}
  878 â”‚           transition={{ duration: 0.3 }}
  879 â”‚         >
  880 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:880:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="880" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20mb-4%22%7D" className="relative mb-4">
  881 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:881:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="881" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22animate-spin%20rounded-full%20h-16%20w-16%20border-4%20border-%5B%23FF6B00%5D%2F20%20border-t-%5B%23FF6B00%5D%20mx-auto%22%7D" className="animate-spin rounded-full h-16 w-16 border-4 border-[#FF6B00]/20 border-t-[#FF6B00] mx-auto"></div>
  882 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:882:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="882" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-full%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-transparent%20animate-pulse%22%7D" className="absolute inset-0 rounded-full bg-gradient-to-r from-[#FF6B00]/10 to-transparent animate-pulse"></div>
  883 â”‚           </div>
  884 â”‚           <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:884:10" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="884" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-xl%20sm%3Atext-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-3%22%7D" className="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-3">
  885 â”‚             {step === "generating"
  886 â”‚               ? "ðŸ¤– Analisando com IA Gemini"
  887 â”‚               : "ðŸŽ¯ Gerando Atividades"}
  888 â”‚           </h3>
  889 â”‚           <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:889:10" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="889" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-700%20dark%3Atext-gray-300%20mb-4%20max-w-lg%20text-sm%20sm%3Atext-base%22%7D" className="text-gray-700 dark:text-gray-300 mb-4 max-w-lg text-sm sm:text-base">
  890 â”‚             {step === "generating"
  891 â”‚               ? "A IA estÃ¡ processando sua mensagem e contexto para criar um plano de aÃ§Ã£o personalizado..."
  892 â”‚               : "As atividades aprovadas estÃ£o sendo geradas automaticamente pelo School Power..."}
  893 â”‚           </p>
  894 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:894:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="894" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-orange-100%2F20%20dark%3Ato-%5B%2329335C%5D%2F10%20rounded-lg%20p-3%20sm%3Ap-4%20mb-4%20border%20border-%5B%23FF6B00%5D%2F20%20max-w-md%20w-full%22%7D" className="bg-gradient-to-r from-[#FF6B00]/10 to-orange-100/20 dark:to-[#29335C]/10 rounded-lg p-3 sm:p-4 mb-4 border border-[#FF6B00]/20 max-w-md w-full">
  895 â”‚             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:895:12" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="895" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-xs%20sm%3Atext-sm%20text-gray-700%20dark%3Atext-gray-300%20leading-relaxed%22%7D" className="text-xs sm:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
  896 â”‚               {step === "generating" ? (
  897 â”‚                 <>
  898 â”‚                   âœ¨ Consultando 137 atividades disponÃ­veis
  899 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:899:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="899" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  900 â”‚                   ðŸŽ¯ Personalizando para seu contexto especÃ­fico
  901 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:901:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="901" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  902 â”‚                   ðŸ“ Gerando sugestÃµes inteligentes
  903 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:903:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="903" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  904 â”‚                   ðŸ” Validando compatibilidade das atividades
  905 â”‚                 </>
  906 â”‚               ) : (
  907 â”‚                 <>
  908 â”‚                   âœ… Personalizando conteÃºdo das atividades
  909 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:909:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="909" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  910 â”‚                   ðŸŽ¨ Criando materiais visuais
  911 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:911:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="911" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  912 â”‚                   ðŸ“ Formatando atividades finais
  913 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:913:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="913" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  914 â”‚                   ðŸš€ Preparando download
  915 â”‚                 </>
  916 â”‚               )}
  917 â”‚             </p>
  918 â”‚           </div>
  919 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:919:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="919" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20justify-center%22%7D" className="flex gap-3 justify-center">
  920 â”‚             {onResetFlow && (
  921 â”‚               <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:921:14" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="921" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22px-4%20py-2%20text-sm%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-lg%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
  922 â”‚                 onClick={onResetFlow}
  923 â”‚                 className="px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
  924 â”‚               >
  925 â”‚                 Cancelar
  926 â”‚               </button>
  927 â”‚             )}
  928 â”‚           </div>
  929 â”‚         </motion.div>
  930 â”‚       ) : step === "activities" ? (
  931 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:931:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="931" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  932 â”‚           key="activities-content"
  933 â”‚           initial={{ opacity: 0, x: 20 }}
  934 â”‚           animate={{ opacity: 1, x: 0 }}
  935 â”‚           transition={{ duration: 0.3 }}
  936 â”‚           className="relative z-10 h-full flex flex-col pt-16"
  937 â”‚         >
  938 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:938:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="938" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-end%20mb-4%22%7D" className="flex items-center justify-end mb-4">
  939 â”‚             <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:939:12" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="939" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Voltar%20ao%20in%C3%ADcio%22%2C%22className%22%3A%22px-3%20py-2%20text-sm%20text-gray-600%20hover%3Atext-gray-900%20dark%3Atext-gray-400%20dark%3Ahover%3Atext-white%20transition-colors%22%7D"
  940 â”‚               onClick={onResetFlow}
  941 â”‚               className="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
  942 â”‚             >
  943 â”‚               Voltar ao inÃ­cio
  944 â”‚             </button>
  945 â”‚           </div>
  946 â”‚ 
  947 â”‚           {/* Interface de ConstruÃ§Ã£o */}
  948 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:948:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="948" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-hidden%22%7D" className="flex-1 overflow-hidden">
  949 â”‚             {console.log('ðŸŽ¯ CardDeConstrucao: Passando atividades para ConstructionInterface:', selectedActivities2)}
  950 â”‚             <ConstructionInterface data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:950:12" data-lov-name="ConstructionInterface"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="950" data-component-file="CardDeConstrucao.tsx" data-component-name="ConstructionInterface" data-component-content="%7B%7D" approvedActivities={selectedActivities2} handleEditActivity={handleEditActivity} />
  951 â”‚           </div>
  952 â”‚         </motion.div>
  953 â”‚       ) : (
  954 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:954:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="954" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  955 â”‚           className="relative z-10 h-full flex flex-col pt-16"
  956 â”‚           initial={{ y: 20, opacity: 0 }}
  957 â”‚           animate={{ y: 0, opacity: 1 }}
  958 â”‚           transition={{ delay: 0.2, duration: 0.5 }}
  959 â”‚         >
  960 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:960:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="960" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22text-center%20mb-4%20sm%3Amb-6%22%7D" className="text-center mb-4 sm:mb-6"></div>
  961 â”‚ 
  962 â”‚           {step === "contextualization" ? (
  963 â”‚             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:963:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="963" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
  964 â”‚               key="contextualization-content"
  965 â”‚               initial={{ opacity: 0, x: -20 }}
  966 â”‚               animate={{ opacity: 1, x: 0 }}
  967 â”‚               transition={{ duration: 0.3 }}
  968 â”‚               className="flex-1 flex flex-col overflow-hidden"
  969 â”‚             >
  970 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:970:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="970" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20space-y-3%20sm%3Aspace-y-4%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
  971 â”‚                 className="flex-1 overflow-y-auto space-y-3 sm:space-y-4 mb-3 sm:mb-4 pr-1 sm:pr-2"
  972 â”‚                 style={{
  973 â”‚                   maxHeight: "calc(100% - 80px)",
  974 â”‚                   scrollbarWidth: "thin",
  975 â”‚                   scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
  976 â”‚                 }}
  977 â”‚               >
  978 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:978:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="978" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  979 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:979:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="979" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9A%20Quais%20mat%C3%A9rias%20e%20temas%20ser%C3%A3o%20trabalhados%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  980 â”‚                     ðŸ“š Quais matÃ©rias e temas serÃ£o trabalhados? *
  981 â”‚                   </label>
  982 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:982:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="982" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20as%20mat%C3%A9rias%20e%20temas%20que%20voc%C3%AA%20quer%20estudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  983 â”‚                     value={formData.materias}
  984 â”‚                     onChange={(e) =>
  985 â”‚                       handleInputChange("materias", e.target.value)
  986 â”‚                     }
  987 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
  988 â”‚                     rows={2}
  989 â”‚                     placeholder="Descreva as matÃ©rias e temas que vocÃª quer estudar..."
  990 â”‚                   />
  991 â”‚                 </div>
  992 â”‚ 
  993 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:993:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="993" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  994 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:994:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="994" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Qual%20o%20p%C3%BAblico-alvo%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  995 â”‚                     ðŸŽ¯ Qual o pÃºblico-alvo? *
  996 â”‚                   </label>
  997 â”‚                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:997:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="997" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Ensino%20M%C3%A9dio%2C%203%C2%BA%20ano%2C%20vestibular...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  998 â”‚                     type="text"
  999 â”‚                     value={formData.publicoAlvo}
 1000 â”‚                     onChange={(e) =>
 1001 â”‚                       handleInputChange("publicoAlvo", e.target.value)
 1002 â”‚                     }
 1003 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1004 â”‚                     placeholder="Ex: Ensino MÃ©dio, 3Âº ano, vestibular..."
 1005 â”‚                   />
 1006 â”‚                 </div>
 1007 â”‚ 
 1008 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1008:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1008" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1009 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1009:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1009" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%E2%9A%A0%EF%B8%8F%20Quais%20restri%C3%A7%C3%B5es%20ou%20prefer%C3%AAncias%20espec%C3%ADficas%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1010 â”‚                     âš ï¸ Quais restriÃ§Ãµes ou preferÃªncias especÃ­ficas? *
 1011 â”‚                   </label>
 1012 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1012:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1012" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20limita%C3%A7%C3%B5es%20de%20tempo%2C%20dificuldades%20espec%C3%ADficas%2C%20etc...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1013 â”‚                     value={formData.restricoes}
 1014 â”‚                     onChange={(e) =>
 1015 â”‚                       handleInputChange("restricoes", e.target.value)
 1016 â”‚                     }
 1017 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1018 â”‚                     rows={2}
 1019 â”‚                     placeholder="Descreva limitaÃ§Ãµes de tempo, dificuldades especÃ­ficas, etc..."
 1020 â”‚                   />
 1021 â”‚                 </div>
 1022 â”‚ 
 1023 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1023:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1023" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1024 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1024:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1024" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%85%20Per%C3%ADodo%20de%20entrega%20ou%20datas%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1025 â”‚                     ðŸ“… PerÃ­odo de entrega ou datas importantes
 1026 â”‚                   </label>
 1027 â”‚                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1027:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1027" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Prova%20em%202%20semanas%2C%20ENEM%20em%20novembro...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1028 â”‚                     type="text"
 1029 â”‚                     value={formData.datasImportantes}
 1030 â”‚                     onChange={(e) =>
 1031 â”‚                       handleInputChange("datasImportantes", e.target.value)
 1032 â”‚                     }
 1033 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1034 â”‚                     placeholder="Ex: Prova em 2 semanas, ENEM em novembro..."
 1035 â”‚                   />
 1036 â”‚                 </div>
 1037 â”‚ 
 1038 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1038:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1038" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1039 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1039:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1039" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20Outras%20observa%C3%A7%C3%B5es%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1040 â”‚                     ðŸ“ Outras observaÃ§Ãµes importantes
 1041 â”‚                   </label>
 1042 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1042:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1042" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Informa%C3%A7%C3%B5es%20adicionais%20que%20podem%20ajudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1043 â”‚                     value={formData.observacoes}
 1044 â”‚                     onChange={(e) =>
 1045 â”‚                       handleInputChange("observacoes", e.target.value)
 1046 â”‚                     }
 1047 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1048 â”‚                     rows={2}
 1049 â”‚                     placeholder="InformaÃ§Ãµes adicionais que podem ajudar..."
 1050 â”‚                   />
 1051 â”‚                 </div>
 1052 â”‚               </div>
 1053 â”‚ 
 1054 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1054:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1054" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1055 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1055:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1055" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20text-sm%20sm%3Atext-base%22%7D"
 1056 â”‚                   onClick={handleSubmitContextualization}
 1057 â”‚                   disabled={!isContextualizationValid || isLoading}
 1058 â”‚                   className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
 1059 â”‚                 >
 1060 â”‚                   {isLoading ? "Processando..." : "Gerar Plano de Aula"}
 1061 â”‚                 </button>
 1062 â”‚               </div>
 1063 â”‚             </motion.div>
 1064 â”‚           ) : (
 1065 â”‚             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1065:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1065" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
 1066 â”‚               key="actionplan-content"
 1067 â”‚               initial={{ opacity: 0, x: 20 }}
 1068 â”‚               animate={{ opacity: 1, x: 0 }}
 1069 â”‚               transition={{ duration: 0.3 }}
 1070 â”‚               className="flex-1 flex flex-col overflow-hidden"
 1071 â”‚             >
 1072 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1072:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1072" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%20sm%3Amb-4%22%7D" className="flex items-center justify-between mb-3 sm:mb-4">
 1073 â”‚                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1073:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1073" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-base%20sm%3Atext-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%22%7D" className="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
 1074 â”‚                   {showAddActivityInterface ? "Adicionar Atividade Manual" : "Atividades Sugeridas"}
 1075 â”‚                 </h3>
 1076 â”‚                 {!showAddActivityInterface && (
 1077 â”‚                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1077:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1077" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D" className="flex items-center gap-2">
 1078 â”‚                     <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1078:20" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1078" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-%5B%23FF6B00%5D%2F10%20to-%5B%23FF9248%5D%2F5%20hover%3Afrom-%5B%23FF6B00%5D%2F20%20hover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-%5B%23FF6B00%5D%2F30%20hover%3Aborder-%5B%23FF6B00%5D%2F50%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
 1079 â”‚                       onClick={() => setShowAddActivityInterface(true)}
 1080 â”‚                       className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-[#FF6B00]/10 to-[#FF9248]/5 hover:from-[#FF6B00]/20 hover:to-[#FF9248]/10 border border-[#FF6B00]/30 hover:border-[#FF6B00]/50 transition-all duration-300 shadow-sm hover:shadow-md"
 1081 â”‚                       title="Adicionar Atividade Manual"
 1082 â”‚                     >
 1083 â”‚                       <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1083:22" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1083" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1084 â”‚                         <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1084:24" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1084" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1085 â”‚                       </svg>
 1086 â”‚                     </button>
 1087 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1087:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1087" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22selecionada%22%2C%22className%22%3A%22bg-%5B%23FF6B00%5D%2F10%20text-%5B%23FF6B00%5D%20px-2%20sm%3Apx-3%20py-1%20rounded-full%20text-xs%20sm%3Atext-sm%20font-medium%22%7D" className="bg-[#FF6B00]/10 text-[#FF6B00] px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium">
 1088 â”‚                       {selectedActivities2.length} selecionada
 1089 â”‚                       {selectedActivities2.length !== 1 ? "s" : ""}
 1090 â”‚                       {selectedTrilhasCount > 0 && (
 1091 â”‚                         <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1091:24" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1091" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22(%20trilha%20)%22%2C%22className%22%3A%22ml-1%20text-orange-600%22%7D" className="ml-1 text-orange-600">
 1092 â”‚                           ({selectedTrilhasCount} trilha{selectedTrilhasCount !== 1 ? "s" : ""})
 1093 â”‚                         </span>
 1094 â”‚                       )}
 1095 â”‚                     </div>
 1096 â”‚                     <GridToggleComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1096:20" data-lov-name="GridToggleComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1096" data-component-file="CardDeConstrucao.tsx" data-component-name="GridToggleComponent" data-component-content="%7B%7D" 
 1097 â”‚                       viewMode={viewMode}
 1098 â”‚                       onToggle={() => setViewMode(viewMode === 'list' ? 'grid' : 'list')}
 1099 â”‚                     />
 1100 â”‚                     <FilterComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1100:20" data-lov-name="FilterComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1100" data-component-file="CardDeConstrucao.tsx" data-component-name="FilterComponent" data-component-content="%7B%7D" 
 1101 â”‚                       activities={getCombinedActivities()}
 1102 â”‚                       selectedActivities2={selectedActivities2}
 1103 â”‚                       onFilterApply={(filterType) => handleFilterApply(filterType)}
 1104 â”‚                     />
 1105 â”‚                   </div>
 1106 â”‚                 )}
 1107 â”‚               </div>
 1108 â”‚ 
 1109 â”‚               {showAddActivityInterface ? (
 1110 â”‚                 <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1110:16" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1110" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
 1111 â”‚                   className="flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2"
 1112 â”‚                   initial={{ opacity: 0, x: 20 }}
 1113 â”‚                   animate={{ opacity: 1, x: 0 }}
 1114 â”‚                   transition={{ duration: 0.3 }}
 1115 â”‚                 >
 1116 â”‚                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1116:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1116" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22space-y-4%22%7D" className="space-y-4">
 1117 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1117:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1117" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1118 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1118:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1118" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20T%C3%ADtulo%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1119 â”‚                         ðŸ“ TÃ­tulo da Atividade *
 1120 â”‚                       </label>
 1121 â”‚                       <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1121:22" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1121" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Lista%20de%20Exerc%C3%ADcios%20sobre%20Fun%C3%A7%C3%B5es%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1122 â”‚                         type="text"
 1123 â”‚                         value={manualActivityForm.title}
 1124 â”‚                         onChange={(e) => handleManualFormChange('title', e.target.value)}
 1125 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1126 â”‚                         placeholder="Ex: Lista de ExercÃ­cios sobre FunÃ§Ãµes"
 1127 â”‚                         maxLength={100}
 1128 â”‚                       />
 1129 â”‚                     </div>
 1130 â”‚ 
 1131 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1131:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1131" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1132 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1132:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1132" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Tipo%20de%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1133 â”‚                         ðŸŽ¯ Tipo de Atividade *
 1134 â”‚                       </label>
 1135 â”‚                       <select data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1135:22" data-lov-name="select"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1135" data-component-file="CardDeConstrucao.tsx" data-component-name="select" data-component-content="%7B%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%22%7D"
 1136 â”‚                         value={manualActivityForm.typeId}
 1137 â”‚                         onChange={(e) => handleManualFormChange('typeId', e.target.value)}
 1138 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm"
 1139 â”‚                       >
 1140 â”‚                         <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1140:24" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1140" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%22text%22%3A%22Selecione%20o%20tipo%20de%20atividade...%22%7D" value="">Selecione o tipo de atividade...</option>
 1141 â”‚                         {schoolPowerActivities.map((activity) => (
 1142 â”‚                           <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1142:26" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1142" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%7D" key={activity.id} value={activity.id}>
 1143 â”‚                             {activity.name}
 1144 â”‚                           </option>
 1145 â”‚                         ))}
 1146 â”‚                       </select>
 1147 â”‚                     </div>
 1148 â”‚ 
 1149 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1149:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1149" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1150 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1150:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1150" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8B%20Descri%C3%A7%C3%A3o%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1151 â”‚                         ðŸ“‹ DescriÃ§Ã£o da Atividade *
 1152 â”‚                       </label>
 1153 â”‚                       <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1153:22" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1153" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20detalhadamente%20o%20que%20voc%C3%AA%20quer%20que%20seja%20feito%20nesta%20atividade...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1154 â”‚                         value={manualActivityForm.description}
 1155 â”‚                         onChange={(e) => handleManualFormChange('description', e.target.value)}
 1156 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1157 â”‚                         rows={4}
 1158 â”‚                         placeholder="Descreva detalhadamente o que vocÃª quer que seja feito nesta atividade..."
 1159 â”‚                         maxLength={500}
 1160 â”‚                       />
 1161 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1161:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1161" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%2F500%20caracteres%22%2C%22className%22%3A%22text-xs%20text-gray-500%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-500 dark:text-gray-400 mt-1">
 1162 â”‚                         {manualActivityForm.description.length}/500 caracteres
 1163 â”‚                       </div>
 1164 â”‚                     </div>
 1165 â”‚ 
 1166 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1166:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1166" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D" className="flex gap-3 pt-4">
 1167 â”‚                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1167:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1167" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-xl%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
 1168 â”‚                         onClick={() => setShowAddActivityInterface(false)}
 1169 â”‚                         className="flex-1 px-4 py-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
 1170 â”‚                       >
 1171 â”‚                         Cancelar
 1172 â”‚                       </button>
 1173 â”‚                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1173:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1173" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Adicionar%20Atividade%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D"
 1174 â”‚                         onClick={handleAddManualActivity}
 1175 â”‚                         disabled={!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()}
 1176 â”‚                         className="flex-1 px-4 py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
 1177 â”‚                       >
 1178 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1178:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1178" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%22%7D" className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1179 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1179:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1179" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1180 â”‚                         </svg>
 1181 â”‚                         Adicionar Atividade
 1182 â”‚                       </button>
 1183 â”‚                     </div>
 1184 â”‚                   </div>
 1185 â”‚                 </motion.div>
 1186 â”‚               ) : (
 1187 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1187:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1187" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D"
 1188 â”‚                   className={`flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2 ${
 1189 â”‚                     viewMode === 'grid' 
 1190 â”‚                       ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 auto-rows-min' 
 1191 â”‚                       : 'space-y-2 sm:space-y-3'
 1192 â”‚                   }`}
 1193 â”‚                   style={{
 1194 â”‚                     maxHeight: "calc(100% - 80px)",
 1195 â”‚                     scrollbarWidth: "thin",
 1196 â”‚                     scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
 1197 â”‚                   }}
 1198 â”‚                 >
 1199 â”‚                   {(filterState === 'selected' 
 1200 â”‚                     ? selectedActivities2 
 1201 â”‚                     : getCombinedActivities()
 1202 â”‚                   )?.map((activity, index) => {
 1203 â”‚                     const isSelected = selectedActivities2.some(
 1204 â”‚                       (item) => item.id === activity.id,
 1205 â”‚                     );
 1206 â”‚ 
 1207 â”‚                     const badgeProps = getTrilhasBadgeProps(activity.id);
 1208 â”‚ 
 1209 â”‚                     return (
 1210 â”‚                       <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1210:22" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1210" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%7D"
 1211 â”‚                         key={activity.id}
 1212 â”‚                         className={`relative p-6 border-2 transition-all duration-300 cursor-pointer ${
 1213 â”‚                           viewMode === 'grid' ? 'rounded-[32px]' : 'rounded-[32px] mb-4'
 1214 â”‚                         } ${
 1215 â”‚                           isSelected
 1216 â”‚                             ? 'border-[#FF6B00] bg-[#FF6B00]/5 dark:bg-[#FF6B00]/10 shadow-lg transform scale-[1.02]'
 1217 â”‚                             : 'border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-[#FF6B00]/50 hover:shadow-md'
 1218 â”‚                         }`}
 1219 â”‚                         initial={{ opacity: 0, y: 20 }}
 1220 â”‚                         animate={{ opacity: 1, y: 0 }}
 1221 â”‚                         transition={{ duration: 0.3, delay: index * 0.05 }}
 1222 â”‚                         onClick={() => handleActivityToggle(activity)}
 1223 â”‚                       >
 1224 â”‚                         {/* Badge Manual - para atividades manuais */}
 1225 â”‚                         {activity.isManual && (
 1226 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1226:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1226" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`absolute top-4 z-20 ${badgeProps.showBadge ? 'right-[131px]' : 'right-4'}`}>
 1227 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1227:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1227" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20px-4%20py-2%20border-2%20border-purple-500%20rounded-full%20bg-purple-500%2F10%20hover%3Abg-purple-500%2F15%20hover%3Aborder-purple-600%20transition-all%20duration-300%20cursor-default%20hover%3Ascale-105%22%7D" className="flex items-center gap-3 px-4 py-2 border-2 border-purple-500 rounded-full bg-purple-500/10 hover:bg-purple-500/15 hover:border-purple-600 transition-all duration-300 cursor-default hover:scale-105">
 1228 â”‚                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1228:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1228" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-2%20h-6%20min-w-2%20min-h-6%20flex%20items-center%20justify-center%20relative%20flex-shrink-0%22%7D" className="w-2 h-6 min-w-2 min-h-6 flex items-center justify-center relative flex-shrink-0">
 1229 â”‚                                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1229:32" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1229" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-purple-600%20transition-all%20duration-300%20relative%20z-10%22%7D" className="w-5 h-5 text-purple-600 transition-all duration-300 relative z-10" fill="currentColor" viewBox="0 0 20 20">
 1230 â”‚                                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1230:34" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1230" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
 1231 â”‚                                 </svg>
 1232 â”‚                               </div>
 1233 â”‚                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1233:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1233" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Manual%22%2C%22className%22%3A%22text-sm%20font-bold%20text-purple-600%20whitespace-nowrap%20transition-all%20duration-300%22%7D" className="text-sm font-bold text-purple-600 whitespace-nowrap transition-all duration-300">
 1234 â”‚                                 Manual
 1235 â”‚                               </span>                            </div>
 1236 â”‚                           </div>
 1237 â”‚                         )}
 1238 â”‚ 
 1239 â”‚                         {/* Badge Trilhas */}
 1240 â”‚                         {badgeProps.showBadge && (
 1241 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1241:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1241" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-4%20right-4%20z-20%22%7D" className="absolute top-4 right-4 z-20">
 1242 â”‚                             <TrilhasBadge data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1242:28" data-lov-name="TrilhasBadge"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1242" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasBadge" data-component-content="%7B%7D" />
 1243 â”‚                           </div>
 1244 â”‚                         )}
 1245 â”‚ 
 1246 â”‚                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1246:24" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1246" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-start%20gap-4%22%7D" className="flex items-start gap-4">
 1247 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1247:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1247" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%22%7D" className="flex-1">
 1248 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1248:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1248" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D" className="flex items-center gap-3 mb-2">
 1249 â”‚                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1249:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1249" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" 
 1250 â”‚                                 className={`icon-container ${isSelected ? 'active' : ''}`}
 1251 â”‚                                 onClick={(e) => {
 1252 â”‚                                   e.stopPropagation();
 1253 â”‚                                   handleActivityToggle(activity);
 1254 â”‚                                 }}
 1255 â”‚                                 style={{
 1256 â”‚                                   width: '40px',
 1257 â”‚                                   height: '40px',
 1258 â”‚                                   minWidth: '40px',
 1259 â”‚                                   minHeight: '40px',
 1260 â”‚                                   borderRadius: '14px',
 1261 â”‚                                   display: 'flex',
 1262 â”‚                                   alignItems: 'center',
 1263 â”‚                                   justifyContent: 'center',
 1264 â”‚                                   background: isSelected 
 1265 â”‚                                     ? 'linear-gradient(135deg, #FF6E06, #FF8A39)' 
 1266 â”‚                                     : 'rgba(255, 110, 6, 0.1)',
 1267 â”‚                                   transition: 'all 0.3s ease',
 1268 â”‚                                   position: 'relative',
 1269 â”‚                                   overflow: 'hidden',
 1270 â”‚                                   cursor: 'pointer',
 1271 â”‚                                   boxShadow: isSelected 
 1272 â”‚                                     ? '0 6px 12px rgba(255, 110, 6, 0.3)' 
 1273 â”‚                                     : 'none',
 1274 â”‚                                   transform: isSelected ? 'scale(1.05)' : 'scale(1)'
 1275 â”‚                                 }}
 1276 â”‚                               >
 1277 â”‚                                 {isSelected ? (
 1278 â”‚                                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1278:34" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1278" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-white%20transition-all%20duration-300%20relative%20z-10%22%7D" 
 1279 â”‚                                     className="w-5 h-5 text-white transition-all duration-300 relative z-10" 
 1280 â”‚                                     fill="currentColor" 
 1281 â”‚                                     viewBox="0 0 20 20"
 1282 â”‚                                   >
 1283 â”‚                                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1283:36" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1283" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" 
 1284 â”‚                                       fillRule="evenodd" 
 1285 â”‚                                       d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" 
 1286 â”‚                                       clipRule="evenodd"/>
 1287 â”‚                                   </svg>
 1288 â”‚                                 ) : (
 1289 â”‚                                   React.createElement(getIconByActivityId(activity.id), {
 1290 â”‚                                     className: `w-5 h-5 transition-all duration-300 relative z-10`,
 1291 â”‚                                     style: {
 1292 â”‚                                       color: '#FF6E06'
 1293 â”‚                                     }
 1294 â”‚                                   })
 1295 â”‚                                 )}
 1296 â”‚                                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1296:32" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1296" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22icon-glow%22%7D" 
 1297 â”‚                                   className="icon-glow"
 1298 â”‚                                   style={{
 1299 â”‚                                     position: 'absolute',
 1300 â”‚                                     top: '50%',
 1301 â”‚                                     left: '50%',
 1302 â”‚                                     width: '20px',
 1303 â”‚                                     height: '20px',
 1304 â”‚                                     background: 'radial-gradient(circle, rgba(255, 110, 6, 0.5), transparent)',
 1305 â”‚                                     borderRadius: '50%',
 1306 â”‚                                     transform: isSelected 
 1307 â”‚                                       ? 'translate(-50%, -50%) scale(2.2)' 
 1308 â”‚                                       : 'translate(-50%, -50%) scale(0)',
 1309 â”‚                                     transition: 'transform 0.3s ease'
 1310 â”‚                                   }}
 1311 â”‚                                 />
 1312 â”‚                               </div>
 1313 â”‚ 
 1314 â”‚                               <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1314:30" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1314" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20line-clamp-2%20flex-1%20pr-8%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 flex-1 pr-8">
 1315 â”‚                                 {activity.title}
 1316 â”‚                               </h3>
 1317 â”‚                             </div>
 1318 â”‚ 
 1319 â”‚                             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1319:28" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1319" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20leading-relaxed%20line-clamp-3%20mb-3%22%7D" className="text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-3 mb-3">
 1320 â”‚                               {activity.description}
 1321 â”‚                             </p>
 1322 â”‚ 
 1323 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1323:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1323" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8A%20%E2%80%A2%20%E2%8F%B1%EF%B8%8F%22%2C%22className%22%3A%22text-xs%20text-gray-600%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-600 dark:text-gray-400 mt-1">
 1324 â”‚                                         ðŸ“Š {activity.difficulty} â€¢ â±ï¸ {activity.duration || '30 min'}
 1325 â”‚                                       </div>
 1326 â”‚ 
 1327 â”‚                                       {/* Exibir customFields como tags/badges */}
 1328 â”‚                                       {activity.customFields && Object.keys(activity.customFields).length > 0 && (
 1329 â”‚                                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1329:40" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1329" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-3%20flex%20flex-wrap%20gap-2%22%7D" className="mt-3 flex flex-wrap gap-2">
 1330 â”‚                                           {Object.entries(activity.customFields).map(([key, value]) => (
 1331 â”‚                                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1331:44" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1331" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22inline-flex%20items-center%20px-2.5%20py-1%20rounded-full%20text-xs%20font-medium%20bg-gradient-to-r%20from-blue-50%20to-indigo-50%20dark%3Afrom-blue-900%2F30%20dark%3Ato-indigo-900%2F30%20text-blue-700%20dark%3Atext-blue-300%20border%20border-blue-200%20dark%3Aborder-blue-700%20hover%3Afrom-blue-100%20hover%3Ato-indigo-100%20dark%3Ahover%3Afrom-blue-900%2F40%20dark%3Ahover%3Ato-indigo-900%2F40%20transition-all%20duration-200%22%7D" 
 1332 â”‚                                               key={key} 
 1333 â”‚                                               className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-900/40 dark:hover:to-indigo-900/40 transition-all duration-200"
 1334 â”‚                                             >
 1335 â”‚                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1335:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1335" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22%3A%22%2C%22className%22%3A%22font-semibold%22%7D" className="font-semibold">{key}:</span>
 1336 â”‚                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1336:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1336" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22className%22%3A%22ml-1%20truncate%20max-w-%5B150px%5D%22%7D" className="ml-1 truncate max-w-[150px]">{value}</span>
 1337 â”‚                                             </div>
 1338 â”‚                                           ))}
 1339 â”‚                                         </div>
 1340 â”‚                                       )}
 1341 â”‚ 
 1342 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1342:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1342" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-2%22%7D" className="mt-2">
 1343 â”‚                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1343:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1343" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22ID%3A%22%2C%22className%22%3A%22text-xs%20px-2%20py-1%20bg-gray-100%20dark%3Abg-gray-800%20text-gray-500%20dark%3Atext-gray-400%20rounded%22%7D" className="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded">
 1344 â”‚                                 ID: {activity.id}
 1345 â”‚                               </span>
 1346 â”‚                             </div>
 1347 â”‚                           </div>
 1348 â”‚                         </div>
 1349 â”‚ 
 1350 â”‚                         {isSelected && (
 1351 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1351:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1351" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-%5B32px%5D%20border-2%20border-%5B%23FF6B00%5D%20animate-pulse%20opacity-50%20pointer-events-none%22%7D" className="absolute inset-0 rounded-[32px] border-2 border-[#FF6B00] animate-pulse opacity-50 pointer-events-none"></div>
 1352 â”‚                         )}
 1353 â”‚                       </motion.div>
 1354 â”‚                     );
 1355 â”‚                   })}
 1356 â”‚ 
 1357 â”‚                   {filterState === 'selected' && selectedActivities2.length === 0 && (
 1358 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1358:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1358" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1359 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1359:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1359" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1360 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1360:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1360" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1361 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1361:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1361" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
 1362 â”‚                         </svg>
 1363 â”‚                       </div>
 1364 â”‚                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1364:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1364" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20selecionada%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1365 â”‚                         Nenhuma atividade selecionada
 1366 â”‚                       </h3>
 1367 â”‚                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1367:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1367" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Selecione%20algumas%20atividades%20primeiro%20para%20v%C3%AA-las%20aqui%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1368 â”‚                         Selecione algumas atividades primeiro para vÃª-las aqui
 1369 â”‚                       </p>
 1370 â”‚                     </div>
 1371 â”‚                   )}
 1372 â”‚ 
 1373 â”‚                   {getCombinedActivities().length === 0 && (
 1374 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1374:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1374" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1375 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1375:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1375" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1376 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1376:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1376" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1377 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1377:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1377" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1378 â”‚                         </svg>
 1379 â”‚                       </div>
 1380 â”‚                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1380:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1380" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20dispon%C3%ADvel%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1381 â”‚                         Nenhuma atividade disponÃ­vel
 1382 â”‚                       </h3>
 1383 â”‚                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1383:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1383" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Adicione%20atividades%20manuais%20ou%20aguarde%20as%20sugest%C3%B5es%20da%20IA%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1384 â”‚                         Adicione atividades manuais ou aguarde as sugestÃµes da IA
 1385 â”‚                       </p>
 1386 â”‚                     </div>
 1387 â”‚                   )}
 1388 â”‚                 </div>
 1389 â”‚               )}
 1390 â”‚ 
 1391 â”‚               {!showAddActivityInterface && (
 1392 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1392:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1392" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1393 â”‚                   <Button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1393:18" data-lov-name="Button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1393" data-component-file="CardDeConstrucao.tsx" data-component-name="Button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20gap-2%20text-sm%20sm%3Atext-base%22%7D"
 1394 â”‚                     onClick={handleApproveActionPlan}
 1395 â”‚                     disabled={selectedActivities2.length === 0 || isLoading}
 1396 â”‚                     className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base"
 1397 â”‚                   >
 1398 â”‚                     <Target data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1398:20" data-lov-name="Target"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1398" data-component-file="CardDeConstrucao.tsx" data-component-name="Target" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20sm%3Aw-5%20sm%3Ah-5%22%7D" className="w-4 h-4 sm:w-5 sm:h-5" />
 1399 â”‚                     {isLoading
 1400 â”‚                       ? "Processando..."
 1401 â”‚                       : `Aprovar Plano (${selectedActivities2.length})`}
 1402 â”‚                   </Button>
 1403 â”‚                 </div>
 1404 â”‚               )}
 1405 â”‚             </motion.div>
 1406 â”‚           )}
 1407 â”‚         </motion.div>
 1408 â”‚       )}
 1409 â”‚ 
 1410 â”‚       {/* Debug Panel para verificar sistema de Trilhas */}
 1411 â”‚       {actionPlan && (
 1412 â”‚         <TrilhasDebugPanel data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1412:8" data-lov-name="TrilhasDebugPanel"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1412" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasDebugPanel" data-component-content="%7B%7D" 
 1413 â”‚           activities={actionPlan.map(activity => ({ 
 1414 â”‚             id: activity.id, 
 1415 â”‚             title: activity.title 
 1416 â”‚           }))}
 1417 â”‚           isVisible={showTrilhasDebug}
 1418 â”‚         />
 1419 â”‚       )}
 1420 â”‚ 
 1421 â”‚       {/* BotÃ£o para toggle do debug (sÃ³ visÃ­vel em desenvolvimento) */}
 1422 â”‚       {process.env.NODE_ENV === 'development' && actionPlan && (
 1423 â”‚         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1423:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1423" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22fixed%20bottom-4%20left-4%20z-40%20bg-blue-500%20text-white%20px-3%20py-2%20rounded-lg%20text-xs%20font-medium%20shadow-lg%20hover%3Abg-blue-600%20transition-colors%22%7D"
 1424 â”‚           onClick={() => setShowTrilhasDebug(!showTrilhasDebug)}
 1425 â”‚           className="fixed bottom-4 left-4 z-40 bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-medium shadow-lg hover:bg-blue-600 transition-colors"
 1426 â”‚         >
 1427 â”‚           {showTrilhasDebug ? 'ðŸ” Fechar Debug' : 'ðŸ” Debug Trilhas'}
 1428 â”‚         </button>
 1429 â”‚       )}
 1430 â”‚     </motion.div>
 1431 â”‚   );
 1432 â”‚ }
 1433 â”‚ 
 1434 â”‚ import {
 1435 â”‚   AlertDialog,
 1436 â”‚   AlertDialogAction,
 1437 â”‚   AlertDialogCancel,
 1438 â”‚   AlertDialogContent,
 1439 â”‚   AlertDialogDescription,
 1440 â”‚   AlertDialogFooter,
 1441 â”‚   AlertDialogHeader,
 1442 â”‚   AlertDialogTitle,
 1443 â”‚   AlertDialogTrigger,
 1444 â”‚ } from "@/components/ui/alert-dialog"
 1445 â”‚ import {
 1446 â”‚   Form,
 1447 â”‚   FormControl,
 1448 â”‚   FormDescription,
 1449 â”‚   FormField,
 1450 â”‚   FormItem,
 1451 â”‚   FormLabel,
 1452 â”‚   FormMessage,
 1453 â”‚ } from "@/components/ui/form"
 1454 â”‚ import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
 1455 â”‚ import { ScrollArea } from "@/components/ui/scroll-area"
 1456 â”‚ import { Separator } from "@/components/ui/separator"
      Â·          â”€â”€â”€â”€â”¬â”€â”€â”€â”€
      Â·              â•°â”€â”€ `Separator` redefined here
 1457 â”‚ import { Slider } from "@/components/ui/slider"
 1458 â”‚ import { Switch } from "@/components/ui/switch"
 1459 â”‚ import { Textarea } from "@/components/ui/textarea"
      â•°â”€â”€â”€â”€

  Ã— the name `Textarea` is defined multiple times
      â•­â”€[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:21:1]
   21 â”‚   Eye,
   22 â”‚   Play
   23 â”‚ } from 'lucide-react';
   24 â”‚ import { Textarea } from '@/components/ui/textarea';
      Â·          â”€â”€â”€â”€â”¬â”€â”€â”€
      Â·              â•°â”€â”€ previous definition of `Textarea` here
   25 â”‚ import { Label } from '@/components/ui/label';
   26 â”‚ import { Input } from '@/components/ui/input';
   27 â”‚ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 â”‚ import { Separator } from '@/components/ui/separator';
   29 â”‚ import { Progress } from '@/components/ui/progress';
   30 â”‚ import { ConstructionGrid } from './ConstructionGrid';
   31 â”‚ 
   32 â”‚ import { 
   33 â”‚   Wrench, CheckSquare, Filter, 
   34 â”‚   Trophy, Zap, Brain, Heart, 
   35 â”‚   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 â”‚   Microscope, Palette, Music, Camera, Video, Headphones,
   37 â”‚   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 â”‚   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 â”‚   Pause, SkipForward, Volume2, Wifi, Battery,
   40 â”‚   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 â”‚   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 â”‚ } from "lucide-react";
   43 â”‚ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 â”‚ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 â”‚ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 â”‚ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 â”‚ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 â”‚ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 â”‚ import { ConstructionInterface } from './index';
   50 â”‚ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 â”‚ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 â”‚ 
   53 â”‚ // Convert to proper format with name field
   54 â”‚ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 â”‚   ...activity,
   56 â”‚   name: activity.name || activity.title || activity.description
   57 â”‚ }));
   58 â”‚ 
   59 â”‚ export interface ContextualizationData {
   60 â”‚   materias: string;
   61 â”‚   publicoAlvo: string;
   62 â”‚   restricoes: string;
   63 â”‚   datasImportantes?: string;
   64 â”‚   observacoes?: string;
   65 â”‚ }
   66 â”‚ 
   67 â”‚ export interface ActionPlanItem {
   68 â”‚   id: string;
   69 â”‚   title: string;
   70 â”‚   description: string;
   71 â”‚   duration?: string;
   72 â”‚   difficulty?: string;
   73 â”‚   category?: string;
   74 â”‚   type?: string;
   75 â”‚   approved: boolean;
   76 â”‚   isTrilhasEligible?: boolean;
   77 â”‚   customFields?: Record<string, string>;
   78 â”‚   isManual?: boolean;
   79 â”‚ }
   80 â”‚ 
   81 â”‚ interface CardDeConstrucaoProps {
   82 â”‚   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 â”‚   contextualizationData?: ContextualizationData | null;
   84 â”‚   actionPlan?: ActionPlanItem[] | null;
   85 â”‚   onSubmitContextualization: (data: ContextualizationData) => void;
   86 â”‚   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 â”‚   onResetFlow: () => void;
   88 â”‚   isLoading?: boolean;
   89 â”‚ }
   90 â”‚ 
   91 â”‚ export function CardDeConstrucao({ 
   92 â”‚   step, 
   93 â”‚   contextualizationData, 
   94 â”‚   actionPlan, 
   95 â”‚   onSubmitContextualization, 
   96 â”‚   onApproveActionPlan, 
   97 â”‚   onResetFlow,
   98 â”‚   isLoading 
   99 â”‚ }: CardDeConstrucaoProps) {
  100 â”‚   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 â”‚     materias: '',
  102 â”‚     publicoAlvo: '',
  103 â”‚     restricoes: '',
  104 â”‚     datasImportantes: '',
  105 â”‚     observacoes: ''
  106 â”‚   });
  107 â”‚ 
  108 â”‚   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 â”‚   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 â”‚   // Form data for contextualization
  111 â”‚   const [formData, setFormData] = useState<ContextualizationData>({
  112 â”‚     materias: "",
  113 â”‚     publicoAlvo: "",
  114 â”‚     restricoes: "",
  115 â”‚     datasImportantes: "",
  116 â”‚     observacoes: "",
  117 â”‚   });
  118 â”‚ 
  119 â”‚   // Selected activities for action plan
  120 â”‚   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 â”‚ 
  122 â”‚   // Filter state for action plan
  123 â”‚   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 â”‚ 
  125 â”‚   // View mode state (list or grid)
  126 â”‚   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 â”‚ 
  128 â”‚   // Debug state for trilhas system
  129 â”‚   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 â”‚ 
  131 â”‚   // Estado para mostrar a interface de adicionar atividade manual
  132 â”‚   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 â”‚ 
  134 â”‚   // Manual activity addition state
  135 â”‚   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 â”‚ 
  137 â”‚   // Manual activity form state
  138 â”‚   const [manualActivityForm, setManualActivityForm] = useState({
  139 â”‚     title: '',
  140 â”‚     typeId: '',
  141 â”‚     description: ''
  142 â”‚   });
  143 â”‚ 
  144 â”‚   // State for activity building process
  145 â”‚   const [isBuilding, setIsBuilding] = useState(false);
  146 â”‚ 
  147 â”‚   // State for tracking building progress
  148 â”‚   const [progress, setProgress] = useState<{
  149 â”‚     total: number;
  150 â”‚     completed: number;
  151 â”‚     current: string;
  152 â”‚     errors: string[];
  153 â”‚   } | null>(null);
  154 â”‚ 
  155 â”‚   // Function to simulate activity building
  156 â”‚   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 â”‚     setIsBuilding(true);
  158 â”‚     setProgress({
  159 â”‚       total: activities.length,
  160 â”‚       completed: 0,
  161 â”‚       current: '',
  162 â”‚       errors: []
  163 â”‚     });
  164 â”‚ 
  165 â”‚     let allSuccess = true;
  166 â”‚ 
  167 â”‚     for (let i = 0; i < activities.length; i++) {
  168 â”‚       const activity = activities[i];
  169 â”‚       setProgress(prev => ({
  170 â”‚         ...prev,
  171 â”‚         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 â”‚       }));
  173 â”‚ 
  174 â”‚       try {
  175 â”‚         // Simulate building
  176 â”‚         await new Promise(resolve => setTimeout(resolve, 1000));
  177 â”‚ 
  178 â”‚         // Simulate occasional errors
  179 â”‚         if (Math.random() < 0.2) {
  180 â”‚           throw new Error(`Falha ao construir ${activity.title}`);
  181 â”‚         }
  182 â”‚ 
  183 â”‚         setProgress(prev => ({
  184 â”‚           ...prev,
  185 â”‚           completed: prev.completed + 1
  186 â”‚         }));
  187 â”‚       } catch (error: any) {
  188 â”‚         console.error(error);
  189 â”‚         allSuccess = false;
  190 â”‚         setProgress(prev => ({
  191 â”‚           ...prev,
  192 â”‚           errors: [...prev.errors, error.message]
  193 â”‚         }));
  194 â”‚       }
  195 â”‚     }
  196 â”‚ 
  197 â”‚     setIsBuilding(false);
  198 â”‚     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 â”‚     return allSuccess;
  200 â”‚   };
  201 â”‚ 
  202 â”‚   // Load existing data when component mounts
  203 â”‚   useEffect(() => {
  204 â”‚     if (contextualizationData) {
  205 â”‚       setFormData(contextualizationData);
  206 â”‚     }
  207 â”‚   }, [contextualizationData]);
  208 â”‚ 
  209 â”‚   // Handle form input changes
  210 â”‚   const handleInputChange = (
  211 â”‚     field: keyof ContextualizationData,
  212 â”‚     value: string,
  213 â”‚   ) => {
  214 â”‚     setFormData((prev) => ({
  215 â”‚       ...prev,
  216 â”‚       [field]: value,
  217 â”‚     }));
  218 â”‚   };
  219 â”‚ 
  220 â”‚   // Handle contextualization form submission
  221 â”‚   const handleSubmitContextualization = () => {
  222 â”‚     if (onSubmitContextualization) {
  223 â”‚       onSubmitContextualization(formData);
  224 â”‚     }
  225 â”‚   };
  226 â”‚ 
  227 â”‚   // Handle activity selection toggle
  228 â”‚   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 â”‚     setSelectedActivities2((prev) => {
  230 â”‚       const isSelected = prev.some((item) => item.id === activity.id);
  231 â”‚       if (isSelected) {
  232 â”‚         return prev.filter((item) => item.id !== activity.id);
  233 â”‚       } else {
  234 â”‚         return [...prev, { ...activity, approved: true }];
  235 â”‚       }
  236 â”‚     });
  237 â”‚   };
  238 â”‚ 
  239 â”‚   useEffect(() => {
  240 â”‚     if (actionPlan) {
  241 â”‚       console.log('ðŸŽ¯ ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 â”‚       const approved = actionPlan.filter(item => item.approved);
  243 â”‚       setSelectedActivities2(approved);
  244 â”‚     }
  245 â”‚   }, [actionPlan, step]);
  246 â”‚ 
  247 â”‚   const handleApproveActionPlan = async () => {
  248 â”‚     console.log('âœ… Plano de aÃ§Ã£o aprovado! Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  249 â”‚ 
  250 â”‚     // Aprovar plano primeiro
  251 â”‚     onApproveActionPlan(selectedActivities2);
  252 â”‚ 
  253 â”‚     // Construir atividades automaticamente usando o novo sistema
  254 â”‚     if (selectedActivities2.length > 0) {
  255 â”‚       try {
  256 â”‚         console.log('ðŸ”§ Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  257 â”‚         console.log('ðŸ“‹ Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 â”‚ 
  259 â”‚         // Usar o contexto de contextualizaÃ§Ã£o para enriquecer a geraÃ§Ã£o
  260 â”‚         const contextData = {
  261 â”‚           materias: formData.materias,
  262 â”‚           publicoAlvo: formData.publicoAlvo,
  263 â”‚           restricoes: formData.restricoes,
  264 â”‚           datasImportantes: formData.datasImportantes,
  265 â”‚           observacoes: formData.observacoes
  266 â”‚         };
  267 â”‚ 
  268 â”‚         console.log('ðŸŽ¯ Dados de contexto para geraÃ§Ã£o:', contextData);
  269 â”‚ 
  270 â”‚         const success = await buildActivities(selectedActivities2, contextData);
  271 â”‚ 
  272 â”‚         if (success) {
  273 â”‚           console.log('ðŸŽ‰ Todas as atividades foram construÃ­das automaticamente com ModalBinderEngine!');
  274 â”‚ 
  275 â”‚           // Exibir notificaÃ§Ã£o de sucesso
  276 â”‚           console.log('âœ… Sistema de construÃ§Ã£o automÃ¡tica funcionando corretamente!');
  277 â”‚         } else {
  278 â”‚           console.warn('âš ï¸ Algumas atividades podem ter falhado na construÃ§Ã£o automÃ¡tica');
  279 â”‚         }
  280 â”‚       } catch (error) {
  281 â”‚         console.error('âŒ Erro durante construÃ§Ã£o automÃ¡tica:', error);
  282 â”‚         console.error('ðŸ“Š Detalhes do erro:', {
  283 â”‚           message: error.message,
  284 â”‚           stack: error.stack,
  285 â”‚           selectedActivities: selectedActivities2.length,
  286 â”‚           contextData: !!contextData
  287 â”‚         });
  288 â”‚       }
  289 â”‚     } else {
  290 â”‚       console.log('â„¹ï¸ Nenhuma atividade selecionada para construÃ§Ã£o automÃ¡tica');
  291 â”‚     }
  292 â”‚   };
  293 â”‚ 
  294 â”‚   // Handle manual activity form submission
  295 â”‚   const handleAddManualActivity = () => {
  296 â”‚     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 â”‚       return;
  298 â”‚     }
  299 â”‚ 
  300 â”‚     // Find the activity type from schoolPowerActivities
  301 â”‚     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 â”‚ 
  303 â”‚     const newManualActivity: ActionPlanItem = {
  304 â”‚       id: manualActivityForm.typeId,
  305 â”‚       title: manualActivityForm.title,
  306 â”‚       description: manualActivityForm.description,
  307 â”‚       duration: "Personalizado",
  308 â”‚       difficulty: "Personalizado", 
  309 â”‚       category: activityType?.tags[0] || "manual",
  310 â”‚       type: activityType?.name || "Atividade Manual",
  311 â”‚       isManual: true,
  312 â”‚       approved: false,
  313 â”‚       customFields: {} // Atividades manuais tambÃ©m podem ter customFields
  314 â”‚     };
  315 â”‚ 
  316 â”‚     // Add to manual activities list
  317 â”‚     setManualActivities(prev => [...prev, newManualActivity]);
  318 â”‚ 
  319 â”‚     // Clear form
  320 â”‚     setManualActivityForm({
  321 â”‚       title: '',
  322 â”‚       typeId: '',
  323 â”‚       description: ''
  324 â”‚     });
  325 â”‚ 
  326 â”‚     // Return to action plan interface
  327 â”‚     setShowAddActivityInterface(false);
  328 â”‚   };
  329 â”‚ 
  330 â”‚   // Handle manual activity form changes
  331 â”‚   const handleManualFormChange = (field: string, value: string) => {
  332 â”‚     setManualActivityForm(prev => ({
  333 â”‚       ...prev,
  334 â”‚       [field]: value
  335 â”‚     }));
  336 â”‚   };
  337 â”‚ 
  338 â”‚   // Get combined activities (AI suggestions + manual)
  339 â”‚   const getCombinedActivities = () => {
  340 â”‚     const aiActivities = actionPlan || [];
  341 â”‚     const allActivities = [...aiActivities, ...manualActivities];
  342 â”‚     return allActivities;
  343 â”‚   };
  344 â”‚ 
  345 â”‚   // Check if contextualization form is valid
  346 â”‚   const isContextualizationValid =
  347 â”‚     formData.materias.trim() && formData.publicoAlvo.trim();
  348 â”‚ 
  349 â”‚   // Grid Toggle Component
  350 â”‚   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 â”‚     viewMode: 'list' | 'grid';
  352 â”‚     onToggle: () => void;
  353 â”‚   }) => {
  354 â”‚     return (
  355 â”‚       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 â”‚         onClick={onToggle}
  357 â”‚         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 â”‚         title={viewMode === 'list' ? 'VisualizaÃ§Ã£o em Grade' : 'VisualizaÃ§Ã£o em Lista'}
  359 â”‚       >
  360 â”‚         {viewMode === 'list' ? (
  361 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 â”‚           </svg>
  364 â”‚         ) : (
  365 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 â”‚           </svg>
  368 â”‚         )}
  369 â”‚       </button>
  370 â”‚     );
  371 â”‚   };
  372 â”‚ 
  373 â”‚   // Filter Component
  374 â”‚   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 â”‚     activities: ActionPlanItem[];
  376 â”‚     selectedActivities2: ActionPlanItem[];
  377 â”‚     onFilterApply: (filterType: string) => void;
  378 â”‚   }) => {
  379 â”‚     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 â”‚     const filterRef = useRef<HTMLDivElement>(null);
  381 â”‚ 
  382 â”‚     useEffect(() => {
  383 â”‚       const handleClickOutside = (event: MouseEvent) => {
  384 â”‚         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 â”‚           setIsFilterOpen(false);
  386 â”‚         }
  387 â”‚       };
  388 â”‚ 
  389 â”‚       document.addEventListener('mousedown', handleClickOutside);
  390 â”‚       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 â”‚     }, []);
  392 â”‚ 
  393 â”‚     return (
  394 â”‚       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 â”‚         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 â”‚           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 â”‚           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 â”‚           title="Filtros e AÃ§Ãµes"
  399 â”‚         >
  400 â”‚           <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:400:10" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="400" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" />
  401 â”‚         </button>
  402 â”‚ 
  403 â”‚         {isFilterOpen && (
  404 â”‚           <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:404:10" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="404" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22absolute%20top-full%20right-0%20mt-3%20w-56%20bg-white%20dark%3Abg-gray-800%20rounded-2xl%20shadow-2xl%20border%20border-gray-200%20dark%3Aborder-gray-600%20overflow-hidden%20z-50%20backdrop-blur-sm%22%7D"
  405 â”‚             initial={{ opacity: 0, y: -10, scale: 0.95 }}
  406 â”‚             animate={{ opacity: 1, y: 0, scale: 1 }}
  407 â”‚             exit={{ opacity: 0, y: -10, scale: 0.95 }}
  408 â”‚             transition={{ duration: 0.2, ease: [0.25, 0.1, 0.25, 1] }}
  409 â”‚             className="absolute top-full right-0 mt-3 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-600 overflow-hidden z-50 backdrop-blur-sm"
  410 â”‚             style={{
  411 â”‚               background: `
  412 â”‚                 linear-gradient(135deg, 
  413 â”‚                   rgba(255, 255, 255, 0.95) 0%, 
  414 â”‚                   rgba(248, 250, 252, 0.98) 100%
  415 â”‚                 )
  416 â”‚               `,
  417 â”‚               ...(typeof window !== "undefined" &&
  418 â”‚               window.matchMedia("(prefers-color-scheme: dark)").matches
  419 â”‚                 ? {
  420 â”‚                     background: `
  421 â”‚                   linear-gradient(135deg, 
  422 â”‚                     rgba(31, 41, 55, 0.95) 0%, 
  423 â”‚                     rgba(17, 24, 39, 0.98) 100%
  424 â”‚                   )
  425 â”‚                 `,
  426 â”‚                   }
  427 â”‚                 : {}),
  428 â”‚             }}
  429 â”‚           >
  430 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:430:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="430" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22p-2%22%7D" className="p-2">
  431 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:431:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="431" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22px-3%20py-2%20border-b%20border-gray-200%20dark%3Aborder-gray-600%22%7D" className="px-3 py-2 border-b border-gray-200 dark:border-gray-600">
  432 â”‚                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:432:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="432" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Filtros%20e%20A%C3%A7%C3%B5es%22%2C%22className%22%3A%22text-sm%20font-semibold%20text-gray-900%20dark%3Atext-white%20flex%20items-center%20gap-2%22%7D" className="text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2">
  433 â”‚                   <Filter data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:433:18" data-lov-name="Filter"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="433" data-component-file="CardDeConstrucao.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%22%7D" className="w-4 h-4 text-[#FF6B00]" />
  434 â”‚                   Filtros e AÃ§Ãµes
  435 â”‚                 </h3>
  436 â”‚               </div>
  437 â”‚ 
  438 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:438:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="438" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22py-1%20space-y-1%22%7D" className="py-1 space-y-1">
  439 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:439:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="439" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  440 â”‚                   onClick={() => {
  441 â”‚                     onFilterApply('selectAll');
  442 â”‚                     setIsFilterOpen(false);
  443 â”‚                   }}
  444 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  445 â”‚                 >
  446 â”‚                   <CheckSquare data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:446:18" data-lov-name="CheckSquare"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="446" data-component-file="CardDeConstrucao.tsx" data-component-name="CheckSquare" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" />
  447 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:447:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="447" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20todos%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar todos</span>
  448 â”‚                 </button>
  449 â”‚ 
  450 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:450:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="450" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-%5B%23FF6B00%5D%2F10%20hover%3Ato-%5B%23FF9248%5D%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  451 â”‚                   onClick={() => {
  452 â”‚                     onFilterApply('selectRecommended');
  453 â”‚                     setIsFilterOpen(false);
  454 â”‚                   }}
  455 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#FF6B00]/10 hover:to-[#FF9248]/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  456 â”‚                 >
  457 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:457:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="457" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  458 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:458:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="458" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clipRule="evenodd" />
  459 â”‚                   </svg>
  460 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:460:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="460" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Selecionar%20recomenda%C3%A7%C3%B5es%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Selecionar recomendaÃ§Ãµes</span>
  461 â”‚                 </button>
  462 â”‚ 
  463 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:463:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="463" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22border-t%20border-gray-200%20dark%3Aborder-gray-600%20my-1%22%7D" className="border-t border-gray-200 dark:border-gray-600 my-1"></div>
  464 â”‚ 
  465 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:465:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="465" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-blue-500%2F10%20hover%3Ato-blue-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  466 â”‚                   onClick={() => {
  467 â”‚                     onFilterApply('viewSelected');
  468 â”‚                     setIsFilterOpen(false);
  469 â”‚                   }}
  470 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-blue-500/10 hover:to-blue-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  471 â”‚                 >
  472 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:472:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="472" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-blue-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-blue-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  473 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:473:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="473" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
  474 â”‚                   </svg>
  475 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:475:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="475" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20apenas%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver apenas selecionados</span>
  476 â”‚                 </button>
  477 â”‚ 
  478 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:478:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="478" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-red-500%2F10%20hover%3Ato-red-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  479 â”‚                   onClick={() => {
  480 â”‚                     onFilterApply('clearSelected');
  481 â”‚                     setIsFilterOpen(false);
  482 â”‚                   }}
  483 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-red-500/10 hover:to-red-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  484 â”‚                 >
  485 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:485:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="485" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-red-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-red-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  486 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:486:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="486" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
  487 â”‚                   </svg>
  488 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:488:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="488" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Tirar%20selecionados%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Tirar selecionados</span>
  489 â”‚                 </button>
  490 â”‚ 
  491 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:491:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="491" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-full%20px-3%20py-2.5%20text-left%20text-sm%20text-gray-700%20dark%3Atext-gray-300%20hover%3Abg-gradient-to-r%20hover%3Afrom-gray-500%2F10%20hover%3Ato-gray-600%2F5%20rounded-lg%20transition-all%20duration-200%20flex%20items-center%20gap-3%20group%22%7D"
  492 â”‚                   onClick={() => {
  493 â”‚                     onFilterApply('viewAll');
  494 â”‚                     setIsFilterOpen(false);
  495 â”‚                   }}
  496 â”‚                   className="w-full px-3 py-2.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gradient-to-r hover:from-gray-500/10 hover:to-gray-600/5 rounded-lg transition-all duration-200 flex items-center gap-3 group"
  497 â”‚                 >
  498 â”‚                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:498:18" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="498" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-500%20group-hover%3Ascale-110%20transition-transform%20duration-200%22%7D" className="w-4 h-4 text-gray-500 group-hover:scale-110 transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
  499 â”‚                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:499:20" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="499" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd" />
  500 â”‚                   </svg>
  501 â”‚                   <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:501:18" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="501" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Ver%20todas%22%2C%22className%22%3A%22font-medium%22%7D" className="font-medium">Ver todas</span>
  502 â”‚                 </button>
  503 â”‚               </div>
  504 â”‚             </div>
  505 â”‚           </motion.div>
  506 â”‚         )}
  507 â”‚       </div>
  508 â”‚     );
  509 â”‚   };
  510 â”‚ 
  511 â”‚   // Handle filter actions
  512 â”‚   const handleFilterApply = (filterType: string) => {
  513 â”‚     const combinedActivities = getCombinedActivities();
  514 â”‚     if (combinedActivities.length === 0) return;
  515 â”‚ 
  516 â”‚     switch (filterType) {
  517 â”‚       case 'selectAll':
  518 â”‚         setSelectedActivities2([...combinedActivities]);
  519 â”‚         setFilterState('all');
  520 â”‚         break;
  521 â”‚       case 'selectRecommended':
  522 â”‚         // Seleciona as 3 primeiras atividades como "recomendadas"
  523 â”‚         const recommended = combinedActivities.slice(0, Math.min(3, combinedActivities.length));
  524 â”‚         setSelectedActivities2(recommended);
  525 â”‚         setFilterState('all');
  526 â”‚         break;
  527 â”‚       case 'viewSelected':
  528 â”‚         setFilterState('selected');
  529 â”‚         break;
  530 â”‚       case 'clearSelected':
  531 â”‚         setSelectedActivities2([]);
  532 â”‚         setFilterState('all');
  533 â”‚         break;
  534 â”‚       case 'viewAll':
  535 â”‚         setFilterState('all');
  536 â”‚         break;
  537 â”‚       default:
  538 â”‚         break;
  539 â”‚     }
  540 â”‚   };
  541 â”‚ 
  542 â”‚   const getIconByActivityId = (activityId: string) => {
  543 â”‚     // Sistema de mapeamento 100% Ãºnico - cada ID tem seu prÃ³prio Ã­cone especÃ­fico
  544 â”‚     const uniqueIconMapping: { [key: string]: any } = {
  545 â”‚       "atividade-adaptada": Heart,
  546 â”‚       "atividades-contos-infantis": BookOpen,
  547 â”‚       "atividades-ia": Brain,
  548 â”‚       "atividades-matematica": Target,
  549 â”‚       "atividades-ortografia-alfabeto": PenTool,
  550 â”‚       "aulas-eletivas": Star,
  551 â”‚       "bncc-descomplicada": BookOpen,
  552 â”‚       "caca-palavras": Puzzle,
  553 â”‚       "capitulo-livro": BookOpen,
  554 â”‚       "charadas": Puzzle,
  555 â”‚       "chatbot-bncc": MessageSquare,
  556 â”‚       "consulta-video": Video,
  557 â”‚       "corretor-gramatical": CheckSquare,
  558 â”‚       "corretor-provas-feedback": CheckSquare,
  559 â”‚       "corretor-provas-papel": FileText,
  560 â”‚       "corretor-questoes": PenTool,
  561 â”‚       "corretor-redacao": PenTool,
  562 â”‚       "criterios-avaliacao": CheckSquare,
  563 â”‚       "desenho-simetrico": Puzzle,
  564 â”‚       "desenvolvimento-caligrafia": PenTool,
  565 â”‚       "dinamicas-sala-aula": Users,
  566 â”‚       "emails-escolares": Mail,
  567 â”‚       "erros-comuns": Search,
  568 â”‚       "exemplos-contextualizados": BookOpen,
  569 â”‚       "experimento-cientifico": Microscope,
  570 â”‚       "fichamento-obra-literaria": BookOpen,
  571 â”‚       "gerador-tracejados": PenTool,
  572 â”‚       "historias-sociais": Heart,
  573 â”‚       "ideias-atividades": Lightbulb,
  574 â”‚       "ideias-aulas-acessiveis": Heart,
  575 â”‚       "ideias-avaliacoes-adaptadas": Heart,
  576 â”‚       "ideias-brincadeiras-infantis": Play,
  577 â”‚       "ideias-confraternizacoes": Users,
  578 â”‚       "ideias-datas-comemorativas": Calendar,
  579 â”‚       "imagem-para-colorir": Palette,
  580 â”‚       "instrucoes-claras": FileText,
  581 â”‚       "jogos-educacionais-interativos": Gamepad2,
  582 â”‚       "jogos-educativos": Puzzle,
  583 â”‚       "lista-exercicios": FileText,
  584 â”‚       "lista-vocabulario": BookOpen,
  585 â”‚       "maquete": Wrench,
  586 â”‚       "mapa-mental": Brain,
  587 â”‚       "mensagens-agradecimento": Heart,
  588 â”‚       "musica-engajar": Music,
  589 â”‚       "niveador-textos": BookOpen,
  590 â”‚       "objetivos-aprendizagem": Target,
  591 â”‚       "palavras-cruzadas": Puzzle,
  592 â”‚       "pei-pdi": Heart,
  593 â”‚       "perguntas-taxonomia-bloom": MessageSquare,
  594 â”‚       "pergunte-texto": MessageSquare,
  595 â”‚       "plano-aula": BookOpen,
  596 â”‚       "plano-ensino": BookOpen,
  597 â”‚       "plano-recuperacao": Heart,
  598 â”‚       "projeto": Wrench,
  599 â”‚       "projeto-vida": Star,
  600 â”‚       "proposta-redacao": PenTool,
  601 â”‚       "prova": CheckSquare,
  602 â”‚       "questoes-pdf": FileText,
  603 â”‚       "questoes-site": Globe,
  604 â”‚       "questoes-texto": FileText,
  605 â”‚       "questoes-video": Video,
  606 â”‚       "redacao": PenTool,
  607 â”‚       "reescritor-texto": PenTool,
  608 â”‚       "reflexao-incidente": MessageSquare,
  609 â”‚       "relatorio": FileText,
  610 â”‚       "relatorio-desempenho": Trophy,
  611 â”‚       "resposta-email": Mail,
  612 â”‚       "revisor-gramatical": CheckSquare,
  613 â”‚       "revisao-guiada": BookOpen,
  614 â”‚       "resumo": FileText,
  615 â”‚       "resumo-texto": FileText,
  616 â”‚       "resumo-video": Video,
  617 â”‚       "sequencia-didatica": BookOpen,
  618 â”‚       "simulado": CheckSquare,
  619 â”‚       "sugestoes-intervencao": Lightbulb,
  620 â”‚       "tabela-apoio": Puzzle,
  621 â”‚       "tarefa-adaptada": Heart,
  622 â”‚       "texto-apoio": BookOpen,
  623 â”‚       "gerar-questoes": PenTool,
  624 â”‚       "apresentacao-slides": Target,
  625 â”‚       "tornar-relevante": Star
  626 â”‚     };
  627 â”‚ 
  628 â”‚     // Verifica se existe mapeamento direto para o ID
  629 â”‚     if (uniqueIconMapping[activityId]) {
  630 â”‚       return uniqueIconMapping[activityId];
  631 â”‚     }
  632 â”‚ 
  633 â”‚     // Sistema de fallback com hash consistente para IDs nÃ£o mapeados
  634 â”‚     const fallbackIcons = [
  635 â”‚       BookOpen, FileText, PenTool, Search, Brain,
  636 â”‚       Users, MessageSquare, Presentation, ThumbsUp, Heart,
  637 â”‚       Wrench, Target, Compass, Trophy, Edit3,
  638 â”‚       Calendar, Clock, CheckSquare, Star, Award,
  639 â”‚       Microscope, Calculator, Eye, Globe, MapPin,
  640 â”‚       Music, Palette, Camera, Video, Headphones,
  641 â”‚       Lightbulb, Zap, Flag, Key, Shield,
  642 â”‚       TreePine, Sun, Cloud, Home, Car
  643 â”‚     ];
  644 â”‚ 
  645 â”‚     // Gera hash consistente baseado no ID
  646 â”‚     let hash = 0;
  647 â”‚     for (let i = 0; i < activityId.length; i++) {
  648 â”‚       const char = activityId.charCodeAt(i);
  649 â”‚       hash = ((hash << 5) - hash) + char;
  650 â”‚       hash = hash & hash;
  651 â”‚     }
  652 â”‚ 
  653 â”‚     const iconIndex = Math.abs(hash) % fallbackIcons.length;
  654 â”‚     return fallbackIcons[iconIndex];
  655 â”‚   };
  656 â”‚ 
  657 â”‚   const [selectedTrilhasCount, setSelectedTrilhasCount] = useState(0);
  658 â”‚ 
  659 â”‚   useEffect(() => {
  660 â”‚     const trilhasActivityIds = [
  661 â”‚       'projeto-pesquisa',
  662 â”‚       'projeto-cientifico',
  663 â”‚       'projeto-criativo',
  664 â”‚       'projeto-colaborativo',
  665 â”‚       'projeto-individual',
  666 â”‚       'projeto-inovacao',
  667 â”‚       'projeto-sustentabilidade',
  668 â”‚       'projeto-social',
  669 â”‚       'projeto-tecnologico',
  670 â”‚       'projeto-artistico',
  671 â”‚       'projeto-empreendedor',
  672 â”‚       'projeto-interdisciplinar',
  673 â”‚       'projeto-experimental',
  674 â”‚       'projeto-aplicado',
  675 â”‚       'projeto-extensao',
  676 â”‚       'projeto-integrador',
  677 â”‚       'projeto-final',
  678 â”‚     ];
  679 â”‚ 
  680 â”‚     const selectedTrilhas = selectedActivities2.filter(activity =>
  681 â”‚       trilhasActivityIds.includes(activity.id)
  682 â”‚     );
  683 â”‚ 
  684 â”‚     setSelectedTrilhasCount(selectedTrilhas.length);
  685 â”‚   }, [selectedActivities2]);
  686 â”‚ 
  687 â”‚   // Adicionar preenchimento automÃ¡tico dos campos do modal com dados da IA
  688 â”‚   const [selectedActivity, setSelectedActivity] = useState<ActionPlanItem | null>(null);
  689 â”‚   const [isEditModalOpen, setIsEditModalOpen] = useState(false);
  690 â”‚ 
  691 â”‚   const handleEditActivity = (activity: any) => {
  692 â”‚     console.log('ðŸ”§ Editando atividade:', activity.id);
  693 â”‚ 
  694 â”‚         // Buscar dados da atividade no action plan se disponÃ­vel
  695 â”‚     const actionPlanActivity = actionPlan?.find(item => item.id === activity.id);
  696 â”‚ 
  697 â”‚     if (actionPlanActivity?.customFields && Object.keys(actionPlanActivity.customFields).length > 0) {
  698 â”‚       console.log('ðŸ“‹ Preenchendo automaticamente com dados da IA:', actionPlanActivity.customFields);
  699 â”‚ 
  700 â”‚       // Preparar dados automÃ¡ticos para preenchimento do modal
  701 â”‚       const autoDataKey = `auto_activity_data_${activity.id}`;
  702 â”‚       const autoFormData = {
  703 â”‚         title: actionPlanActivity.title || activity.title,
  704 â”‚         description: actionPlanActivity.description || activity.description,
  705 â”‚         subject: actionPlanActivity.customFields['Disciplina'] || 'PortuguÃªs',
  706 â”‚         theme: actionPlanActivity.customFields['Tema'] || '',
  707 â”‚         schoolYear: actionPlanActivity.customFields['Ano de Escolaridade'] || '',
  708 â”‚         numberOfQuestions: actionPlanActivity.customFields['Quantidade de QuestÃµes'] || '10',
  709 â”‚         difficultyLevel: actionPlanActivity.customFields['NÃ­vel de Dificuldade'] || 'MÃ©dio',
  710 â”‚         questionModel: actionPlanActivity.customFields['Modelo de QuestÃµes'] || '',
  711 â”‚         sources: actionPlanActivity.customFields['Fontes'] || '',
  712 â”‚         objectives: actionPlanActivity.customFields['Objetivos'] || '',
  713 â”‚         materials: actionPlanActivity.customFields['Materiais'] || '',
  714 â”‚         instructions: actionPlanActivity.customFields['InstruÃ§Ãµes'] || '',
  715 â”‚         evaluation: actionPlanActivity.customFields['CritÃ©rios de CorreÃ§Ã£o'] || actionPlanActivity.customFields['CritÃ©rios de AvaliaÃ§Ã£o'] || ''
  716 â”‚       };
  717 â”‚ 
  718 â”‚       // Salvar dados automÃ¡ticos no localStorage para o modal usar
  719 â”‚       const autoData = {
  720 â”‚         formData: autoFormData,
  721 â”‚         customFields: actionPlanActivity.customFields,
  722 â”‚         timestamp: Date.now()
  723 â”‚       };
  724 â”‚ 
  725 â”‚       localStorage.setItem(autoDataKey, JSON.stringify(autoData));
  726 â”‚       console.log('ðŸ’¾ Dados automÃ¡ticos salvos para:', activity.id, autoFormData);
  727 â”‚     }
  728 â”‚ 
  729 â”‚     setSelectedActivity(activity);
  730 â”‚     setIsEditModalOpen(true);
  731 â”‚   };
  732 â”‚ 
  733 â”‚   return (
  734 â”‚     <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:734:4" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="734" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20rounded-2xl%20p-6%20shadow-2xl%20border%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F30%20bg-white%20dark%3Abg-%5B%23021321%5D%22%7D"
  735 â”‚       initial={{ opacity: 0, scale: 0.8, y: 50 }}
  736 â”‚       animate={{ opacity: 1, scale: 1, y: 0 }}
  737 â”‚       exit={{ opacity: 0, scale: 0.8, y: -50 }}
  738 â”‚       transition={{
  739 â”‚         duration: 0.6,
  740 â”‚         ease: [0.25, 0.1, 0.25, 1],
  741 â”‚         type: "spring",
  742 â”‚         stiffness: 100,
  743 â”‚         damping: 15,
  744 â”‚       }}
  745 â”‚       className="relative rounded-2xl p-6 shadow-2xl border border-[#FF6B00]/30 dark:border-[#FF6B00]/30 bg-white dark:bg-[#021321]"
  746 â”‚       style={{
  747 â”‚         width: "1353px",
  748 â”‚         height: "773px"
  749 â”‚       }}
  750 â”‚       data-theme="adaptive"
  751 â”‚     >
  752 â”‚       {/* CabeÃ§alho Persistente Fixo */}
  753 â”‚       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:753:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="753" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-0%20left-0%20right-0%20h-20%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%20to-%5B%23FF9248%5D%20rounded-t-2xl%20flex%20items-center%20justify-between%20px-6%20z-0%22%7D" className="absolute top-0 left-0 right-0 h-20 bg-gradient-to-r from-[#FF6B00] to-[#FF9248] rounded-t-2xl flex items-center justify-between px-6 z-0">
  754 â”‚         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:754:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="754" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  755 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:755:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="755" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F20%20rounded-lg%20flex%20items-center%20justify-center%22%7D" className="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
  756 â”‚             {step === "contextualization" ? (
  757 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:757:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="757" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  758 â”‚                 className="w-7 h-7 text-white"
  759 â”‚                 fill="none"
  760 â”‚                 viewBox="0 0 24 24"
  761 â”‚                 stroke="currentColor"
  762 â”‚               >
  763 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:763:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="763" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  764 â”‚                   strokeLinecap="round"
  765 â”‚                   strokeLinejoin="round"
  766 â”‚                   strokeWidth={2}
  767 â”‚                   d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
  768 â”‚                 />
  769 â”‚               </svg>
  770 â”‚             ) : step === "actionPlan" ? (
  771 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:771:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="771" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%22%7D"
  772 â”‚                 className="w-7 h-7 text-white"
  773 â”‚                 fill="none"
  774 â”‚                 viewBox="0 0 24 24"
  775 â”‚                 stroke="currentColor"
  776 â”‚               >
  777 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:777:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="777" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  778 â”‚                   strokeLinecap="round"
  779 â”‚                   strokeLinejoin="round"
  780 â”‚                   strokeWidth={2}
  781 â”‚                   d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"
  782 â”‚                 />
  783 â”‚               </svg>
  784 â”‚             ) : (
  785 â”‚               <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:785:14" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="785" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-7%20h-7%20text-white%20animate-spin%22%7D"
  786 â”‚                 className="w-7 h-7 text-white animate-spin"
  787 â”‚                 fill="none"
  788 â”‚                 viewBox="0 0 24 24"
  789 â”‚                 stroke="currentColor"
  790 â”‚               >
  791 â”‚                 <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:791:16" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="791" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D"
  792 â”‚                   strokeLinecap="round"
  793 â”‚                   strokeLinejoin="round"
  794 â”‚                   strokeWidth={2}
  795 â”‚                   d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
  796 â”‚                 />
  797 â”‚               </svg>
  798 â”‚             )}
  799 â”‚           </div>
  800 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:800:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="800" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  801 â”‚             <h1 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:801:12" data-lov-name="h1"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="801" data-component-file="CardDeConstrucao.tsx" data-component-name="h1" data-component-content="%7B%22className%22%3A%22text-white%20font-bold%20text-2xl%22%7D" className="text-white font-bold text-2xl">
  802 â”‚               {step === "contextualization"
  803 â”‚                 ? "Quiz de ContextualizaÃ§Ã£o"
  804 â”‚                 : step === "actionPlan"
  805 â”‚                   ? "Plano de AÃ§Ã£o"
  806 â”‚                   : step === "generating"
  807 â”‚                     ? "Gerando ConteÃºdo..."
  808 â”‚                     : step === "activities"
  809 â”‚                       ? "ConstruÃ§Ã£o de Atividades"
  810 â”‚                       : "School Power"}
  811 â”‚             </h1>
  812 â”‚           </div>
  813 â”‚         </div>
  814 â”‚ 
  815 â”‚         {/* Barra de Progresso */}
  816 â”‚         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:816:8" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="816" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D" className="flex items-center gap-4">
  817 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:817:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="817" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20flex%20items-center%20justify-between%20w-44%22%7D" className="relative flex items-center justify-between w-44">
  818 â”‚             {/* Background progress line */}
  819 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:819:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="819" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%2F30%20rounded-full%20z-0%22%7D" className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white/30 rounded-full z-0" style={{ left: '16px', right: '16px' }}></div>
  820 â”‚ 
  821 â”‚             {/* Active progress line */}
  822 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:822:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="822" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-1%2F2%20transform%20-translate-y-1%2F2%20h-1.5%20bg-white%20rounded-full%20z-0%20transition-all%20duration-500%20ease-out%22%7D" 
  823 â”‚               className="absolute top-1/2 transform -translate-y-1/2 h-1.5 bg-white rounded-full z-0 transition-all duration-500 ease-out"
  824 â”‚               style={{ 
  825 â”‚                 left: '16px',
  826 â”‚                 width: `${
  827 â”‚                   step === "contextualization" ? "0%" :
  828 â”‚                   step === "actionPlan" ? "50%" :
  829 â”‚                   (step === "generating" || step === "generatingActivities" || step === "activities") ? "100%" : "0%"
  830 â”‚                 }`
  831 â”‚               }}
  832 â”‚             ></div>
  833 â”‚ 
  834 â”‚             {/* Step indicators */}
  835 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:835:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="835" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  836 â”‚               step === "contextualization" ? 'bg-white border-white text-[#FF6B00]' : 'bg-[#FF6B00] border-white text-white'
  837 â”‚             }`}>
  838 â”‚               {step === "contextualization" ? (
  839 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:839:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="839" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%221%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">1</span>
  840 â”‚               ) : (
  841 â”‚                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:841:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="841" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  842 â”‚                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:842:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="842" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  843 â”‚                 </svg>
  844 â”‚               )}
  845 â”‚             </div>
  846 â”‚ 
  847 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:847:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="847" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  848 â”‚               step === "actionPlan" ? 'bg-white border-white text-[#FF6B00]' :
  849 â”‚               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-[#FF6B00] border-white text-white' :
  850 â”‚               'bg-white/20 border-white/30 text-white'
  851 â”‚             }`}>
  852 â”‚               {step === "actionPlan" ? (
  853 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:853:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="853" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  854 â”‚               ) : (step === "generating" || step === "generatingActivities" || step === "activities") ? (
  855 â”‚                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:855:16" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="855" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%22%7D" className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
  856 â”‚                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:856:18" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="856" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
  857 â”‚                 </svg>
  858 â”‚               ) : (
  859 â”‚                 <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:859:16" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="859" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%222%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">2</span>
  860 â”‚               )}
  861 â”‚             </div>
  862 â”‚ 
  863 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:863:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="863" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`relative z-10 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${
  864 â”‚               (step === "generating" || step === "generatingActivities" || step === "activities") ? 'bg-white border-white text-[#FF6B00]' : 'bg-white/20 border-white/30 text-white'
  865 â”‚             }`}>
  866 â”‚               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:866:14" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="866" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%223%22%2C%22className%22%3A%22text-sm%20font-semibold%22%7D" className="text-sm font-semibold">3</span>
  867 â”‚             </div>
  868 â”‚           </div>
  869 â”‚         </div>
  870 â”‚       </div>
  871 â”‚ 
  872 â”‚       {/* RenderizaÃ§Ã£o condicional baseada no step */}
  873 â”‚       {step === "generating" || step === "generatingActivities" ? (
  874 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:874:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="874" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20flex%20flex-col%20items-center%20justify-center%20h-full%20text-center%20px-4%20pt-16%22%7D"
  875 â”‚           className="relative z-10 flex flex-col items-center justify-center h-full text-center px-4 pt-16"
  876 â”‚           initial={{ opacity: 0 }}
  877 â”‚           animate={{ opacity: 1 }}
  878 â”‚           transition={{ duration: 0.3 }}
  879 â”‚         >
  880 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:880:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="880" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%20mb-4%22%7D" className="relative mb-4">
  881 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:881:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="881" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22animate-spin%20rounded-full%20h-16%20w-16%20border-4%20border-%5B%23FF6B00%5D%2F20%20border-t-%5B%23FF6B00%5D%20mx-auto%22%7D" className="animate-spin rounded-full h-16 w-16 border-4 border-[#FF6B00]/20 border-t-[#FF6B00] mx-auto"></div>
  882 â”‚             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:882:12" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="882" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-full%20bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-transparent%20animate-pulse%22%7D" className="absolute inset-0 rounded-full bg-gradient-to-r from-[#FF6B00]/10 to-transparent animate-pulse"></div>
  883 â”‚           </div>
  884 â”‚           <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:884:10" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="884" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-xl%20sm%3Atext-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-3%22%7D" className="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-3">
  885 â”‚             {step === "generating"
  886 â”‚               ? "ðŸ¤– Analisando com IA Gemini"
  887 â”‚               : "ðŸŽ¯ Gerando Atividades"}
  888 â”‚           </h3>
  889 â”‚           <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:889:10" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="889" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-700%20dark%3Atext-gray-300%20mb-4%20max-w-lg%20text-sm%20sm%3Atext-base%22%7D" className="text-gray-700 dark:text-gray-300 mb-4 max-w-lg text-sm sm:text-base">
  890 â”‚             {step === "generating"
  891 â”‚               ? "A IA estÃ¡ processando sua mensagem e contexto para criar um plano de aÃ§Ã£o personalizado..."
  892 â”‚               : "As atividades aprovadas estÃ£o sendo geradas automaticamente pelo School Power..."}
  893 â”‚           </p>
  894 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:894:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="894" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22bg-gradient-to-r%20from-%5B%23FF6B00%5D%2F10%20to-orange-100%2F20%20dark%3Ato-%5B%2329335C%5D%2F10%20rounded-lg%20p-3%20sm%3Ap-4%20mb-4%20border%20border-%5B%23FF6B00%5D%2F20%20max-w-md%20w-full%22%7D" className="bg-gradient-to-r from-[#FF6B00]/10 to-orange-100/20 dark:to-[#29335C]/10 rounded-lg p-3 sm:p-4 mb-4 border border-[#FF6B00]/20 max-w-md w-full">
  895 â”‚             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:895:12" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="895" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-xs%20sm%3Atext-sm%20text-gray-700%20dark%3Atext-gray-300%20leading-relaxed%22%7D" className="text-xs sm:text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
  896 â”‚               {step === "generating" ? (
  897 â”‚                 <>
  898 â”‚                   âœ¨ Consultando 137 atividades disponÃ­veis
  899 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:899:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="899" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  900 â”‚                   ðŸŽ¯ Personalizando para seu contexto especÃ­fico
  901 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:901:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="901" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  902 â”‚                   ðŸ“ Gerando sugestÃµes inteligentes
  903 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:903:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="903" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  904 â”‚                   ðŸ” Validando compatibilidade das atividades
  905 â”‚                 </>
  906 â”‚               ) : (
  907 â”‚                 <>
  908 â”‚                   âœ… Personalizando conteÃºdo das atividades
  909 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:909:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="909" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  910 â”‚                   ðŸŽ¨ Criando materiais visuais
  911 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:911:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="911" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  912 â”‚                   ðŸ“ Formatando atividades finais
  913 â”‚                   <br data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:913:18" data-lov-name="br"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="913" data-component-file="CardDeConstrucao.tsx" data-component-name="br" data-component-content="%7B%7D" />
  914 â”‚                   ðŸš€ Preparando download
  915 â”‚                 </>
  916 â”‚               )}
  917 â”‚             </p>
  918 â”‚           </div>
  919 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:919:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="919" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20justify-center%22%7D" className="flex gap-3 justify-center">
  920 â”‚             {onResetFlow && (
  921 â”‚               <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:921:14" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="921" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22px-4%20py-2%20text-sm%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-lg%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
  922 â”‚                 onClick={onResetFlow}
  923 â”‚                 className="px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
  924 â”‚               >
  925 â”‚                 Cancelar
  926 â”‚               </button>
  927 â”‚             )}
  928 â”‚           </div>
  929 â”‚         </motion.div>
  930 â”‚       ) : step === "activities" ? (
  931 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:931:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="931" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  932 â”‚           key="activities-content"
  933 â”‚           initial={{ opacity: 0, x: 20 }}
  934 â”‚           animate={{ opacity: 1, x: 0 }}
  935 â”‚           transition={{ duration: 0.3 }}
  936 â”‚           className="relative z-10 h-full flex flex-col pt-16"
  937 â”‚         >
  938 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:938:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="938" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-end%20mb-4%22%7D" className="flex items-center justify-end mb-4">
  939 â”‚             <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:939:12" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="939" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Voltar%20ao%20in%C3%ADcio%22%2C%22className%22%3A%22px-3%20py-2%20text-sm%20text-gray-600%20hover%3Atext-gray-900%20dark%3Atext-gray-400%20dark%3Ahover%3Atext-white%20transition-colors%22%7D"
  940 â”‚               onClick={onResetFlow}
  941 â”‚               className="px-3 py-2 text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
  942 â”‚             >
  943 â”‚               Voltar ao inÃ­cio
  944 â”‚             </button>
  945 â”‚           </div>
  946 â”‚ 
  947 â”‚           {/* Interface de ConstruÃ§Ã£o */}
  948 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:948:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="948" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-hidden%22%7D" className="flex-1 overflow-hidden">
  949 â”‚             {console.log('ðŸŽ¯ CardDeConstrucao: Passando atividades para ConstructionInterface:', selectedActivities2)}
  950 â”‚             <ConstructionInterface data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:950:12" data-lov-name="ConstructionInterface"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="950" data-component-file="CardDeConstrucao.tsx" data-component-name="ConstructionInterface" data-component-content="%7B%7D" approvedActivities={selectedActivities2} handleEditActivity={handleEditActivity} />
  951 â”‚           </div>
  952 â”‚         </motion.div>
  953 â”‚       ) : (
  954 â”‚         <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:954:8" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="954" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22relative%20z-10%20h-full%20flex%20flex-col%20pt-16%22%7D"
  955 â”‚           className="relative z-10 h-full flex flex-col pt-16"
  956 â”‚           initial={{ y: 20, opacity: 0 }}
  957 â”‚           animate={{ y: 0, opacity: 1 }}
  958 â”‚           transition={{ delay: 0.2, duration: 0.5 }}
  959 â”‚         >
  960 â”‚           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:960:10" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="960" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22text-center%20mb-4%20sm%3Amb-6%22%7D" className="text-center mb-4 sm:mb-6"></div>
  961 â”‚ 
  962 â”‚           {step === "contextualization" ? (
  963 â”‚             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:963:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="963" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
  964 â”‚               key="contextualization-content"
  965 â”‚               initial={{ opacity: 0, x: -20 }}
  966 â”‚               animate={{ opacity: 1, x: 0 }}
  967 â”‚               transition={{ duration: 0.3 }}
  968 â”‚               className="flex-1 flex flex-col overflow-hidden"
  969 â”‚             >
  970 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:970:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="970" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20space-y-3%20sm%3Aspace-y-4%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
  971 â”‚                 className="flex-1 overflow-y-auto space-y-3 sm:space-y-4 mb-3 sm:mb-4 pr-1 sm:pr-2"
  972 â”‚                 style={{
  973 â”‚                   maxHeight: "calc(100% - 80px)",
  974 â”‚                   scrollbarWidth: "thin",
  975 â”‚                   scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
  976 â”‚                 }}
  977 â”‚               >
  978 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:978:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="978" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  979 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:979:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="979" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9A%20Quais%20mat%C3%A9rias%20e%20temas%20ser%C3%A3o%20trabalhados%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  980 â”‚                     ðŸ“š Quais matÃ©rias e temas serÃ£o trabalhados? *
  981 â”‚                   </label>
  982 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:982:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="982" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20as%20mat%C3%A9rias%20e%20temas%20que%20voc%C3%AA%20quer%20estudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  983 â”‚                     value={formData.materias}
  984 â”‚                     onChange={(e) =>
  985 â”‚                       handleInputChange("materias", e.target.value)
  986 â”‚                     }
  987 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
  988 â”‚                     rows={2}
  989 â”‚                     placeholder="Descreva as matÃ©rias e temas que vocÃª quer estudar..."
  990 â”‚                   />
  991 â”‚                 </div>
  992 â”‚ 
  993 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:993:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="993" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
  994 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:994:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="994" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Qual%20o%20p%C3%BAblico-alvo%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
  995 â”‚                     ðŸŽ¯ Qual o pÃºblico-alvo? *
  996 â”‚                   </label>
  997 â”‚                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:997:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="997" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Ensino%20M%C3%A9dio%2C%203%C2%BA%20ano%2C%20vestibular...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
  998 â”‚                     type="text"
  999 â”‚                     value={formData.publicoAlvo}
 1000 â”‚                     onChange={(e) =>
 1001 â”‚                       handleInputChange("publicoAlvo", e.target.value)
 1002 â”‚                     }
 1003 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1004 â”‚                     placeholder="Ex: Ensino MÃ©dio, 3Âº ano, vestibular..."
 1005 â”‚                   />
 1006 â”‚                 </div>
 1007 â”‚ 
 1008 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1008:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1008" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1009 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1009:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1009" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%E2%9A%A0%EF%B8%8F%20Quais%20restri%C3%A7%C3%B5es%20ou%20prefer%C3%AAncias%20espec%C3%ADficas%3F%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1010 â”‚                     âš ï¸ Quais restriÃ§Ãµes ou preferÃªncias especÃ­ficas? *
 1011 â”‚                   </label>
 1012 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1012:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1012" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20limita%C3%A7%C3%B5es%20de%20tempo%2C%20dificuldades%20espec%C3%ADficas%2C%20etc...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1013 â”‚                     value={formData.restricoes}
 1014 â”‚                     onChange={(e) =>
 1015 â”‚                       handleInputChange("restricoes", e.target.value)
 1016 â”‚                     }
 1017 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1018 â”‚                     rows={2}
 1019 â”‚                     placeholder="Descreva limitaÃ§Ãµes de tempo, dificuldades especÃ­ficas, etc..."
 1020 â”‚                   />
 1021 â”‚                 </div>
 1022 â”‚ 
 1023 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1023:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1023" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1024 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1024:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1024" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%85%20Per%C3%ADodo%20de%20entrega%20ou%20datas%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1025 â”‚                     ðŸ“… PerÃ­odo de entrega ou datas importantes
 1026 â”‚                   </label>
 1027 â”‚                   <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1027:18" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1027" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Prova%20em%202%20semanas%2C%20ENEM%20em%20novembro...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1028 â”‚                     type="text"
 1029 â”‚                     value={formData.datasImportantes}
 1030 â”‚                     onChange={(e) =>
 1031 â”‚                       handleInputChange("datasImportantes", e.target.value)
 1032 â”‚                     }
 1033 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1034 â”‚                     placeholder="Ex: Prova em 2 semanas, ENEM em novembro..."
 1035 â”‚                   />
 1036 â”‚                 </div>
 1037 â”‚ 
 1038 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1038:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1038" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1039 â”‚                   <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1039:18" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1039" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20Outras%20observa%C3%A7%C3%B5es%20importantes%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1040 â”‚                     ðŸ“ Outras observaÃ§Ãµes importantes
 1041 â”‚                   </label>
 1042 â”‚                   <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1042:18" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1042" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Informa%C3%A7%C3%B5es%20adicionais%20que%20podem%20ajudar...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%20text-sm%22%7D"
 1043 â”‚                     value={formData.observacoes}
 1044 â”‚                     onChange={(e) =>
 1045 â”‚                       handleInputChange("observacoes", e.target.value)
 1046 â”‚                     }
 1047 â”‚                     className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400 text-sm"
 1048 â”‚                     rows={2}
 1049 â”‚                     placeholder="InformaÃ§Ãµes adicionais que podem ajudar..."
 1050 â”‚                   />
 1051 â”‚                 </div>
 1052 â”‚               </div>
 1053 â”‚ 
 1054 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1054:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1054" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1055 â”‚                 <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1055:16" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1055" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20text-sm%20sm%3Atext-base%22%7D"
 1056 â”‚                   onClick={handleSubmitContextualization}
 1057 â”‚                   disabled={!isContextualizationValid || isLoading}
 1058 â”‚                   className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
 1059 â”‚                 >
 1060 â”‚                   {isLoading ? "Processando..." : "Gerar Plano de Aula"}
 1061 â”‚                 </button>
 1062 â”‚               </div>
 1063 â”‚             </motion.div>
 1064 â”‚           ) : (
 1065 â”‚             <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1065:12" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1065" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20flex%20flex-col%20overflow-hidden%22%7D"
 1066 â”‚               key="actionplan-content"
 1067 â”‚               initial={{ opacity: 0, x: 20 }}
 1068 â”‚               animate={{ opacity: 1, x: 0 }}
 1069 â”‚               transition={{ duration: 0.3 }}
 1070 â”‚               className="flex-1 flex flex-col overflow-hidden"
 1071 â”‚             >
 1072 â”‚               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1072:14" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1072" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%20sm%3Amb-4%22%7D" className="flex items-center justify-between mb-3 sm:mb-4">
 1073 â”‚                 <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1073:16" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1073" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-base%20sm%3Atext-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%22%7D" className="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
 1074 â”‚                   {showAddActivityInterface ? "Adicionar Atividade Manual" : "Atividades Sugeridas"}
 1075 â”‚                 </h3>
 1076 â”‚                 {!showAddActivityInterface && (
 1077 â”‚                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1077:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1077" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D" className="flex items-center gap-2">
 1078 â”‚                     <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1078:20" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1078" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-%5B%23FF6B00%5D%2F10%20to-%5B%23FF9248%5D%2F5%20hover%3Afrom-%5B%23FF6B00%5D%2F20%20hover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-%5B%23FF6B00%5D%2F30%20hover%3Aborder-%5B%23FF6B00%5D%2F50%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
 1079 â”‚                       onClick={() => setShowAddActivityInterface(true)}
 1080 â”‚                       className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-[#FF6B00]/10 to-[#FF9248]/5 hover:from-[#FF6B00]/20 hover:to-[#FF9248]/10 border border-[#FF6B00]/30 hover:border-[#FF6B00]/50 transition-all duration-300 shadow-sm hover:shadow-md"
 1081 â”‚                       title="Adicionar Atividade Manual"
 1082 â”‚                     >
 1083 â”‚                       <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1083:22" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1083" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1084 â”‚                         <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1084:24" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1084" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1085 â”‚                       </svg>
 1086 â”‚                     </button>
 1087 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1087:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1087" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22selecionada%22%2C%22className%22%3A%22bg-%5B%23FF6B00%5D%2F10%20text-%5B%23FF6B00%5D%20px-2%20sm%3Apx-3%20py-1%20rounded-full%20text-xs%20sm%3Atext-sm%20font-medium%22%7D" className="bg-[#FF6B00]/10 text-[#FF6B00] px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium">
 1088 â”‚                       {selectedActivities2.length} selecionada
 1089 â”‚                       {selectedActivities2.length !== 1 ? "s" : ""}
 1090 â”‚                       {selectedTrilhasCount > 0 && (
 1091 â”‚                         <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1091:24" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1091" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22(%20trilha%20)%22%2C%22className%22%3A%22ml-1%20text-orange-600%22%7D" className="ml-1 text-orange-600">
 1092 â”‚                           ({selectedTrilhasCount} trilha{selectedTrilhasCount !== 1 ? "s" : ""})
 1093 â”‚                         </span>
 1094 â”‚                       )}
 1095 â”‚                     </div>
 1096 â”‚                     <GridToggleComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1096:20" data-lov-name="GridToggleComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1096" data-component-file="CardDeConstrucao.tsx" data-component-name="GridToggleComponent" data-component-content="%7B%7D" 
 1097 â”‚                       viewMode={viewMode}
 1098 â”‚                       onToggle={() => setViewMode(viewMode === 'list' ? 'grid' : 'list')}
 1099 â”‚                     />
 1100 â”‚                     <FilterComponent data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1100:20" data-lov-name="FilterComponent"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1100" data-component-file="CardDeConstrucao.tsx" data-component-name="FilterComponent" data-component-content="%7B%7D" 
 1101 â”‚                       activities={getCombinedActivities()}
 1102 â”‚                       selectedActivities2={selectedActivities2}
 1103 â”‚                       onFilterApply={(filterType) => handleFilterApply(filterType)}
 1104 â”‚                     />
 1105 â”‚                   </div>
 1106 â”‚                 )}
 1107 â”‚               </div>
 1108 â”‚ 
 1109 â”‚               {showAddActivityInterface ? (
 1110 â”‚                 <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1110:16" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1110" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%22className%22%3A%22flex-1%20overflow-y-auto%20mb-3%20sm%3Amb-4%20pr-1%20sm%3Apr-2%22%7D"
 1111 â”‚                   className="flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2"
 1112 â”‚                   initial={{ opacity: 0, x: 20 }}
 1113 â”‚                   animate={{ opacity: 1, x: 0 }}
 1114 â”‚                   transition={{ duration: 0.3 }}
 1115 â”‚                 >
 1116 â”‚                   <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1116:18" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1116" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22space-y-4%22%7D" className="space-y-4">
 1117 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1117:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1117" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1118 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1118:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1118" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%9D%20T%C3%ADtulo%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1119 â”‚                         ðŸ“ TÃ­tulo da Atividade *
 1120 â”‚                       </label>
 1121 â”‚                       <input data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1121:22" data-lov-name="input"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1121" data-component-file="CardDeConstrucao.tsx" data-component-name="input" data-component-content="%7B%22placeholder%22%3A%22Ex%3A%20Lista%20de%20Exerc%C3%ADcios%20sobre%20Fun%C3%A7%C3%B5es%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1122 â”‚                         type="text"
 1123 â”‚                         value={manualActivityForm.title}
 1124 â”‚                         onChange={(e) => handleManualFormChange('title', e.target.value)}
 1125 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1126 â”‚                         placeholder="Ex: Lista de ExercÃ­cios sobre FunÃ§Ãµes"
 1127 â”‚                         maxLength={100}
 1128 â”‚                       />
 1129 â”‚                     </div>
 1130 â”‚ 
 1131 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1131:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1131" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1132 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1132:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1132" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%8E%AF%20Tipo%20de%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1133 â”‚                         ðŸŽ¯ Tipo de Atividade *
 1134 â”‚                       </label>
 1135 â”‚                       <select data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1135:22" data-lov-name="select"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1135" data-component-file="CardDeConstrucao.tsx" data-component-name="select" data-component-content="%7B%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%22%7D"
 1136 â”‚                         value={manualActivityForm.typeId}
 1137 â”‚                         onChange={(e) => handleManualFormChange('typeId', e.target.value)}
 1138 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm"
 1139 â”‚                       >
 1140 â”‚                         <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1140:24" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1140" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%22text%22%3A%22Selecione%20o%20tipo%20de%20atividade...%22%7D" value="">Selecione o tipo de atividade...</option>
 1141 â”‚                         {schoolPowerActivities.map((activity) => (
 1142 â”‚                           <option data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1142:26" data-lov-name="option"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1142" data-component-file="CardDeConstrucao.tsx" data-component-name="option" data-component-content="%7B%7D" key={activity.id} value={activity.id}>
 1143 â”‚                             {activity.name}
 1144 â”‚                           </option>
 1145 â”‚                         ))}
 1146 â”‚                       </select>
 1147 â”‚                     </div>
 1148 â”‚ 
 1149 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1149:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1149" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D">
 1150 â”‚                       <label data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1150:22" data-lov-name="label"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1150" data-component-file="CardDeConstrucao.tsx" data-component-name="label" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8B%20Descri%C3%A7%C3%A3o%20da%20Atividade%20*%22%2C%22className%22%3A%22block%20text-sm%20font-semibold%20text-gray-800%20dark%3Atext-white%20mb-2%22%7D" className="block text-sm font-semibold text-gray-800 dark:text-white mb-2">
 1151 â”‚                         ðŸ“‹ DescriÃ§Ã£o da Atividade *
 1152 â”‚                       </label>
 1153 â”‚                       <textarea data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1153:22" data-lov-name="textarea"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1153" data-component-file="CardDeConstrucao.tsx" data-component-name="textarea" data-component-content="%7B%22placeholder%22%3A%22Descreva%20detalhadamente%20o%20que%20voc%C3%AA%20quer%20que%20seja%20feito%20nesta%20atividade...%22%2C%22className%22%3A%22w-full%20p-2%20sm%3Ap-3%20border-2%20border-%5B%23FF6B00%5D%2F30%20dark%3Aborder-%5B%23FF6B00%5D%2F40%20bg-white%2F90%20dark%3Abg-gray-800%2F80%20text-gray-900%20dark%3Atext-white%20rounded-xl%20focus%3Aring-2%20focus%3Aring-%5B%23FF6B00%5D%20focus%3Aborder-%5B%23FF6B00%5D%20transition-all%20duration-200%20backdrop-blur-sm%20placeholder-gray-500%20dark%3Aplaceholder-gray-400%22%7D"
 1154 â”‚                         value={manualActivityForm.description}
 1155 â”‚                         onChange={(e) => handleManualFormChange('description', e.target.value)}
 1156 â”‚                         className="w-full p-2 sm:p-3 border-2 border-[#FF6B00]/30 dark:border-[#FF6B00]/40 bg-white/90 dark:bg-gray-800/80 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-[#FF6B00] focus:border-[#FF6B00] transition-all duration-200 backdrop-blur-sm placeholder-gray-500 dark:placeholder-gray-400"
 1157 â”‚                         rows={4}
 1158 â”‚                         placeholder="Descreva detalhadamente o que vocÃª quer que seja feito nesta atividade..."
 1159 â”‚                         maxLength={500}
 1160 â”‚                       />
 1161 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1161:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1161" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%2F500%20caracteres%22%2C%22className%22%3A%22text-xs%20text-gray-500%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-500 dark:text-gray-400 mt-1">
 1162 â”‚                         {manualActivityForm.description.length}/500 caracteres
 1163 â”‚                       </div>
 1164 â”‚                     </div>
 1165 â”‚ 
 1166 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1166:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1166" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D" className="flex gap-3 pt-4">
 1167 â”‚                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1167:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1167" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Cancelar%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20border%20border-gray-400%20dark%3Aborder-gray-600%20rounded-xl%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20transition-colors%20duration-200%22%7D"
 1168 â”‚                         onClick={() => setShowAddActivityInterface(false)}
 1169 â”‚                         className="flex-1 px-4 py-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-400 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
 1170 â”‚                       >
 1171 â”‚                         Cancelar
 1172 â”‚                       </button>
 1173 â”‚                       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1173:22" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1173" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22text%22%3A%22Adicionar%20Atividade%22%2C%22className%22%3A%22flex-1%20px-4%20py-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D"
 1174 â”‚                         onClick={handleAddManualActivity}
 1175 â”‚                         disabled={!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()}
 1176 â”‚                         className="flex-1 px-4 py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
 1177 â”‚                       >
 1178 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1178:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1178" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%22%7D" className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 1179 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1179:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1179" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1180 â”‚                         </svg>
 1181 â”‚                         Adicionar Atividade
 1182 â”‚                       </button>
 1183 â”‚                     </div>
 1184 â”‚                   </div>
 1185 â”‚                 </motion.div>
 1186 â”‚               ) : (
 1187 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1187:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1187" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D"
 1188 â”‚                   className={`flex-1 overflow-y-auto mb-3 sm:mb-4 pr-1 sm:pr-2 ${
 1189 â”‚                     viewMode === 'grid' 
 1190 â”‚                       ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 auto-rows-min' 
 1191 â”‚                       : 'space-y-2 sm:space-y-3'
 1192 â”‚                   }`}
 1193 â”‚                   style={{
 1194 â”‚                     maxHeight: "calc(100% - 80px)",
 1195 â”‚                     scrollbarWidth: "thin",
 1196 â”‚                     scrollbarColor: "#FF6B00 rgba(255,107,0,0.1)",
 1197 â”‚                   }}
 1198 â”‚                 >
 1199 â”‚                   {(filterState === 'selected' 
 1200 â”‚                     ? selectedActivities2 
 1201 â”‚                     : getCombinedActivities()
 1202 â”‚                   )?.map((activity, index) => {
 1203 â”‚                     const isSelected = selectedActivities2.some(
 1204 â”‚                       (item) => item.id === activity.id,
 1205 â”‚                     );
 1206 â”‚ 
 1207 â”‚                     const badgeProps = getTrilhasBadgeProps(activity.id);
 1208 â”‚ 
 1209 â”‚                     return (
 1210 â”‚                       <motion.div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1210:22" data-lov-name="motion.div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1210" data-component-file="CardDeConstrucao.tsx" data-component-name="motion.div" data-component-content="%7B%7D"
 1211 â”‚                         key={activity.id}
 1212 â”‚                         className={`relative p-6 border-2 transition-all duration-300 cursor-pointer ${
 1213 â”‚                           viewMode === 'grid' ? 'rounded-[32px]' : 'rounded-[32px] mb-4'
 1214 â”‚                         } ${
 1215 â”‚                           isSelected
 1216 â”‚                             ? 'border-[#FF6B00] bg-[#FF6B00]/5 dark:bg-[#FF6B00]/10 shadow-lg transform scale-[1.02]'
 1217 â”‚                             : 'border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-[#FF6B00]/50 hover:shadow-md'
 1218 â”‚                         }`}
 1219 â”‚                         initial={{ opacity: 0, y: 20 }}
 1220 â”‚                         animate={{ opacity: 1, y: 0 }}
 1221 â”‚                         transition={{ duration: 0.3, delay: index * 0.05 }}
 1222 â”‚                         onClick={() => handleActivityToggle(activity)}
 1223 â”‚                       >
 1224 â”‚                         {/* Badge Manual - para atividades manuais */}
 1225 â”‚                         {activity.isManual && (
 1226 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1226:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1226" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" className={`absolute top-4 z-20 ${badgeProps.showBadge ? 'right-[131px]' : 'right-4'}`}>
 1227 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1227:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1227" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20px-4%20py-2%20border-2%20border-purple-500%20rounded-full%20bg-purple-500%2F10%20hover%3Abg-purple-500%2F15%20hover%3Aborder-purple-600%20transition-all%20duration-300%20cursor-default%20hover%3Ascale-105%22%7D" className="flex items-center gap-3 px-4 py-2 border-2 border-purple-500 rounded-full bg-purple-500/10 hover:bg-purple-500/15 hover:border-purple-600 transition-all duration-300 cursor-default hover:scale-105">
 1228 â”‚                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1228:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1228" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-2%20h-6%20min-w-2%20min-h-6%20flex%20items-center%20justify-center%20relative%20flex-shrink-0%22%7D" className="w-2 h-6 min-w-2 min-h-6 flex items-center justify-center relative flex-shrink-0">
 1229 â”‚                                 <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1229:32" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1229" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-purple-600%20transition-all%20duration-300%20relative%20z-10%22%7D" className="w-5 h-5 text-purple-600 transition-all duration-300 relative z-10" fill="currentColor" viewBox="0 0 20 20">
 1230 â”‚                                   <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1230:34" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1230" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
 1231 â”‚                                 </svg>
 1232 â”‚                               </div>
 1233 â”‚                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1233:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1233" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22Manual%22%2C%22className%22%3A%22text-sm%20font-bold%20text-purple-600%20whitespace-nowrap%20transition-all%20duration-300%22%7D" className="text-sm font-bold text-purple-600 whitespace-nowrap transition-all duration-300">
 1234 â”‚                                 Manual
 1235 â”‚                               </span>                            </div>
 1236 â”‚                           </div>
 1237 â”‚                         )}
 1238 â”‚ 
 1239 â”‚                         {/* Badge Trilhas */}
 1240 â”‚                         {badgeProps.showBadge && (
 1241 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1241:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1241" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20top-4%20right-4%20z-20%22%7D" className="absolute top-4 right-4 z-20">
 1242 â”‚                             <TrilhasBadge data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1242:28" data-lov-name="TrilhasBadge"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1242" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasBadge" data-component-content="%7B%7D" />
 1243 â”‚                           </div>
 1244 â”‚                         )}
 1245 â”‚ 
 1246 â”‚                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1246:24" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1246" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-start%20gap-4%22%7D" className="flex items-start gap-4">
 1247 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1247:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1247" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex-1%22%7D" className="flex-1">
 1248 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1248:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1248" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D" className="flex items-center gap-3 mb-2">
 1249 â”‚                               <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1249:30" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1249" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%7D" 
 1250 â”‚                                 className={`icon-container ${isSelected ? 'active' : ''}`}
 1251 â”‚                                 onClick={(e) => {
 1252 â”‚                                   e.stopPropagation();
 1253 â”‚                                   handleActivityToggle(activity);
 1254 â”‚                                 }}
 1255 â”‚                                 style={{
 1256 â”‚                                   width: '40px',
 1257 â”‚                                   height: '40px',
 1258 â”‚                                   minWidth: '40px',
 1259 â”‚                                   minHeight: '40px',
 1260 â”‚                                   borderRadius: '14px',
 1261 â”‚                                   display: 'flex',
 1262 â”‚                                   alignItems: 'center',
 1263 â”‚                                   justifyContent: 'center',
 1264 â”‚                                   background: isSelected 
 1265 â”‚                                     ? 'linear-gradient(135deg, #FF6E06, #FF8A39)' 
 1266 â”‚                                     : 'rgba(255, 110, 6, 0.1)',
 1267 â”‚                                   transition: 'all 0.3s ease',
 1268 â”‚                                   position: 'relative',
 1269 â”‚                                   overflow: 'hidden',
 1270 â”‚                                   cursor: 'pointer',
 1271 â”‚                                   boxShadow: isSelected 
 1272 â”‚                                     ? '0 6px 12px rgba(255, 110, 6, 0.3)' 
 1273 â”‚                                     : 'none',
 1274 â”‚                                   transform: isSelected ? 'scale(1.05)' : 'scale(1)'
 1275 â”‚                                 }}
 1276 â”‚                               >
 1277 â”‚                                 {isSelected ? (
 1278 â”‚                                   <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1278:34" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1278" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-5%20h-5%20text-white%20transition-all%20duration-300%20relative%20z-10%22%7D" 
 1279 â”‚                                     className="w-5 h-5 text-white transition-all duration-300 relative z-10" 
 1280 â”‚                                     fill="currentColor" 
 1281 â”‚                                     viewBox="0 0 20 20"
 1282 â”‚                                   >
 1283 â”‚                                     <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1283:36" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1283" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" 
 1284 â”‚                                       fillRule="evenodd" 
 1285 â”‚                                       d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" 
 1286 â”‚                                       clipRule="evenodd"/>
 1287 â”‚                                   </svg>
 1288 â”‚                                 ) : (
 1289 â”‚                                   React.createElement(getIconByActivityId(activity.id), {
 1290 â”‚                                     className: `w-5 h-5 transition-all duration-300 relative z-10`,
 1291 â”‚                                     style: {
 1292 â”‚                                       color: '#FF6E06'
 1293 â”‚                                     }
 1294 â”‚                                   })
 1295 â”‚                                 )}
 1296 â”‚                                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1296:32" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1296" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22icon-glow%22%7D" 
 1297 â”‚                                   className="icon-glow"
 1298 â”‚                                   style={{
 1299 â”‚                                     position: 'absolute',
 1300 â”‚                                     top: '50%',
 1301 â”‚                                     left: '50%',
 1302 â”‚                                     width: '20px',
 1303 â”‚                                     height: '20px',
 1304 â”‚                                     background: 'radial-gradient(circle, rgba(255, 110, 6, 0.5), transparent)',
 1305 â”‚                                     borderRadius: '50%',
 1306 â”‚                                     transform: isSelected 
 1307 â”‚                                       ? 'translate(-50%, -50%) scale(2.2)' 
 1308 â”‚                                       : 'translate(-50%, -50%) scale(0)',
 1309 â”‚                                     transition: 'transform 0.3s ease'
 1310 â”‚                                   }}
 1311 â”‚                                 />
 1312 â”‚                               </div>
 1313 â”‚ 
 1314 â”‚                               <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1314:30" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1314" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20line-clamp-2%20flex-1%20pr-8%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 flex-1 pr-8">
 1315 â”‚                                 {activity.title}
 1316 â”‚                               </h3>
 1317 â”‚                             </div>
 1318 â”‚ 
 1319 â”‚                             <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1319:28" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1319" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20leading-relaxed%20line-clamp-3%20mb-3%22%7D" className="text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-3 mb-3">
 1320 â”‚                               {activity.description}
 1321 â”‚                             </p>
 1322 â”‚ 
 1323 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1323:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1323" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22text%22%3A%22%F0%9F%93%8A%20%E2%80%A2%20%E2%8F%B1%EF%B8%8F%22%2C%22className%22%3A%22text-xs%20text-gray-600%20dark%3Atext-gray-400%20mt-1%22%7D" className="text-xs text-gray-600 dark:text-gray-400 mt-1">
 1324 â”‚                                         ðŸ“Š {activity.difficulty} â€¢ â±ï¸ {activity.duration || '30 min'}
 1325 â”‚                                       </div>
 1326 â”‚ 
 1327 â”‚                                       {/* Exibir customFields como tags/badges */}
 1328 â”‚                                       {activity.customFields && Object.keys(activity.customFields).length > 0 && (
 1329 â”‚                                         <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1329:40" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1329" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-3%20flex%20flex-wrap%20gap-2%22%7D" className="mt-3 flex flex-wrap gap-2">
 1330 â”‚                                           {Object.entries(activity.customFields).map(([key, value]) => (
 1331 â”‚                                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1331:44" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1331" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22inline-flex%20items-center%20px-2.5%20py-1%20rounded-full%20text-xs%20font-medium%20bg-gradient-to-r%20from-blue-50%20to-indigo-50%20dark%3Afrom-blue-900%2F30%20dark%3Ato-indigo-900%2F30%20text-blue-700%20dark%3Atext-blue-300%20border%20border-blue-200%20dark%3Aborder-blue-700%20hover%3Afrom-blue-100%20hover%3Ato-indigo-100%20dark%3Ahover%3Afrom-blue-900%2F40%20dark%3Ahover%3Ato-indigo-900%2F40%20transition-all%20duration-200%22%7D" 
 1332 â”‚                                               key={key} 
 1333 â”‚                                               className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-900/40 dark:hover:to-indigo-900/40 transition-all duration-200"
 1334 â”‚                                             >
 1335 â”‚                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1335:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1335" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22%3A%22%2C%22className%22%3A%22font-semibold%22%7D" className="font-semibold">{key}:</span>
 1336 â”‚                                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1336:46" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1336" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22className%22%3A%22ml-1%20truncate%20max-w-%5B150px%5D%22%7D" className="ml-1 truncate max-w-[150px]">{value}</span>
 1337 â”‚                                             </div>
 1338 â”‚                                           ))}
 1339 â”‚                                         </div>
 1340 â”‚                                       )}
 1341 â”‚ 
 1342 â”‚                             <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1342:28" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1342" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22mt-2%22%7D" className="mt-2">
 1343 â”‚                               <span data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1343:30" data-lov-name="span"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1343" data-component-file="CardDeConstrucao.tsx" data-component-name="span" data-component-content="%7B%22text%22%3A%22ID%3A%22%2C%22className%22%3A%22text-xs%20px-2%20py-1%20bg-gray-100%20dark%3Abg-gray-800%20text-gray-500%20dark%3Atext-gray-400%20rounded%22%7D" className="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded">
 1344 â”‚                                 ID: {activity.id}
 1345 â”‚                               </span>
 1346 â”‚                             </div>
 1347 â”‚                           </div>
 1348 â”‚                         </div>
 1349 â”‚ 
 1350 â”‚                         {isSelected && (
 1351 â”‚                           <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1351:26" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1351" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22absolute%20inset-0%20rounded-%5B32px%5D%20border-2%20border-%5B%23FF6B00%5D%20animate-pulse%20opacity-50%20pointer-events-none%22%7D" className="absolute inset-0 rounded-[32px] border-2 border-[#FF6B00] animate-pulse opacity-50 pointer-events-none"></div>
 1352 â”‚                         )}
 1353 â”‚                       </motion.div>
 1354 â”‚                     );
 1355 â”‚                   })}
 1356 â”‚ 
 1357 â”‚                   {filterState === 'selected' && selectedActivities2.length === 0 && (
 1358 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1358:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1358" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1359 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1359:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1359" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1360 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1360:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1360" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1361 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1361:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1361" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
 1362 â”‚                         </svg>
 1363 â”‚                       </div>
 1364 â”‚                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1364:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1364" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20selecionada%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1365 â”‚                         Nenhuma atividade selecionada
 1366 â”‚                       </h3>
 1367 â”‚                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1367:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1367" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Selecione%20algumas%20atividades%20primeiro%20para%20v%C3%AA-las%20aqui%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1368 â”‚                         Selecione algumas atividades primeiro para vÃª-las aqui
 1369 â”‚                       </p>
 1370 â”‚                     </div>
 1371 â”‚                   )}
 1372 â”‚ 
 1373 â”‚                   {getCombinedActivities().length === 0 && (
 1374 â”‚                     <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1374:20" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1374" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20py-12%20text-center%22%7D" className="flex flex-col items-center justify-center py-12 text-center">
 1375 â”‚                       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1375:22" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1375" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22w-16%20h-16%20bg-gray-100%20dark%3Abg-gray-800%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D" className="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
 1376 â”‚                         <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1376:24" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1376" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-8%20h-8%20text-gray-400%22%7D" className="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 1377 â”‚                           <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1377:26" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1377" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
 1378 â”‚                         </svg>
 1379 â”‚                       </div>
 1380 â”‚                       <h3 data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1380:22" data-lov-name="h3"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1380" data-component-file="CardDeConstrucao.tsx" data-component-name="h3" data-component-content="%7B%22text%22%3A%22Nenhuma%20atividade%20dispon%C3%ADvel%22%2C%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20mb-2%22%7D" className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
 1381 â”‚                         Nenhuma atividade disponÃ­vel
 1382 â”‚                       </h3>
 1383 â”‚                       <p data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1383:22" data-lov-name="p"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1383" data-component-file="CardDeConstrucao.tsx" data-component-name="p" data-component-content="%7B%22text%22%3A%22Adicione%20atividades%20manuais%20ou%20aguarde%20as%20sugest%C3%B5es%20da%20IA%22%2C%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-400%20max-w-xs%22%7D" className="text-sm text-gray-500 dark:text-gray-400 max-w-xs">
 1384 â”‚                         Adicione atividades manuais ou aguarde as sugestÃµes da IA
 1385 â”‚                       </p>
 1386 â”‚                     </div>
 1387 â”‚                   )}
 1388 â”‚                 </div>
 1389 â”‚               )}
 1390 â”‚ 
 1391 â”‚               {!showAddActivityInterface && (
 1392 â”‚                 <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1392:16" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1392" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22flex%20justify-end%20pt-3%20sm%3Apt-4%20border-t%20border-gray-300%20dark%3Aborder-gray-700%22%7D" className="flex justify-end pt-3 sm:pt-4 border-t border-gray-300 dark:border-gray-700">
 1393 â”‚                   <Button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1393:18" data-lov-name="Button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1393" data-component-file="CardDeConstrucao.tsx" data-component-name="Button" data-component-content="%7B%22className%22%3A%22px-4%20sm%3Apx-6%20py-2%20sm%3Apy-3%20bg-%5B%23FF6B00%5D%20hover%3Abg-%5B%23D65A00%5D%20text-white%20font-semibold%20rounded-xl%20transition-colors%20duration-200%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20gap-2%20text-sm%20sm%3Atext-base%22%7D"
 1394 â”‚                     onClick={handleApproveActionPlan}
 1395 â”‚                     disabled={selectedActivities2.length === 0 || isLoading}
 1396 â”‚                     className="px-4 sm:px-6 py-2 sm:py-3 bg-[#FF6B00] hover:bg-[#D65A00] text-white font-semibold rounded-xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base"
 1397 â”‚                   >
 1398 â”‚                     <Target data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1398:20" data-lov-name="Target"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1398" data-component-file="CardDeConstrucao.tsx" data-component-name="Target" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20sm%3Aw-5%20sm%3Ah-5%22%7D" className="w-4 h-4 sm:w-5 sm:h-5" />
 1399 â”‚                     {isLoading
 1400 â”‚                       ? "Processando..."
 1401 â”‚                       : `Aprovar Plano (${selectedActivities2.length})`}
 1402 â”‚                   </Button>
 1403 â”‚                 </div>
 1404 â”‚               )}
 1405 â”‚             </motion.div>
 1406 â”‚           )}
 1407 â”‚         </motion.div>
 1408 â”‚       )}
 1409 â”‚ 
 1410 â”‚       {/* Debug Panel para verificar sistema de Trilhas */}
 1411 â”‚       {actionPlan && (
 1412 â”‚         <TrilhasDebugPanel data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1412:8" data-lov-name="TrilhasDebugPanel"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1412" data-component-file="CardDeConstrucao.tsx" data-component-name="TrilhasDebugPanel" data-component-content="%7B%7D" 
 1413 â”‚           activities={actionPlan.map(activity => ({ 
 1414 â”‚             id: activity.id, 
 1415 â”‚             title: activity.title 
 1416 â”‚           }))}
 1417 â”‚           isVisible={showTrilhasDebug}
 1418 â”‚         />
 1419 â”‚       )}
 1420 â”‚ 
 1421 â”‚       {/* BotÃ£o para toggle do debug (sÃ³ visÃ­vel em desenvolvimento) */}
 1422 â”‚       {process.env.NODE_ENV === 'development' && actionPlan && (
 1423 â”‚         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:1423:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="1423" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22fixed%20bottom-4%20left-4%20z-40%20bg-blue-500%20text-white%20px-3%20py-2%20rounded-lg%20text-xs%20font-medium%20shadow-lg%20hover%3Abg-blue-600%20transition-colors%22%7D"
 1424 â”‚           onClick={() => setShowTrilhasDebug(!showTrilhasDebug)}
 1425 â”‚           className="fixed bottom-4 left-4 z-40 bg-blue-500 text-white px-3 py-2 rounded-lg text-xs font-medium shadow-lg hover:bg-blue-600 transition-colors"
 1426 â”‚         >
 1427 â”‚           {showTrilhasDebug ? 'ðŸ” Fechar Debug' : 'ðŸ” Debug Trilhas'}
 1428 â”‚         </button>
 1429 â”‚       )}
 1430 â”‚     </motion.div>
 1431 â”‚   );
 1432 â”‚ }
 1433 â”‚ 
 1434 â”‚ import {
 1435 â”‚   AlertDialog,
 1436 â”‚   AlertDialogAction,
 1437 â”‚   AlertDialogCancel,
 1438 â”‚   AlertDialogContent,
 1439 â”‚   AlertDialogDescription,
 1440 â”‚   AlertDialogFooter,
 1441 â”‚   AlertDialogHeader,
 1442 â”‚   AlertDialogTitle,
 1443 â”‚   AlertDialogTrigger,
 1444 â”‚ } from "@/components/ui/alert-dialog"
 1445 â”‚ import {
 1446 â”‚   Form,
 1447 â”‚   FormControl,
 1448 â”‚   FormDescription,
 1449 â”‚   FormField,
 1450 â”‚   FormItem,
 1451 â”‚   FormLabel,
 1452 â”‚   FormMessage,
 1453 â”‚ } from "@/components/ui/form"
 1454 â”‚ import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
 1455 â”‚ import { ScrollArea } from "@/components/ui/scroll-area"
 1456 â”‚ import { Separator } from "@/components/ui/separator"
 1457 â”‚ import { Slider } from "@/components/ui/slider"
 1458 â”‚ import { Switch } from "@/components/ui/switch"
 1459 â”‚ import { Textarea } from "@/components/ui/textarea"
      Â·          â”€â”€â”€â”€â”¬â”€â”€â”€
      Â·              â•°â”€â”€ `Textarea` redefined here
 1460 â”‚ import { Trash } from "lucide-react"
 1461 â”‚ import { Calendar } from "@/components/ui/calendar"
 1462 â”‚ import { cn } from "@/lib/utils"
      â•°â”€â”€â”€â”€

  Ã— the name `Calendar` is defined multiple times
      â•­â”€[/home/runner/workspace/src/features/schoolpower/construction/CardDeConstrucao.tsx:13:1]
   13 â”‚   Target,
   14 â”‚   BookOpen,
   15 â”‚   Users,
   16 â”‚   Calendar,
      Â·   â”€â”€â”€â”€â”¬â”€â”€â”€
      Â·       â•°â”€â”€ previous definition of `Calendar` here
   17 â”‚   AlertCircle,
   18 â”‚   Loader2,
   19 â”‚   FileText,
   20 â”‚   Edit3,
   21 â”‚   Eye,
   22 â”‚   Play
   23 â”‚ } from 'lucide-react';
   24 â”‚ import { Textarea } from '@/components/ui/textarea';
   25 â”‚ import { Label } from '@/components/ui/label';
   26 â”‚ import { Input } from '@/components/ui/input';
   27 â”‚ import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
   28 â”‚ import { Separator } from '@/components/ui/separator';
   29 â”‚ import { Progress } from '@/components/ui/progress';
   30 â”‚ import { ConstructionGrid } from './ConstructionGrid';
   31 â”‚ 
   32 â”‚ import { 
   33 â”‚   Wrench, CheckSquare, Filter, 
   34 â”‚   Trophy, Zap, Brain, Heart, 
   35 â”‚   PenTool, Presentation, Search, MapPin, Calculator, Globe,
   36 â”‚   Microscope, Palette, Music, Camera, Video, Headphones,
   37 â”‚   Gamepad2, Puzzle, Award, Star, Flag, Compass,
   38 â”‚   Download, Upload, Share2, MessageSquare, ThumbsUp,
   39 â”‚   Pause, SkipForward, Volume2, Wifi, Battery,
   40 â”‚   Shield, Lock, Key, Mail, Phone, Home, Car, Plane,
   41 â”‚   TreePine, Sun, Moon, Cloud, Umbrella, Snowflake, Triangle
   42 â”‚ } from "lucide-react";
   43 â”‚ import { ContextualizationData } from "../contextualization/ContextualizationCard";
   44 â”‚ import { ActionPlanItem } from "../actionplan/ActionPlanCard";
   45 â”‚ import { isActivityEligibleForTrilhas, getTrilhasBadgeProps } from "../data/trilhasActivitiesConfig";
   46 â”‚ import { TrilhasDebugPanel } from "../components/TrilhasDebugPanel";
   47 â”‚ import { TrilhasBadge } from "../components/TrilhasBadge";
   48 â”‚ import schoolPowerActivitiesData from '../data/schoolPowerActivities.json';
   49 â”‚ import { ConstructionInterface } from './index';
   50 â”‚ import atividadesTrilhas from '../data/atividadesTrilhas.json';
   51 â”‚ import { getCustomFieldsForActivity, hasCustomFields } from '../data/activityCustomFields';
   52 â”‚ 
   53 â”‚ // Convert to proper format with name field
   54 â”‚ const schoolPowerActivities = schoolPowerActivitiesData.map(activity => ({
   55 â”‚   ...activity,
   56 â”‚   name: activity.name || activity.title || activity.description
   57 â”‚ }));
   58 â”‚ 
   59 â”‚ export interface ContextualizationData {
   60 â”‚   materias: string;
   61 â”‚   publicoAlvo: string;
   62 â”‚   restricoes: string;
   63 â”‚   datasImportantes?: string;
   64 â”‚   observacoes?: string;
   65 â”‚ }
   66 â”‚ 
   67 â”‚ export interface ActionPlanItem {
   68 â”‚   id: string;
   69 â”‚   title: string;
   70 â”‚   description: string;
   71 â”‚   duration?: string;
   72 â”‚   difficulty?: string;
   73 â”‚   category?: string;
   74 â”‚   type?: string;
   75 â”‚   approved: boolean;
   76 â”‚   isTrilhasEligible?: boolean;
   77 â”‚   customFields?: Record<string, string>;
   78 â”‚   isManual?: boolean;
   79 â”‚ }
   80 â”‚ 
   81 â”‚ interface CardDeConstrucaoProps {
   82 â”‚   step: 'contextualization' | 'actionPlan' | 'generating' | 'generatingActivities' | 'construction' | 'activities';
   83 â”‚   contextualizationData?: ContextualizationData | null;
   84 â”‚   actionPlan?: ActionPlanItem[] | null;
   85 â”‚   onSubmitContextualization: (data: ContextualizationData) => void;
   86 â”‚   onApproveActionPlan: (approvedItems: ActionPlanItem[]) => void;
   87 â”‚   onResetFlow: () => void;
   88 â”‚   isLoading?: boolean;
   89 â”‚ }
   90 â”‚ 
   91 â”‚ export function CardDeConstrucao({ 
   92 â”‚   step, 
   93 â”‚   contextualizationData, 
   94 â”‚   actionPlan, 
   95 â”‚   onSubmitContextualization, 
   96 â”‚   onApproveActionPlan, 
   97 â”‚   onResetFlow,
   98 â”‚   isLoading 
   99 â”‚ }: CardDeConstrucaoProps) {
  100 â”‚   const [localContextData, setLocalContextData] = useState<ContextualizationData>({
  101 â”‚     materias: '',
  102 â”‚     publicoAlvo: '',
  103 â”‚     restricoes: '',
  104 â”‚     datasImportantes: '',
  105 â”‚     observacoes: ''
  106 â”‚   });
  107 â”‚ 
  108 â”‚   const [actionPlanItems, setActionPlanItems] = useState<ActionPlanItem[]>([]);
  109 â”‚   const [selectedActivities, setSelectedActivities] = useState<ActionPlanItem[]>([]);
  110 â”‚   // Form data for contextualization
  111 â”‚   const [formData, setFormData] = useState<ContextualizationData>({
  112 â”‚     materias: "",
  113 â”‚     publicoAlvo: "",
  114 â”‚     restricoes: "",
  115 â”‚     datasImportantes: "",
  116 â”‚     observacoes: "",
  117 â”‚   });
  118 â”‚ 
  119 â”‚   // Selected activities for action plan
  120 â”‚   const [selectedActivities2, setSelectedActivities2] = useState<ActionPlanItem[]>([]);
  121 â”‚ 
  122 â”‚   // Filter state for action plan
  123 â”‚   const [filterState, setFilterState] = useState<'all' | 'selected'>('all');
  124 â”‚ 
  125 â”‚   // View mode state (list or grid)
  126 â”‚   const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  127 â”‚ 
  128 â”‚   // Debug state for trilhas system
  129 â”‚   const [showTrilhasDebug, setShowTrilhasDebug] = useState<boolean>(false);
  130 â”‚ 
  131 â”‚   // Estado para mostrar a interface de adicionar atividade manual
  132 â”‚   const [showAddActivityInterface, setShowAddActivityInterface] = useState(false);
  133 â”‚ 
  134 â”‚   // Manual activity addition state
  135 â”‚   const [manualActivities, setManualActivities] = useState<ActionPlanItem[]>([]);
  136 â”‚ 
  137 â”‚   // Manual activity form state
  138 â”‚   const [manualActivityForm, setManualActivityForm] = useState({
  139 â”‚     title: '',
  140 â”‚     typeId: '',
  141 â”‚     description: ''
  142 â”‚   });
  143 â”‚ 
  144 â”‚   // State for activity building process
  145 â”‚   const [isBuilding, setIsBuilding] = useState(false);
  146 â”‚ 
  147 â”‚   // State for tracking building progress
  148 â”‚   const [progress, setProgress] = useState<{
  149 â”‚     total: number;
  150 â”‚     completed: number;
  151 â”‚     current: string;
  152 â”‚     errors: string[];
  153 â”‚   } | null>(null);
  154 â”‚ 
  155 â”‚   // Function to simulate activity building
  156 â”‚   const buildActivities = async (activities: ActionPlanItem[], contextData?: any): Promise<boolean> => {
  157 â”‚     setIsBuilding(true);
  158 â”‚     setProgress({
  159 â”‚       total: activities.length,
  160 â”‚       completed: 0,
  161 â”‚       current: '',
  162 â”‚       errors: []
  163 â”‚     });
  164 â”‚ 
  165 â”‚     let allSuccess = true;
  166 â”‚ 
  167 â”‚     for (let i = 0; i < activities.length; i++) {
  168 â”‚       const activity = activities[i];
  169 â”‚       setProgress(prev => ({
  170 â”‚         ...prev,
  171 â”‚         current: `Construindo ${activity.title} (${i + 1}/${activities.length})`
  172 â”‚       }));
  173 â”‚ 
  174 â”‚       try {
  175 â”‚         // Simulate building
  176 â”‚         await new Promise(resolve => setTimeout(resolve, 1000));
  177 â”‚ 
  178 â”‚         // Simulate occasional errors
  179 â”‚         if (Math.random() < 0.2) {
  180 â”‚           throw new Error(`Falha ao construir ${activity.title}`);
  181 â”‚         }
  182 â”‚ 
  183 â”‚         setProgress(prev => ({
  184 â”‚           ...prev,
  185 â”‚           completed: prev.completed + 1
  186 â”‚         }));
  187 â”‚       } catch (error: any) {
  188 â”‚         console.error(error);
  189 â”‚         allSuccess = false;
  190 â”‚         setProgress(prev => ({
  191 â”‚           ...prev,
  192 â”‚           errors: [...prev.errors, error.message]
  193 â”‚         }));
  194 â”‚       }
  195 â”‚     }
  196 â”‚ 
  197 â”‚     setIsBuilding(false);
  198 â”‚     setProgress(prev => ({ ...prev, current: 'Finalizado!' }));
  199 â”‚     return allSuccess;
  200 â”‚   };
  201 â”‚ 
  202 â”‚   // Load existing data when component mounts
  203 â”‚   useEffect(() => {
  204 â”‚     if (contextualizationData) {
  205 â”‚       setFormData(contextualizationData);
  206 â”‚     }
  207 â”‚   }, [contextualizationData]);
  208 â”‚ 
  209 â”‚   // Handle form input changes
  210 â”‚   const handleInputChange = (
  211 â”‚     field: keyof ContextualizationData,
  212 â”‚     value: string,
  213 â”‚   ) => {
  214 â”‚     setFormData((prev) => ({
  215 â”‚       ...prev,
  216 â”‚       [field]: value,
  217 â”‚     }));
  218 â”‚   };
  219 â”‚ 
  220 â”‚   // Handle contextualization form submission
  221 â”‚   const handleSubmitContextualization = () => {
  222 â”‚     if (onSubmitContextualization) {
  223 â”‚       onSubmitContextualization(formData);
  224 â”‚     }
  225 â”‚   };
  226 â”‚ 
  227 â”‚   // Handle activity selection toggle
  228 â”‚   const handleActivityToggle = (activity: ActionPlanItem) => {
  229 â”‚     setSelectedActivities2((prev) => {
  230 â”‚       const isSelected = prev.some((item) => item.id === activity.id);
  231 â”‚       if (isSelected) {
  232 â”‚         return prev.filter((item) => item.id !== activity.id);
  233 â”‚       } else {
  234 â”‚         return [...prev, { ...activity, approved: true }];
  235 â”‚       }
  236 â”‚     });
  237 â”‚   };
  238 â”‚ 
  239 â”‚   useEffect(() => {
  240 â”‚     if (actionPlan) {
  241 â”‚       console.log('ðŸŽ¯ ActionPlan recebido no CardDeConstrucao:', actionPlan);
  242 â”‚       const approved = actionPlan.filter(item => item.approved);
  243 â”‚       setSelectedActivities2(approved);
  244 â”‚     }
  245 â”‚   }, [actionPlan, step]);
  246 â”‚ 
  247 â”‚   const handleApproveActionPlan = async () => {
  248 â”‚     console.log('âœ… Plano de aÃ§Ã£o aprovado! Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  249 â”‚ 
  250 â”‚     // Aprovar plano primeiro
  251 â”‚     onApproveActionPlan(selectedActivities2);
  252 â”‚ 
  253 â”‚     // Construir atividades automaticamente usando o novo sistema
  254 â”‚     if (selectedActivities2.length > 0) {
  255 â”‚       try {
  256 â”‚         console.log('ðŸ”§ Iniciando construÃ§Ã£o automÃ¡tica com ModalBinderEngine...');
  257 â”‚         console.log('ðŸ“‹ Atividades selecionadas:', selectedActivities2.map(a => a.title));
  258 â”‚ 
  259 â”‚         // Usar o contexto de contextualizaÃ§Ã£o para enriquecer a geraÃ§Ã£o
  260 â”‚         const contextData = {
  261 â”‚           materias: formData.materias,
  262 â”‚           publicoAlvo: formData.publicoAlvo,
  263 â”‚           restricoes: formData.restricoes,
  264 â”‚           datasImportantes: formData.datasImportantes,
  265 â”‚           observacoes: formData.observacoes
  266 â”‚         };
  267 â”‚ 
  268 â”‚         console.log('ðŸŽ¯ Dados de contexto para geraÃ§Ã£o:', contextData);
  269 â”‚ 
  270 â”‚         const success = await buildActivities(selectedActivities2, contextData);
  271 â”‚ 
  272 â”‚         if (success) {
  273 â”‚           console.log('ðŸŽ‰ Todas as atividades foram construÃ­das automaticamente com ModalBinderEngine!');
  274 â”‚ 
  275 â”‚           // Exibir notificaÃ§Ã£o de sucesso
  276 â”‚           console.log('âœ… Sistema de construÃ§Ã£o automÃ¡tica funcionando corretamente!');
  277 â”‚         } else {
  278 â”‚           console.warn('âš ï¸ Algumas atividades podem ter falhado na construÃ§Ã£o automÃ¡tica');
  279 â”‚         }
  280 â”‚       } catch (error) {
  281 â”‚         console.error('âŒ Erro durante construÃ§Ã£o automÃ¡tica:', error);
  282 â”‚         console.error('ðŸ“Š Detalhes do erro:', {
  283 â”‚           message: error.message,
  284 â”‚           stack: error.stack,
  285 â”‚           selectedActivities: selectedActivities2.length,
  286 â”‚           contextData: !!contextData
  287 â”‚         });
  288 â”‚       }
  289 â”‚     } else {
  290 â”‚       console.log('â„¹ï¸ Nenhuma atividade selecionada para construÃ§Ã£o automÃ¡tica');
  291 â”‚     }
  292 â”‚   };
  293 â”‚ 
  294 â”‚   // Handle manual activity form submission
  295 â”‚   const handleAddManualActivity = () => {
  296 â”‚     if (!manualActivityForm.title.trim() || !manualActivityForm.typeId || !manualActivityForm.description.trim()) {
  297 â”‚       return;
  298 â”‚     }
  299 â”‚ 
  300 â”‚     // Find the activity type from schoolPowerActivities
  301 â”‚     const activityType = schoolPowerActivities.find(activity => activity.id === manualActivityForm.typeId);
  302 â”‚ 
  303 â”‚     const newManualActivity: ActionPlanItem = {
  304 â”‚       id: manualActivityForm.typeId,
  305 â”‚       title: manualActivityForm.title,
  306 â”‚       description: manualActivityForm.description,
  307 â”‚       duration: "Personalizado",
  308 â”‚       difficulty: "Personalizado", 
  309 â”‚       category: activityType?.tags[0] || "manual",
  310 â”‚       type: activityType?.name || "Atividade Manual",
  311 â”‚       isManual: true,
  312 â”‚       approved: false,
  313 â”‚       customFields: {} // Atividades manuais tambÃ©m podem ter customFields
  314 â”‚     };
  315 â”‚ 
  316 â”‚     // Add to manual activities list
  317 â”‚     setManualActivities(prev => [...prev, newManualActivity]);
  318 â”‚ 
  319 â”‚     // Clear form
  320 â”‚     setManualActivityForm({
  321 â”‚       title: '',
  322 â”‚       typeId: '',
  323 â”‚       description: ''
  324 â”‚     });
  325 â”‚ 
  326 â”‚     // Return to action plan interface
  327 â”‚     setShowAddActivityInterface(false);
  328 â”‚   };
  329 â”‚ 
  330 â”‚   // Handle manual activity form changes
  331 â”‚   const handleManualFormChange = (field: string, value: string) => {
  332 â”‚     setManualActivityForm(prev => ({
  333 â”‚       ...prev,
  334 â”‚       [field]: value
  335 â”‚     }));
  336 â”‚   };
  337 â”‚ 
  338 â”‚   // Get combined activities (AI suggestions + manual)
  339 â”‚   const getCombinedActivities = () => {
  340 â”‚     const aiActivities = actionPlan || [];
  341 â”‚     const allActivities = [...aiActivities, ...manualActivities];
  342 â”‚     return allActivities;
  343 â”‚   };
  344 â”‚ 
  345 â”‚   // Check if contextualization form is valid
  346 â”‚   const isContextualizationValid =
  347 â”‚     formData.materias.trim() && formData.publicoAlvo.trim();
  348 â”‚ 
  349 â”‚   // Grid Toggle Component
  350 â”‚   const GridToggleComponent = ({ viewMode, onToggle }: {
  351 â”‚     viewMode: 'list' | 'grid';
  352 â”‚     onToggle: () => void;
  353 â”‚   }) => {
  354 â”‚     return (
  355 â”‚       <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:355:6" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="355" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  356 â”‚         onClick={onToggle}
  357 â”‚         className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  358 â”‚         title={viewMode === 'list' ? 'VisualizaÃ§Ã£o em Grade' : 'VisualizaÃ§Ã£o em Lista'}
  359 â”‚       >
  360 â”‚         {viewMode === 'list' ? (
  361 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:361:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="361" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
  362 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:362:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="362" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
  363 â”‚           </svg>
  364 â”‚         ) : (
  365 â”‚           <svg data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:365:10" data-lov-name="svg"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="365" data-component-file="CardDeConstrucao.tsx" data-component-name="svg" data-component-content="%7B%22className%22%3A%22w-4%20h-4%20text-gray-600%20dark%3Atext-gray-300%20hover%3Atext-%5B%23FF6B00%5D%20transition-colors%20duration-200%22%7D" className="w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-[#FF6B00] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  366 â”‚             <path data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:366:12" data-lov-name="path"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="366" data-component-file="CardDeConstrucao.tsx" data-component-name="path" data-component-content="%7B%7D" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
  367 â”‚           </svg>
  368 â”‚         )}
  369 â”‚       </button>
  370 â”‚     );
  371 â”‚   };
  372 â”‚ 
  373 â”‚   // Filter Component
  374 â”‚   const FilterComponent = ({ activities, selectedActivities2, onFilterApply }: {
  375 â”‚     activities: ActionPlanItem[];
  376 â”‚     selectedActivities2: ActionPlanItem[];
  377 â”‚     onFilterApply: (filterType: string) => void;
  378 â”‚   }) => {
  379 â”‚     const [isFilterOpen, setIsFilterOpen] = useState(false);
  380 â”‚     const filterRef = useRef<HTMLDivElement>(null);
  381 â”‚ 
  382 â”‚     useEffect(() => {
  383 â”‚       const handleClickOutside = (event: MouseEvent) => {
  384 â”‚         if (filterRef.current && !filterRef.current.contains(event.target as Node)) {
  385 â”‚           setIsFilterOpen(false);
  386 â”‚         }
  387 â”‚       };
  388 â”‚ 
  389 â”‚       document.addEventListener('mousedown', handleClickOutside);
  390 â”‚       return () => document.removeEventListener('mousedown', handleClickOutside);
  391 â”‚     }, []);
  392 â”‚ 
  393 â”‚     return (
  394 â”‚       <div data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:394:6" data-lov-name="div"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="394" data-component-file="CardDeConstrucao.tsx" data-component-name="div" data-component-content="%7B%22className%22%3A%22relative%22%7D" className="relative" ref={filterRef}>
  395 â”‚         <button data-lov-id="src/features/schoolpower/construction/CardDeConstrucao.tsx:395:8" data-lov-name="button"  data-component-path="src/features/schoolpower/construction/CardDeConstrucao.tsx" data-component-line="395" data-component-file="CardDeConstrucao.tsx" data-component-name="button" data-component-content="%7B%22className%22%3A%22w-9%20h-9%20flex%20items-center%20justify-center%20rounded-xl%20bg-gradient-to-br%20from-gray-50%20to-gray-100%20dark%3Afrom-gray-800%20dark%3Ato-gray-750%20hover%3Afrom-%5B%23FF6B00%5D%2F5%20hover%3Ato-%5B%23FF9248%5D%2F5%20dark%3Ahover%3Afrom-%5B%23FF6B00%5D%2F10%20dark%3Ahover%3Ato-%5B%23FF9248%5D%2F10%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Aborder-%5B%23FF6B00%5D%2F30%20transition-all%20duration-300%20shadow-sm%20hover%3Ashadow-md%22%7D"
  396 â”‚           onClick={() => setIsFilterOpen(!isFilterOpen)}
  397 â”‚           className="w-9 h-9 flex items-center justify-center rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-750 hover:from-[#FF6B00]/5 hover:to-[#FF9248]/5 dark:hover:from-[#FF6B00]/10 dark:hover:to-[#FF9248]/10 border border-gray-200 dark:border-gray-600 hover:border-[#FF6B00]/30 transition-all duration-300 shadow-sm hover:shadow-md"
  398 â”‚           title="Filtros e AÃ§Ãµes"
  399 â”‚         >