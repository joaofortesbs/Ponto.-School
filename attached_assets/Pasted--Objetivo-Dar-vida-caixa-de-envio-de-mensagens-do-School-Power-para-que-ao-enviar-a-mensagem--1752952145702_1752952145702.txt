ğŸš€ Objetivo:
Dar vida Ã  caixa de envio de mensagens do School Power para que, ao enviar a mensagem:

âœ… A mensagem seja enviada e armazenada no sistema (mensagem inicial do usuÃ¡rio).
âœ… Todos os componentes da interface (TopHeader, ProfileSelector, SideMenu, ChatInput) desapareÃ§am temporariamente.
âœ… ApareÃ§a um Card central de Quiz de ContextualizaÃ§Ã£o, com perguntas estratÃ©gicas.
âœ… As respostas do usuÃ¡rio neste Quiz sejam coletadas e armazenadas junto com a mensagem inicial.
âœ… Estes dados fiquem prontos para a IA utilizar na geraÃ§Ã£o do Plano de AÃ§Ã£o (CheckList) e Atividades posteriormente.

ğŸ“ Arquivos a serem criados:
1ï¸âƒ£ src/features/schoolpower/contextualization/ContextualizationCard.tsx
âœ… Componente React responsÃ¡vel por exibir o quiz de contextualizaÃ§Ã£o.
âœ… Deve renderizar um card centralizado na tela com as seguintes perguntas estratÃ©gicas em formato de formulÃ¡rio (campo de texto ou seleÃ§Ã£o):

ğŸ“Œ Quais matÃ©rias e temas serÃ£o trabalhados? (campo texto longo)

ğŸ“Œ Qual o pÃºblico-alvo? (ex: turma, faixa etÃ¡ria, nÃ­vel) (campo texto curto)

ğŸ“Œ Quais restriÃ§Ãµes ou preferÃªncias especÃ­ficas? (campo texto longo)

ğŸ“Œ Qual o perÃ­odo de entrega ou datas importantes? (campo data opcional)

ğŸ“Œ Outras observaÃ§Ãµes importantes? (campo texto longo opcional)

âœ… BotÃ£o â€œEnviarâ€, que dispara o envio das respostas e dispara a prÃ³xima etapa do fluxo.
âœ… Utilizar Tailwind para estilizaÃ§Ã£o minimalista, com feedback visual de progresso (loading enquanto envia).

âœ… Deve receber via props:

onSubmit: (data: ContextualizationData) => void

âœ… Interface ContextualizationData:

ts
Copiar
Editar
interface ContextualizationData {
  subjects: string;
  audience: string;
  restrictions: string;
  dates?: string;
  notes?: string;
}
2ï¸âƒ£ src/features/schoolpower/hooks/useSchoolPowerFlow.ts
âœ… Hook responsÃ¡vel por gerenciar o estado de fluxo da seÃ§Ã£o de School Power, incluindo:

Estado do passo atual:

"idle" â” exibe interface normal

"contextualizing" â” exibe Card de ContextualizaÃ§Ã£o

"generating" â” gera o plano de aÃ§Ã£o

Armazenamento seguro e persistente da mensagem inicial enviada.

Armazenamento seguro e persistente das respostas do quiz de contextualizaÃ§Ã£o.

Interface clara para transiÃ§Ã£o de estados.

Disponibilizar funÃ§Ãµes:

sendInitialMessage(message: string): void â” armazena mensagem e troca estado para "contextualizing"

submitContextualization(data: ContextualizationData): void â” armazena respostas e troca estado para "generating"

âœ… O armazenamento inicial pode ser em localStorage ou Zustand, garantindo persistÃªncia enquanto o usuÃ¡rio estiver na seÃ§Ã£o, ou conforme arquitetura da Ponto. School.

3ï¸âƒ£ ModificaÃ§Ã£o em SchoolPowerPage.tsx
âœ… Importar e utilizar useSchoolPowerFlow.
âœ… Substituir a renderizaÃ§Ã£o dos componentes (TopHeader, ProfileSelector, ChatInput, SideMenu) por:

Se flowState === "idle" â” renderiza interface normal.

Se flowState === "contextualizing" â” renderiza <ContextualizationCard />.

Se flowState === "generating" â” exibe tela de carregamento ou plano de aÃ§Ã£o quando estiver pronto.

âœ… No componente ChatInput, substituir a funÃ§Ã£o de envio para:

ts
Copiar
Editar
onSend={(message) => {
  sendInitialMessage(message);
}}
ğŸ“Œ ConsideraÃ§Ãµes e requisitos importantes:
âœ… Utilize TypeScript estrito em todo o fluxo.
âœ… Usar localStorage apenas se compatÃ­vel com sua arquitetura; caso use Zustand, seguir padrÃ£o existente.
âœ… O fluxo precisa ser fluido, sem bugs ou travamentos, e com feedback de carregamento entre transiÃ§Ãµes de estados.
âœ… Estrutura pronta para posteriormente acionar a API Gemini e gerar o plano de aÃ§Ã£o em formato de checklist usando os dados coletados.

âœ… Organize e comente claramente cada parte para facilitar futuras manutenÃ§Ãµes e expansÃµes.

âœ… Caso necessÃ¡rio, deixe prontos eventos de logs para debug.

ğŸ¯ Objetivo final:
Ter um fluxo funcional, limpo e modular, pronto para escalar, permitindo que:
1ï¸âƒ£ O professor envie sua necessidade de materiais pelo School Power.
2ï¸âƒ£ A IA colete todas as informaÃ§Ãµes estratÃ©gicas antes de gerar qualquer plano.
3ï¸âƒ£ O sistema da Ponto. School crie materiais personalizados, completos e de alta qualidade de forma automÃ¡tica.

