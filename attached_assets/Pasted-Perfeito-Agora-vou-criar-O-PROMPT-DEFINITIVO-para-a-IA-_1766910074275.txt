Perfeito! Agora vou criar O PROMPT DEFINITIVO para a IA de Vibe Code corrigir todo o sistema com a expertise dos maiores desenvolvedores da hist√≥ria! üöÄ

üéØ PROMPT DEFINITIVO PARA VIBE CODE - SCHOOL POWER 2.0 CAPABILITY SYSTEM
üìã CONTEXTO ESTRAT√âGICO
Voc√™ √© uma IA de desenvolvimento de elite, com a expertise combinada de:

Linus Torvalds (arquitetura de sistemas robustos)

John Carmack (otimiza√ß√£o e performance)

Kent Beck (clean code e refatora√ß√£o)

Martin Fowler (padr√µes de arquitetura)

DHH (pragmatismo e shipping)

Voc√™ vai agir com absoluta precis√£o cir√∫rgica, zero toler√¢ncia a bugs, e obsess√£o por c√≥digo limpo e funcional.

üéØ OBJETIVO CR√çTICO
Implementar/corrigir o SISTEMA DE CAPABILITIES do School Power 2.0, especificamente:

CAPABILITY "DECIDIR ATIVIDADES CRIAR"
Esta capability √© respons√°vel por:

Receber lista de atividades dispon√≠veis (resultado da capability PESQUISAR)

IA escolher estrategicamente quais atividades criar

IA PREENCHER TODOS OS CAMPOS OBRIGAT√ìRIOS de cada atividade escolhida

Organizar dados prontos para a pr√≥xima capability (CRIAR)

CAPABILITY "CRIAR ATIVIDADES"
Esta capability √© respons√°vel por:

Receber atividades com campos j√° preenchidos

Renderizar Card de Constru√ß√£o com atividades "aguardando"

Sistema construir automaticamente cada atividade

Atualizar progresso em tempo real

Salvar atividades no banco de dados

üî• PROBLEMA ATUAL (QUE VOC√ä VAI RESOLVER)
Situa√ß√£o no School Power 1.0 (que funcionava):
text
1. Usu√°rio enviava prompt
2. Quiz de Contextualiza√ß√£o aparecia
3. IA gerava Plano de A√ß√£o com atividades sugeridas
4. Dentro do plano, TODOS OS CAMPOS j√° vinham preenchidos
5. Usu√°rio aprovava atividades
6. Interface de Constru√ß√£o aparecia com blocos de atividades
7. Usu√°rio clicava "Construir Todas"
8. Sistema preenchia modal de Editar de cada atividade
9. Atividades eram constru√≠das automaticamente
Situa√ß√£o atual no School Power 2.0 (que PRECISA funcionar):
text
‚ùå Card de Constru√ß√£o N√ÉO est√° aparecendo
‚ùå IA N√ÉO est√° decidindo e preenchendo campos
‚ùå Sistema N√ÉO sabe quais campos cada atividade tem
‚ùå Constru√ß√£o autom√°tica N√ÉO est√° acontecendo
POR QU√ä?

IA precisa primeiro PESQUISAR quais campos cada atividade tem

IA precisa PREENCHER esses campos durante a decis√£o

Sistema precisa MAPEAR corretamente os campos para o modal

Automa√ß√£o precisa CONSTRUIR usando os campos preenchidos

üìê ARQUITETURA T√âCNICA COMPLETA
1. ESTRUTURA DE DADOS: schoolPowerActivities.json
Este arquivo cont√©m o cat√°logo completo das 130+ atividades. Voc√™ vai ATUALIZAR ou CRIAR este arquivo com a seguinte estrutura:

json
{
  "versao": "2.0",
  "total_atividades": 137,
  "atividades": [
    {
      "id": "plano-aula-001",
      "titulo": "Plano de Aula Completo",
      "tipo": "plano-aula",
      "categoria": "planejamento",
      "materia": "geral",
      "nivel_dificuldade": "intermediario",
      "tags": ["planejamento", "didatica", "bncc"],
      "descricao": "Plano de aula estruturado conforme BNCC com objetivos, metodologia e avalia√ß√£o",
      "icone": "üìö",
      "cor": "#4CAF50",
      
      "campos_obrigatorios": [
        "tema",
        "disciplina",
        "ano_serie",
        "duracao_aula",
        "objetivo_geral",
        "objetivos_especificos",
        "conteudo_programatico",
        "metodologia",
        "recursos_didaticos",
        "avaliacao",
        "bncc_competencias"
      ],
      
      "campos_opcionais": [
        "observacoes",
        "referencias_bibliograficas",
        "adaptacoes_inclusivas"
      ],

      "schema_campos": {
        "tema": {
          "tipo": "text",
          "label": "Tema da Aula",
          "placeholder": "Ex: Equa√ß√µes do 2¬∫ Grau - Resolu√ß√£o e Aplica√ß√µes",
          "max_length": 100,
          "required": true
        },
        "disciplina": {
          "tipo": "select",
          "label": "Disciplina",
          "opcoes": ["Matem√°tica", "Portugu√™s", "Hist√≥ria", "Geografia", "Ci√™ncias", "Biologia", "F√≠sica", "Qu√≠mica", "Ingl√™s", "Artes", "Educa√ß√£o F√≠sica"],
          "required": true
        },
        "ano_serie": {
          "tipo": "select",
          "label": "Ano/S√©rie",
          "opcoes": ["1¬∫ ano", "2¬∫ ano", "3¬∫ ano", "4¬∫ ano", "5¬∫ ano", "6¬∫ ano", "7¬∫ ano", "8¬∫ ano", "9¬∫ ano", "1¬™ s√©rie EM", "2¬™ s√©rie EM", "3¬™ s√©rie EM"],
          "required": true
        },
        "duracao_aula": {
          "tipo": "number",
          "label": "Dura√ß√£o da Aula (minutos)",
          "min": 30,
          "max": 240,
          "default": 50,
          "required": true
        },
        "objetivo_geral": {
          "tipo": "textarea",
          "label": "Objetivo Geral",
          "placeholder": "Descreva o objetivo principal da aula...",
          "max_length": 500,
          "rows": 3,
          "required": true
        },
        "objetivos_especificos": {
          "tipo": "array",
          "label": "Objetivos Espec√≠ficos",
          "item_tipo": "text",
          "min_items": 3,
          "max_items": 10,
          "placeholder": "Ex: Identificar os coeficientes a, b e c",
          "required": true
        },
        "conteudo_programatico": {
          "tipo": "textarea",
          "label": "Conte√∫do Program√°tico",
          "placeholder": "Liste os conte√∫dos que ser√£o abordados...",
          "max_length": 1000,
          "rows": 5,
          "required": true
        },
        "metodologia": {
          "tipo": "rich_text",
          "label": "Metodologia",
          "placeholder": "Descreva as estrat√©gias e m√©todos de ensino...",
          "max_length": 1500,
          "rows": 6,
          "required": true
        },
        "recursos_didaticos": {
          "tipo": "array",
          "label": "Recursos Did√°ticos",
          "item_tipo": "text",
          "placeholder": "Ex: Quadro branco, Datashow, Apostila",
          "min_items": 1,
          "max_items": 15,
          "required": true
        },
        "avaliacao": {
          "tipo": "textarea",
          "label": "Avalia√ß√£o",
          "placeholder": "Como os alunos ser√£o avaliados?",
          "max_length": 500,
          "rows": 4,
          "required": true
        },
        "bncc_competencias": {
          "tipo": "multiselect",
          "label": "Compet√™ncias BNCC",
          "opcoes": [
            "Conhecimento",
            "Pensamento Cient√≠fico, Cr√≠tico e Criativo",
            "Repert√≥rio Cultural",
            "Comunica√ß√£o",
            "Cultura Digital",
            "Trabalho e Projeto de Vida",
            "Argumenta√ß√£o",
            "Autoconhecimento e Autocuidado",
            "Empatia e Coopera√ß√£o",
            "Responsabilidade e Cidadania"
          ],
          "min_select": 2,
          "max_select": 5,
          "required": true
        },
        "observacoes": {
          "tipo": "textarea",
          "label": "Observa√ß√µes (opcional)",
          "placeholder": "Informa√ß√µes adicionais, sugest√µes, lembretes...",
          "max_length": 300,
          "rows": 3,
          "required": false
        },
        "referencias_bibliograficas": {
          "tipo": "textarea",
          "label": "Refer√™ncias Bibliogr√°ficas (opcional)",
          "placeholder": "Livros, artigos, sites utilizados...",
          "max_length": 500,
          "rows": 4,
          "required": false
        }
      }
    },
    
    {
      "id": "flash-cards-001",
      "titulo": "Flash Cards Interativos",
      "tipo": "flash-cards",
      "categoria": "recursos_visuais",
      "materia": "geral",
      "nivel_dificuldade": "basico",
      "tags": ["memoriza√ß√£o", "revis√£o", "gamifica√ß√£o"],
      "descricao": "Conjunto de cart√µes digitais para memoriza√ß√£o ativa",
      "icone": "üé¥",
      "cor": "#FF9800",
      
      "campos_obrigatorios": [
        "titulo_conjunto",
        "tema",
        "numero_flashcards",
        "conteudo_flashcards"
      ],
      
      "campos_opcionais": [
        "instrucoes",
        "dificuldade_progressiva",
        "modo_estudo"
      ],

      "schema_campos": {
        "titulo_conjunto": {
          "tipo": "text",
          "label": "T√≠tulo do Conjunto",
          "placeholder": "Ex: Vocabul√°rio de Ingl√™s - Verbos Irregulares",
          "max_length": 100,
          "required": true
        },
        "tema": {
          "tipo": "text",
          "label": "Tema/Assunto",
          "placeholder": "Ex: Verbos Irregulares em Ingl√™s",
          "max_length": 100,
          "required": true
        },
        "numero_flashcards": {
          "tipo": "number",
          "label": "N√∫mero de Flashcards",
          "min": 10,
          "max": 50,
          "default": 20,
          "required": true
        },
        "conteudo_flashcards": {
          "tipo": "array_objects",
          "label": "Conte√∫do dos Flashcards",
          "min_items": 10,
          "max_items": 50,
          "schema": {
            "frente": { 
              "tipo": "text", 
              "label": "Frente (Pergunta/Termo)", 
              "placeholder": "Ex: To be",
              "required": true 
            },
            "verso": { 
              "tipo": "text", 
              "label": "Verso (Resposta/Defini√ß√£o)", 
              "placeholder": "Ex: was/were - been",
              "required": true 
            },
            "dica": { 
              "tipo": "text", 
              "label": "Dica (opcional)", 
              "placeholder": "Ex: Verbo auxiliar mais comum",
              "required": false 
            }
          },
          "required": true
        }
      }
    },

    {
      "id": "sequencia-didatica-001",
      "titulo": "Sequ√™ncia Did√°tica Completa",
      "tipo": "sequencia-didatica",
      "categoria": "planejamento",
      "materia": "geral",
      "nivel_dificuldade": "avancado",
      "tags": ["planejamento", "progressao", "bncc", "longo_prazo"],
      "descricao": "Sequ√™ncia de aulas planejadas progressivamente com diagn√≥sticos e avalia√ß√µes",
      "icone": "üìÖ",
      "cor": "#2196F3",
      
      "campos_obrigatorios": [
        "titulo_sequencia",
        "tema_geral",
        "disciplina",
        "ano_serie",
        "quantidade_aulas",
        "objetivos_gerais",
        "estrutura_aulas"
      ],
      
      "campos_opcionais": [
        "recursos_complementares",
        "avaliacoes_formativas"
      ],

      "schema_campos": {
        "titulo_sequencia": {
          "tipo": "text",
          "label": "T√≠tulo da Sequ√™ncia",
          "placeholder": "Ex: Dominando Fun√ß√µes - Do B√°sico ao ENEM",
          "max_length": 150,
          "required": true
        },
        "tema_geral": {
          "tipo": "text",
          "label": "Tema Geral",
          "placeholder": "Ex: Fun√ß√µes Matem√°ticas",
          "max_length": 100,
          "required": true
        },
        "disciplina": {
          "tipo": "select",
          "label": "Disciplina",
          "opcoes": ["Matem√°tica", "Portugu√™s", "Hist√≥ria", "Geografia", "Ci√™ncias", "Biologia", "F√≠sica", "Qu√≠mica"],
          "required": true
        },
        "ano_serie": {
          "tipo": "select",
          "label": "Ano/S√©rie",
          "opcoes": ["6¬∫ ano", "7¬∫ ano", "8¬∫ ano", "9¬∫ ano", "1¬™ s√©rie EM", "2¬™ s√©rie EM", "3¬™ s√©rie EM"],
          "required": true
        },
        "quantidade_aulas": {
          "tipo": "number",
          "label": "Quantidade de Aulas",
          "min": 4,
          "max": 20,
          "default": 10,
          "required": true
        },
        "objetivos_gerais": {
          "tipo": "textarea",
          "label": "Objetivos Gerais da Sequ√™ncia",
          "placeholder": "Descreva os objetivos macro desta sequ√™ncia did√°tica...",
          "max_length": 800,
          "rows": 5,
          "required": true
        },
        "estrutura_aulas": {
          "tipo": "array_objects",
          "label": "Estrutura das Aulas",
          "help_text": "IA vai gerar automaticamente com base na quantidade de aulas",
          "schema": {
            "numero_aula": { "tipo": "number", "label": "Aula N¬∫", "required": true },
            "tipo_aula": { 
              "tipo": "select", 
              "label": "Tipo", 
              "opcoes": ["Aula", "Diagn√≥stico", "Avalia√ß√£o"],
              "required": true 
            },
            "titulo": { "tipo": "text", "label": "T√≠tulo", "required": true },
            "objetivo": { "tipo": "textarea", "label": "Objetivo", "required": true },
            "conteudo": { "tipo": "textarea", "label": "Conte√∫do", "required": true },
            "duracao": { "tipo": "number", "label": "Dura√ß√£o (min)", "default": 50, "required": true }
          },
          "required": true
        }
      }
    }
  ]
}
2. CAPABILITY "DECIDIR" - IMPLEMENTA√á√ÉO TYPESCRIPT
Arquivo: src/features/schoolpower/capabilities/decidir/decidir-atividades-criar.ts

typescript
import { GoogleGenerativeAI } from '@google/generative-ai';

// ============================================
// TYPES & INTERFACES
// ============================================

interface AtividadeDisponivel {
  id: string;
  titulo: string;
  tipo: string;
  categoria: string;
  materia: string;
  nivel_dificuldade: string;
  tags: string[];
  descricao: string;
  campos_obrigatorios: string[];
  campos_opcionais?: string[];
  schema_campos: Record<string, any>;
}

interface CriteriosDecisao {
  objetivo_pedagogico: string;
  quantidade: number;
  priorizar?: 'variedade' | 'progressao' | 'focado';
  nivel_turma?: 'basico' | 'intermediario' | 'avancado';
}

interface ContextoTurma {
  turma_id?: string;
  materia?: string;
  nivel_ensino?: string;
  desempenho_medio?: number;
  gaps_aprendizado?: string[];
}

interface AtividadeEscolhida {
  id: string;
  titulo: string;
  tipo: string;
  materia: string;
  nivel_dificuldade: string;
  tags: string[];
  campos_obrigatorios: string[];
  campos_opcionais: string[];
  schema_campos: Record<string, any>;
  campos_preenchidos: Record<string, any>;
  justificativa: string;
  ordem_sugerida: number;
  status_construcao: 'aguardando' | 'construindo' | 'concluido' | 'erro';
  progresso: number;
}

interface DecidirAtividadesInput {
  atividades_disponiveis: AtividadeDisponivel[];
  criterios_decisao: CriteriosDecisao;
  contexto_turma?: ContextoTurma;
}

interface DecidirAtividadesOutput {
  success: boolean;
  decisao: {
    total_selecionado: number;
    atividades: AtividadeEscolhida[];
    estrategia_aplicada: string;
    pronto_para_criar: boolean;
    decidido_em: number;
  };
  mensagem: string;
  pronto_para_criar: boolean;
}

// ============================================
// MAIN FUNCTION
// ============================================

export async function decidirAtividadesCriar(
  params: DecidirAtividadesInput
): Promise<DecidirAtividadesOutput> {
  
  console.log('üéØ [DECIDIR] Iniciando capability decidir-atividades-criar...');
  console.log('üìä [DECIDIR] Atividades dispon√≠veis:', params.atividades_disponiveis.length);
  console.log('üéì [DECIDIR] Quantidade desejada:', params.criterios_decisao.quantidade);

  const {
    atividades_disponiveis,
    criterios_decisao,
    contexto_turma
  } = params;

  // ========================================
  // PASSO 1: VALIDA√á√ÉO DE ENTRADA
  // ========================================

  if (!atividades_disponiveis || atividades_disponiveis.length === 0) {
    throw new Error('‚ùå [DECIDIR] Nenhuma atividade dispon√≠vel para decidir');
  }

  if (!criterios_decisao.objetivo_pedagogico) {
    throw new Error('‚ùå [DECIDIR] Objetivo pedag√≥gico √© obrigat√≥rio');
  }

  if (criterios_decisao.quantidade < 1 || criterios_decisao.quantidade > 10) {
    throw new Error('‚ùå [DECIDIR] Quantidade deve estar entre 1 e 10');
  }

  // ========================================
  // PASSO 2: CONSTRU√á√ÉO DO PROMPT ULTRA-DETALHADO
  // ========================================

  const promptDecisao = `
Voc√™ √© um **ESPECIALISTA PEDAG√ìGICO DE ELITE** com PhD em Educa√ß√£o e 20 anos de experi√™ncia em planejamento did√°tico.

Sua miss√£o CR√çTICA √©:
1. Escolher estrategicamente as ${criterios_decisao.quantidade} melhores atividades
2. **PREENCHER TODOS OS CAMPOS OBRIGAT√ìRIOS** de cada atividade escolhida com conte√∫do pedag√≥gico de alt√≠ssima qualidade

## üìö ATIVIDADES DISPON√çVEIS:

${atividades_disponiveis.map((a, idx) => `
### Atividade ${idx + 1}: ${a.titulo}
- **ID:** ${a.id}
- **Tipo:** ${a.tipo}
- **Categoria:** ${a.categoria}
- **Mat√©ria:** ${a.materia}
- **Dificuldade:** ${a.nivel_dificuldade}
- **Tags:** ${a.tags.join(', ')}
- **Descri√ß√£o:** ${a.descricao}

**CAMPOS OBRIGAT√ìRIOS QUE VOC√ä DEVE PREENCHER:**
${a.campos_obrigatorios.map(campo => {
  const schema = a.schema_campos[campo];
  return `  - **${campo}**: (${schema.tipo}) ${schema.label} - ${schema.placeholder || ''}`;
}).join('\n')}

${a.campos_opcionais && a.campos_opcionais.length > 0 ? `
**CAMPOS OPCIONAIS (preencha se relevante):**
${a.campos_opcionais.map(campo => {
  const schema = a.schema_campos[campo];
  return `  - **${campo}**: (${schema.tipo}) ${schema.label}`;
}).join('\n')}
` : ''}
`).join('\n---\n')}

## üéØ CRIT√âRIOS DE DECIS√ÉO:

- **Objetivo Pedag√≥gico:** ${criterios_decisao.objetivo_pedagogico}
- **Quantidade Desejada:** ${criterios_decisao.quantidade} atividades
- **Abordagem Priorit√°ria:** ${criterios_decisao.priorizar || 'variedade de tipos'}
- **N√≠vel da Turma:** ${criterios_decisao.nivel_turma || 'intermediario'}

${contexto_turma ? `
## üè´ CONTEXTO DA TURMA:

- **Mat√©ria:** ${contexto_turma.materia || 'N√£o especificado'}
- **N√≠vel de Ensino:** ${contexto_turma.nivel_ensino || 'N√£o especificado'}
- **Desempenho M√©dio:** ${contexto_turma.desempenho_medio ? `${contexto_turma.desempenho_medio}%` : 'N√£o especificado'}
- **Gaps de Aprendizado:** ${contexto_turma.gaps_aprendizado?.join(', ') || 'N√£o identificados'}

**ATEN√á√ÉO:** Use este contexto para personalizar o conte√∫do das atividades!
` : ''}

## üìã SUA TAREFA (EXECU√á√ÉO OBRIGAT√ìRIA):

Para CADA uma das ${criterios_decisao.quantidade} atividades que voc√™ escolher:

1. **Justifique a escolha** (por que essa atividade √© ideal para o objetivo?)
2. **Preencha TODOS os campos obrigat√≥rios** com conte√∫do pedag√≥gico detalhado e de alta qualidade
3. **Respeite o tipo de dado** de cada campo (text, textarea, array, number, select, etc.)
4. **Use o schema_campos** para entender formato e valida√ß√µes
5. **Ordene as atividades** de forma l√≥gica e progressiva

## üö® REGRAS CR√çTICAS:

- ‚úÖ TODOS os campos obrigat√≥rios DEVEM ser preenchidos
- ‚úÖ Conte√∫do deve ser pedagogicamente relevante e aplic√°vel
- ‚úÖ Arrays devem ter quantidade m√≠nima/m√°xima respeitada
- ‚úÖ Selects devem usar EXATAMENTE as op√ß√µes dispon√≠veis
- ‚úÖ Numbers devem respeitar min/max
- ‚úÖ Textos devem respeitar max_length
- ‚ùå N√ÉO deixe campos vazios ou com placeholders
- ‚ùå N√ÉO use "...", "exemplo", "etc" como conte√∫do
- ‚ùå N√ÉO copie literalmente os placeholders

## üì§ FORMATO DE RESPOSTA (JSON V√ÅLIDO):

{
  "atividades_escolhidas": [
    {
      "id": "plano-aula-001",
      "titulo": "Plano de Aula Completo",
      "justificativa": "Esta atividade √© ideal porque permite estruturar uma aula completa sobre [tema espec√≠fico], alinhada com BNCC e adaptada ao n√≠vel da turma.",
      "ordem_sugerida": 1,
      "campos_preenchidos": {
        "tema": "Equa√ß√µes do 2¬∫ Grau - Resolu√ß√£o com F√≥rmula de Bhaskara",
        "disciplina": "Matem√°tica",
        "ano_serie": "9¬∫ ano",
        "duracao_aula": 50,
        "objetivo_geral": "Capacitar os alunos a resolverem equa√ß√µes do 2¬∫ grau utilizando a f√≥rmula de Bhaskara, interpretando os coeficientes e compreendendo o significado das ra√≠zes.",
        "objetivos_especificos": [
          "Identificar os coeficientes a, b e c em uma equa√ß√£o do 2¬∫ grau",
          "Aplicar corretamente a f√≥rmula de Bhaskara",
          "Interpretar o delta e o n√∫mero de ra√≠zes reais",
          "Resolver exerc√≠cios pr√°ticos de forma aut√¥noma"
        ],
        "conteudo_programatico": "1. Revis√£o: Equa√ß√µes do 1¬∫ grau\n2. Introdu√ß√£o √†s equa√ß√µes do 2¬∫ grau\n3. Identifica√ß√£o dos coeficientes a, b, c\n4. Apresenta√ß√£o da f√≥rmula de Bhaskara\n5. C√°lculo do discriminante (delta)\n6. Interpreta√ß√£o das ra√≠zes\n7. Resolu√ß√£o de exerc√≠cios pr√°ticos",
        "metodologia": "Aula expositiva dialogada com uso de quadro branco para demonstra√ß√£o passo a passo. Resolu√ß√£o de exemplos pr√°ticos em conjunto com os alunos. Atividade em duplas para resolu√ß√£o de exerc√≠cios gradativos. Corre√ß√£o coletiva com discuss√£o dos m√©todos utilizados.",
        "recursos_didaticos": [
          "Quadro branco e marcadores",
          "Datashow para apresenta√ß√£o de slides",
          "Lista de exerc√≠cios impressa",
          "Calculadora (opcional)",
          "Apostila de Matem√°tica"
        ],
        "avaliacao": "Avalia√ß√£o formativa durante a aula atrav√©s da participa√ß√£o e resolu√ß√£o de exerc√≠cios. Avalia√ß√£o somativa com lista de 10 exerc√≠cios para entrega na pr√≥xima aula. Prova formal ao final da unidade.",
        "bncc_competencias": [
          "Conhecimento",
          "Pensamento Cient√≠fico, Cr√≠tico e Criativo",
          "Comunica√ß√£o",
          "Argumenta√ß√£o"
        ]
      }
    }
  ],
  "raciocinio_geral": "Escolhi atividades que progressivamente desenvolvem o dom√≠nio do tema, come√ßando com planejamento estruturado, seguido por pr√°tica ativa e avalia√ß√£o gamificada. Esta sequ√™ncia garante compreens√£o te√≥rica, pr√°tica e engajamento dos alunos."
}

**ATEN√á√ÉO:** Retorne APENAS o JSON v√°lido, sem texto adicional antes ou depois.
`;

  // ========================================
  // PASSO 3: CHAMADA √Ä API GEMINI
  // ========================================

  console.log('ü§ñ [DECIDIR] Enviando prompt para Gemini API...');

  let decisionData;
  try {
    const genAI = new GoogleGenerativeAI(import.meta.env.VITE_GEMINI_API_KEY);
    const model = genAI.getGenerativeModel({ 
      model: 'gemini-2.0-flash-exp',
      generationConfig: {
        temperature: 0.8,
        topP: 0.95,
        topK: 40,
        maxOutputTokens: 8192,
        responseMimeType: 'application/json'
      }
    });

    const result = await model.generateContent(promptDecisao);
    const responseText = result.response.text();
    
    console.log('‚úÖ [DECIDIR] Resposta recebida da API');
    
    decisionData = JSON.parse(responseText);
    
    if (!decisionData.atividades_escolhidas || !Array.isArray(decisionData.atividades_escolhidas)) {
      throw new Error('‚ùå [DECIDIR] Formato de resposta inv√°lido da IA');
    }

  } catch (error) {
    console.error('‚ùå [DECIDIR] Erro ao chamar Gemini API:', error);
    throw new Error(`Falha na gera√ß√£o de decis√£o: ${error.message}`);
  }

  // ========================================
  // PASSO 4: VALIDA√á√ÉO E ENRIQUECIMENTO
  // ========================================

  console.log('üîç [DECIDIR] Validando e enriquecendo dados...');

  const atividadesEscolhidas: AtividadeEscolhida[] = decisionData.atividades_escolhidas.map((escolha: any, index: number) => {
    
    // 4.1. Busca atividade completa no cat√°logo
    const atividadeCompleta = atividades_disponiveis.find(a => a.id === escolha.id);
    
    if (!atividadeCompleta) {
      throw new Error(`‚ùå [DECIDIR] Atividade com ID "${escolha.id}" n√£o encontrada no cat√°logo`);
    }

    // 4.2. Valida que TODOS os campos obrigat√≥rios foram preenchidos
    const camposFaltantes = atividadeCompleta.campos_obrigatorios.filter(
      campo => {
        const valor = escolha.campos_preenchidos[campo];
        
        // Verifica se campo existe
        if (valor === undefined || valor === null) return true;
        
        // Verifica se n√£o √© string vazia
        if (typeof valor === 'string' && valor.trim() === '') return true;
        
        // Verifica se array n√£o est√° vazio
        if (Array.isArray(valor) && valor.length === 0) return true;
        
        return false;
      }
    );

    if (camposFaltantes.length > 0) {
      console.error(`‚ùå [DECIDIR] Campos faltantes para "${escolha.titulo}":`, camposFaltantes);
      throw new Error(
        `IA n√£o preencheu campos obrigat√≥rios para "${escolha.titulo}": ${camposFaltantes.join(', ')}`
      );
    }

    console.log(`‚úÖ [DECIDIR] Atividade ${index + 1} validada: ${escolha.titulo}`);

    // 4.3. Constr√≥i objeto final
    return {
      // Dados da atividade original
      id: atividadeCompleta.id,
      titulo: atividadeCompleta.titulo,
      tipo: atividadeCompleta.tipo,
      materia: atividadeCompleta.materia,
      nivel_dificuldade: atividadeCompleta.nivel_dificuldade,
      tags: atividadeCompleta.tags,
      
      // Metadados de schema
      campos_obrigatorios: atividadeCompleta.campos_obrigatorios,
      campos_opcionais: atividadeCompleta.campos_opcionais || [],
      schema_campos: atividadeCompleta.schema_campos,
      
      // Dados preenchidos pela IA
      campos_preenchidos: escolha.campos_preenchidos,
      justificativa: escolha.justificativa,
      ordem_sugerida: escolha.ordem_sugerida || (index + 1),
      
      // Status para constru√ß√£o
      status_construcao: 'aguardando' as const,
      progresso: 0
    };
  });

  // ========================================
  // PASSO 5: ORGANIZA PARA PR√ìXIMA CAPABILITY
  // ========================================

  const organizacao = {
    total_selecionado: atividadesEscolhidas.length,
    atividades: atividadesEscolhidas.sort((a, b) => a.ordem_sugerida - b.ordem_sugerida),
    estrategia_aplicada: decisionData.raciocinio_geral || 'Atividades escolhidas estrategicamente',
    pronto_para_criar: true,
    decidido_em: Date.now()
  };

  console.log('üéâ [DECIDIR] Decis√£o conclu√≠da com sucesso!');
  console.log(`üìä [DECIDIR] Total de atividades escolhidas: ${organizacao.total_selecionado}`);

  // ========================================
  // PASSO 6: RETORNA DECIS√ÉO ESTRUTURADA
  // ========================================

  return {
    success: true,
    decisao: organizacao,
    mensagem: `Escolhi ${organizacao.total_selecionado} atividade(s) estrategicamente e preenchi TODOS os campos necess√°rios. ${decisionData.raciocinio_geral}`,
    pronto_para_criar: true
  };
}
3. CAPABILITY "CRIAR" - IMPLEMENTA√á√ÉO TYPESCRIPT
Arquivo: src/features/schoolpower/capabilities/criar/criar-atividades.ts

typescript
import { pontoSchoolAPI } from '@/api-wrapper/PontoSchoolAPI';
import type { AtividadeEscolhida } from '../decidir/decidir-atividades-criar';

// ============================================
// TYPES & INTERFACES
// ============================================

interface ConfiguracoesCriacao {
  turma_id?: string;
  data_disponibilizacao?: string;
  prazo_entrega?: string;
  permitir_tentativas_multiplas?: boolean;
  feedback_automatico?: boolean;
}

interface CriarAtividadesInput {
  atividades_decididas: AtividadeEscolhida[];
  configuracoes_criacao?: ConfiguracoesCriacao;
}

interface CriacaoProgressUpdate {
  type: 
    | 'construcao:iniciada'
    | 'atividade:construindo'
    | 'atividade:concluida'
    | 'atividade:erro'
    | 'construcao:concluida';
  total_atividades?: number;
  atividades?: Array<{
    id: string;
    titulo: string;
    tipo: string;
    status: string;
    progresso: number;
  }>;
  atividade_index?: number;
  atividade_id?: string;
  atividade_criada_id?: string;
  titulo?: string;
  progresso?: number;
  erro?: string;
  total_criadas?: number;
  total_esperadas?: number;
}

interface AtividadeCriada {
  id: string;
  titulo: string;
  tipo: string;
  materia: string;
  campos: Record<string, any>;
  created_at: string;
  created_by: string;
}

interface CriarAtividadesOutput {
  success: boolean;
  atividades_criadas: AtividadeCriada[];
  total: number;
  mensagem: string;
  urls: Array<{
    id: string;
    titulo: string;
    url: string;
    url_editar: string;
  }>;
}

// ============================================
// MAIN FUNCTION
// ============================================

export async function criarAtividades(
  params: CriarAtividadesInput,
  onProgress?: (update: CriacaoProgressUpdate) => void
): Promise<CriarAtividadesOutput> {
  
  console.log('üèóÔ∏è [CRIAR] Iniciando capability criar-atividades...');
  
  const { atividades_decididas, configuracoes_criacao } = params;

  // ========================================
  // PASSO 1: VALIDA√á√ÉO
  // ========================================

  if (!atividades_decididas || atividades_decididas.length === 0) {
    throw new Error('‚ùå [CRIAR] Nenhuma atividade para criar');
  }

  console.log(`üìä [CRIAR] Total de atividades a criar: ${atividades_decididas.length}`);

  // ========================================
  // PASSO 2: NOTIFICA IN√çCIO (RENDERIZA CARD)
  // ========================================

  onProgress?.({
    type: 'construcao:iniciada',
    total_atividades: atividades_decididas.length,
    atividades: atividades_decididas.map(a => ({
      id: a.id,
      titulo: a.titulo,
      tipo: a.tipo,
      status: 'aguardando',
      progresso: 0
    }))
  });

  console.log('üì§ [CRIAR] Progresso: Constru√ß√£o iniciada');

  const atividadesCriadas: AtividadeCriada[] = [];

  // ========================================
  // PASSO 3: CRIA CADA ATIVIDADE SEQUENCIALMENTE
  // ========================================

  for (const [index, atividadeDecidida] of atividades_decididas.entries()) {
    
    console.log(`\nüî® [CRIAR] Construindo atividade ${index + 1}/${atividades_decididas.length}: ${atividadeDecidida.titulo}`);

    // 3.1. NOTIFICA IN√çCIO DA ATIVIDADE
    onProgress?.({
      type: 'atividade:construindo',
      atividade_index: index,
      atividade_id: atividadeDecidida.id,
      titulo: atividadeDecidida.titulo,
      progresso: 0
    });

    try {
      // ========================================
      // 3.2. CONSTR√ìI PAYLOAD (CAMPOS J√Å PREENCHIDOS!)
      // ========================================

      const payload = {
        tipo: atividadeDecidida.tipo,
        titulo: atividadeDecidida.titulo,
        materia: atividadeDecidida.materia,
        nivel_dificuldade: atividadeDecidida.nivel_dificuldade,
        tags: atividadeDecidida.tags,
        
        // ‚úÖ CR√çTICO: Campos j√° preenchidos pela capability "Decidir"
        campos: atividadeDecidida.campos_preenchidos,
        
        // Configura√ß√µes adicionais
        turma_id: configuracoes_criacao?.turma_id,
        data_disponibilizacao: configuracoes_criacao?.data_disponibilizacao,
        prazo_entrega: configuracoes_criacao?.prazo_entrega,
        permitir_tentativas_multiplas: configuracoes_criacao?.permitir_tentativas_multiplas ?? true,
        feedback_automatico: configuracoes_criacao?.feedback_automatico ?? true,
        
        // Metadados
        created_by: 'agente_jota_vibe_code',
        created_at: new Date().toISOString()
      };

      console.log('üì¶ [CRIAR] Payload constru√≠do:', {
        tipo: payload.tipo,
        titulo: payload.titulo,
        total_campos: Object.keys(payload.campos).length
      });

      // ========================================
      // 3.3. SALVA NO BANCO DE DADOS VIA API
      // ========================================

      console.log('üöÄ [CRIAR] Enviando para API...');
      
      const response = await pontoSchoolAPI.post('/api/atividades', payload);
      
      if (!response.data || !response.data.id) {
        throw new Error('API n√£o retornou ID da atividade criada');
      }

      const savedAtividade: AtividadeCriada = response.data;
      
      console.log(`‚úÖ [CRIAR] Atividade criada com ID: ${savedAtividade.id}`);
      
      atividadesCriadas.push(savedAtividade);

      // 3.4. NOTIFICA CONCLUS√ÉO DA ATIVIDADE
      onProgress?.({
        type: 'atividade:concluida',
        atividade_index: index,
        atividade_id: atividadeDecidida.id,
        atividade_criada_id: savedAtividade.id,
        progresso: 100
      });

      console.log(`üéâ [CRIAR] Atividade ${index + 1} conclu√≠da com sucesso!`);

    } catch (error: any) {
      
      // 3.5. TRATAMENTO DE ERRO
      console.error(`‚ùå [CRIAR] Erro ao criar atividade ${atividadeDecidida.titulo}:`, error);
      
      onProgress?.({
        type: 'atividade:erro',
        atividade_index: index,
        atividade_id: atividadeDecidida.id,
        erro: error.message || 'Erro desconhecido'
      });
      
      // Continua com as pr√≥ximas atividades
      continue;
    }
  }

  // ========================================
  // PASSO 4: NOTIFICA CONCLUS√ÉO GERAL
  // ========================================

  console.log(`\nüèÅ [CRIAR] Constru√ß√£o conclu√≠da!`);
  console.log(`üìä [CRIAR] Total criadas: ${atividadesCriadas.length}/${atividades_decididas.length}`);

  onProgress?.({
    type: 'construcao:concluida',
    total_criadas: atividadesCriadas.length,
    total_esperadas: atividades_decididas.length
  });

  // ========================================
  // PASSO 5: RETORNA RESULTADO
  // ========================================

  return {
    success: true,
    atividades_criadas: atividadesCriadas,
    total: atividadesCriadas.length,
    mensagem: `Criei ${atividadesCriadas.length} atividade(s) com sucesso! üéâ`,
    urls: atividadesCriadas.map(a => ({
      id: a.id,
      titulo: a.titulo,
      url: `/dashboard/atividades/${a.id}`,
      url_editar: `/dashboard/atividades/${a.id}/editar`
    }))
  };
}
üé® COMPONENTE DE INTERFACE: Card de Constru√ß√£o
Arquivo: src/features/schoolpower/construction/CardDeConstrucao.tsx

tsx
import React, { useEffect, useState } from 'react';
import { Check, Clock, AlertCircle, Loader2 } from 'lucide-react';
import type { AtividadeEscolhida } from '../capabilities/decidir/decidir-atividades-criar';

interface CardDeConstrucaoProps {
  atividades: AtividadeEscolhida[];
  onAtividadeConcluida?: (atividadeId: string) => void;
  onTodasConcluidas?: () => void;
}

export const CardDeConstrucao: React.FC<CardDeConstrucaoProps> = ({
  atividades,
  onAtividadeConcluida,
  onTodasConcluidas
}) => {
  
  const [atividadesStatus, setAtividadesStatus] = useState(atividades);

  useEffect(() => {
    const todasConcluidas = atividadesStatus.every(a => a.status_construcao === 'concluido');
    if (todasConcluidas && onTodasConcluidas) {
      onTodasConcluidas();
    }
  }, [atividadesStatus, onTodasConcluidas]);

  const atualizarStatus = (id: string, status: string, progresso: number) => {
    setAtividadesStatus(prev =>
      prev.map(a =>
        a.id === id
          ? { ...a, status_construcao: status as any, progresso }
          : a
      )
    );

    if (status === 'concluido' && onAtividadeConcluida) {
      onAtividadeConcluida(id);
    }
  };

  const renderStatusIcon = (status: string) => {
    switch (status) {
      case 'aguardando':
        return <Clock className="w-5 h-5 text-gray-400" />;
      case 'construindo':
        return <Loader2 className="w-5 h-5 text-blue-500 animate-spin" />;
      case 'concluido':
        return <Check className="w-5 h-5 text-green-500" />;
      case 'erro':
        return <AlertCircle className="w-5 h-5 text-red-500" />;
      default:
        return <Clock className="w-5 h-5 text-gray-400" />;
    }
  };

  const renderStatusText = (status: string) => {
    switch (status) {
      case 'aguardando':
        return 'Aguardando';
      case 'construindo':
        return 'Construindo...';
      case 'concluido':
        return 'Conclu√≠da';
      case 'erro':
        return 'Erro';
      default:
        return 'Aguardando';
    }
  };

  return (
    <div className="w-full max-w-6xl mx-auto p-6 bg-white rounded-xl shadow-lg">
      
      {/* Header */}
      <div className="mb-6">
        <h2 className="text-2xl font-bold text-gray-800 mb-2">
          üèóÔ∏è Constru√ß√£o de Atividades
        </h2>
        <p className="text-gray-600">
          Sistema est√° construindo automaticamente as atividades selecionadas
        </p>
      </div>

      {/* Grid de Atividades */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {atividadesStatus.map((atividade, index) => (
          <div
            key={atividade.id}
            className={`
              relative p-4 rounded-lg border-2 transition-all duration-300
              ${atividade.status_construcao === 'aguardando' ? 'border-gray-300 bg-gray-50' : ''}
              ${atividade.status_construcao === 'construindo' ? 'border-blue-400 bg-blue-50' : ''}
              ${atividade.status_construcao === 'concluido' ? 'border-green-400 bg-green-50' : ''}
              ${atividade.status_construcao === 'erro' ? 'border-red-400 bg-red-50' : ''}
            `}
          >
            
            {/* Badge de Ordem */}
            <div className="absolute -top-3 -left-3 w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center font-bold text-sm shadow-md">
              {index + 1}
            </div>

            {/* Status Icon */}
            <div className="flex items-start gap-3 mb-3">
              <div className="flex-shrink-0 mt-1">
                {renderStatusIcon(atividade.status_construcao)}
              </div>
              <div className="flex-1">
                <h3 className="font-semibold text-gray-800 text-sm leading-tight">
                  {atividade.titulo}
                </h3>
                <p className="text-xs text-gray-500 mt-1">
                  {atividade.tipo}
                </p>
              </div>
            </div>

            {/* Progress Bar */}
            {atividade.status_construcao === 'construindo' && (
              <div className="mb-3">
                <div className="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                  <div
                    className="bg-blue-500 h-full transition-all duration-500"
                    style={{ width: `${atividade.progresso}%` }}
                  />
                </div>
                <p className="text-xs text-gray-500 mt-1 text-center">
                  {atividade.progresso}%
                </p>
              </div>
            )}

            {/* Status Text */}
            <div className="text-xs font-medium text-center">
              {renderStatusText(atividade.status_construcao)}
            </div>

            {/* Justificativa (se conclu√≠da) */}
            {atividade.status_construcao === 'concluido' && (
              <p className="text-xs text-gray-600 mt-2 italic">
                {atividade.justificativa}
              </p>
            )}

          </div>
        ))}
      </div>

      {/* Footer Stats */}
      <div className="mt-6 pt-4 border-t border-gray-200">
        <div className="flex items-center justify-between text-sm">
          <span className="text-gray-600">
            Progresso Total:
          </span>
          <span className="font-bold text-indigo-600">
            {atividadesStatus.filter(a => a.status_construcao === 'concluido').length} / {atividadesStatus.length}
          </span>
        </div>
      </div>

    </div>
  );
};
‚öôÔ∏è INSTRU√á√ïES DE IMPLEMENTA√á√ÉO DETALHADAS
ETAPA 1: Criar/Atualizar schoolPowerActivities.json
bash
# Local do arquivo
src/features/schoolpower/data/schoolPowerActivities.json
A√ß√£o:

Se o arquivo N√ÉO existir: CRIE com estrutura completa acima

Se o arquivo existir: ATUALIZE garantindo que tenha:

campos_obrigatorios

campos_opcionais

schema_campos (com todos os detalhes de tipo, label, valida√ß√µes)

Valida√ß√£o:

Cada atividade DEVE ter todos os 3 campos acima

Schema DEVE ter valida√ß√µes (min, max, required, etc.)

ETAPA 2: Criar Capability DECIDIR
bash
# Diret√≥rio
src/features/schoolpower/capabilities/decidir/

# Arquivos a criar
‚îú‚îÄ‚îÄ decidir-atividades-criar.ts  # C√≥digo principal acima
‚îú‚îÄ‚îÄ types.ts                       # Interfaces export√°veis
‚îî‚îÄ‚îÄ index.ts                       # Exports
A√ß√£o:

Copiar c√≥digo TypeScript completo acima

Configurar corretamente a API Key do Gemini

Adicionar logs detalhados para debug

Garantir tratamento de erros robusto

Valida√ß√£o:

Testar com 1 atividade simples (Flash Cards)

Verificar se TODOS os campos s√£o preenchidos

Checar logs no console

ETAPA 3: Criar Capability CRIAR
bash
# Diret√≥rio
src/features/schoolpower/capabilities/criar/

# Arquivos a criar
‚îú‚îÄ‚îÄ criar-atividades.ts            # C√≥digo principal acima
‚îú‚îÄ‚îÄ types.ts                       # Interfaces export√°veis
‚îî‚îÄ‚îÄ index.ts                       # Exports
A√ß√£o:

Copiar c√≥digo TypeScript completo acima

Integrar com pontoSchoolAPI (endpoint /api/atividades)

Implementar sistema de callback onProgress

Garantir salvamento correto no banco

Valida√ß√£o:

Testar cria√ß√£o de 1 atividade

Verificar se dados s√£o salvos no banco

Verificar callbacks de progresso

ETAPA 4: Criar Componente CardDeConstrucao
bash
# Local do arquivo
src/features/schoolpower/construction/CardDeConstrucao.tsx
A√ß√£o:

Copiar c√≥digo React completo acima

Integrar com TailwindCSS (j√° est√° pronto)

Conectar com capability CRIAR via callbacks

Testar renderiza√ß√£o e anima√ß√µes

Valida√ß√£o:

Card aparece quando constru√ß√£o inicia

Progress bar atualiza corretamente

√çcones de status mudam corretamente

ETAPA 5: Integrar no Fluxo Principal
Arquivo: src/features/schoolpower/hooks/useSchoolPowerFlow.ts

Altera√ß√µes necess√°rias:

typescript
import { decidirAtividadesCriar } from '../capabilities/decidir';
import { criarAtividades } from '../capabilities/criar';

// Adicionar novo state
const [atividadesDecididas, setAtividadesDecididas] = useState(null);
const [progressoConstrucao, setProgressoConstrucao] = useState([]);

// Nova fun√ß√£o: aprovar plano e decidir atividades
const aprovarPlanoEDecidir = async (atividadesAprovadas) => {
  
  setFlowState('decidindo'); // Novo estado
  
  try {
    // Chama capability DECIDIR
    const resultado = await decidirAtividadesCriar({
      atividades_disponiveis: atividadesAprovadas, // Vem do plano de a√ß√£o
      criterios_decisao: {
        objetivo_pedagogico: initialMessage,
        quantidade: atividadesAprovadas.length,
        priorizar: 'variedade',
        nivel_turma: contextualizationData.nivel_turma
      },
      contexto_turma: {
        materia: contextualizationData.materia,
        nivel_ensino: contextualizationData.nivel_ensino,
        // ... outros campos do quiz
      }
    });

    if (resultado.success && resultado.pronto_para_criar) {
      setAtividadesDecididas(resultado.decisao.atividades);
      setFlowState('creating'); // Muda para estado de cria√ß√£o
      
      // Automaticamente chama capability CRIAR
      await criarAtividadesAutomaticamente(resultado.decisao.atividades);
    }
    
  } catch (error) {
    console.error('Erro ao decidir atividades:', error);
    setFlowState('error');
  }
};

// Nova fun√ß√£o: criar atividades automaticamente
const criarAtividadesAutomaticamente = async (atividades) => {
  
  try {
    const resultado = await criarAtividades(
      {
        atividades_decididas: atividades,
        configuracoes_criacao: {
          turma_id: contextualizationData.turma_id,
          feedback_automatico: true
        }
      },
      // Callback de progresso
      (update) => {
        if (update.type === 'construcao:iniciada') {
          setProgressoConstrucao(update.atividades);
        }
        if (update.type === 'atividade:concluida') {
          setProgressoConstrucao(prev =>
            prev.map(a =>
              a.id === update.atividade_id
                ? { ...a, status: 'concluido', progresso: 100 }
                : a
            )
          );
        }
        if (update.type === 'construcao:concluida') {
          setFlowState('completed');
        }
      }
    );

    if (resultado.success) {
      // Salvar no hist√≥rico, mostrar mensagem de sucesso, etc.
      console.log('‚úÖ Atividades criadas:', resultado.urls);
    }
    
  } catch (error) {
    console.error('Erro ao criar atividades:', error);
    setFlowState('error');
  }
};
üß™ TESTES CR√çTICOS
Teste 1: Capability DECIDIR isolada
typescript
const resultado = await decidirAtividadesCriar({
  atividades_disponiveis: [
    // Apenas 1 atividade simples (Flash Cards)
  ],
  criterios_decisao: {
    objetivo_pedagogico: 'Revisar vocabul√°rio de ingl√™s',
    quantidade: 1
  }
});

// Verificar:
// - resultado.success === true
// - resultado.decisao.atividades[0].campos_preenchidos est√° completo
// - Todos os campos obrigat√≥rios foram preenchidos
Teste 2: Capability CRIAR isolada
typescript
const resultado = await criarAtividades({
  atividades_decididas: [
    // Atividade com campos j√° preenchidos do teste anterior
  ]
});

// Verificar:
// - resultado.success === true
// - resultado.atividades_criadas.length === 1
// - Atividade foi salva no banco de dados
Teste 3: Fluxo completo
text
1. Enviar mensagem inicial
2. Preencher quiz de contextualiza√ß√£o
3. IA gera plano de a√ß√£o
4. Aprovar 2 atividades
5. Verificar se Card de Constru√ß√£o aparece
6. Verificar se atividades s√£o constru√≠das automaticamente
7. Verificar se progresso √© atualizado em tempo real
8. Verificar se atividades est√£o no banco de dados
üö® CHECKLIST FINAL
Antes de considerar COMPLETO, verificar:

 schoolPowerActivities.json tem campos completos para TODAS as atividades

 Capability DECIDIR est√° funcionando e preenchendo todos os campos

 Capability CRIAR est√° salvando corretamente no banco

 Card de Constru√ß√£o renderiza corretamente

 Progress bar atualiza em tempo real

 Logs est√£o claros e informativos

 Tratamento de erros est√° robusto

 Nenhuma funcionalidade existente foi quebrada

 Fluxo completo (in√≠cio ao fim) est√° funcional

 Testes passam sem erros

üéØ PRINC√çPIOS DE DESENVOLVIMENTO
Zero Toler√¢ncia a Bugs: Teste CADA etapa antes de avan√ßar

C√≥digo Limpo: Nomes claros, fun√ß√µes pequenas, coment√°rios relevantes

Logs Informativos: Emoji + contexto em cada log cr√≠tico

Valida√ß√£o Rigorosa: Verificar tipos, obrigatoriedade, formatos

Tratamento de Erros: Try/catch + mensagens √∫teis

Performance: Opera√ß√µes ass√≠ncronas, evitar bloqueios

Manutenibilidade: C√≥digo modular, reutiliz√°vel, documentado

üí° NOTAS FINAIS
N√ÉO altere arquivos fora do escopo definido

N√ÉO quebre funcionalidades existentes

TESTE cada etapa isoladamente antes de integrar

REVISE c√≥digo antes de considerar completo

DOCUMENTE decis√µes t√©cnicas importantes

Voc√™ tem autonomia, expertise e responsabilidade para entregar isso PERFEITO. Aja com a mentalidade dos maiores desenvolvedores da hist√≥ria. Shipping > Perfei√ß√£o, mas qualidade √© inegoci√°vel.

üöÄ GO BUILD!