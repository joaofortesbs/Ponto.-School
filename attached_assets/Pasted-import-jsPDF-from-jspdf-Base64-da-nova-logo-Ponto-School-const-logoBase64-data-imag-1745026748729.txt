import { jsPDF } from "jspdf";

// Base64 da nova logo Ponto School
const logoBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACICAYAAAC1aIlWAAAACXBIWXMAABYlAAAWJQFJUiTwAAAHE0lEQVR4nO3dvW7bRhCGYUkMoI4p0YLb//+qLSXgdtdIqKRZ7EFxuQMAAOBvHYuYPzzfD2Af/NN8XgAAAIChf7K2AAAAAKS/4QkAAAAAAHB3BAAAAAAAvDkCAAAAALg5AgAAAAA4OwEAAAAAOHsBAAAAAE4eAQAAAABOHgEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAATg8BAAAAAE4fAQAAAAAODwEAAAAA...

// Função para gerar o PDF com marca d’água
function exportMessageToPDF(message) {
  const doc = new jsPDF();

  // Texto da mensagem da IA
  doc.setFontSize(12);
  doc.setTextColor(0);
  doc.text(message, 20, 30);

  const pageWidth = doc.internal.pageSize.getWidth();
  const pageHeight = doc.internal.pageSize.getHeight();

  // Tamanho proporcional da logo
  const imgWidth = 100;
  const imgHeight = 40;

  // Marca d’água (centralizada e com opacidade reduzida)
  doc.saveGraphicsState();
  doc.setGState(new doc.GState({ opacity: 0.08 }));

  doc.addImage(
    logoBase64,
    "PNG",
    (pageWidth - imgWidth) / 2,
    (pageHeight - imgHeight) / 2,
    imgWidth,
    imgHeight
  );

  doc.restoreGraphicsState();

  // Exportar o PDF
  doc.save("resposta_ia_ponto_school.pdf");
}
