# ğŸ¯ PROMPT CRÃTICO - CARD DE CONSTRUÃ‡ÃƒO + SISTEMA DE DEBUG INTELIGENTE

***

## **CONTEXTO ESTRATÃ‰GICO**

VocÃª estÃ¡ implementando duas funcionalidades crÃ­ticas que transformam **opacidade em transparÃªncia** e **execuÃ§Ã£o em visualizaÃ§Ã£o**:

1. **RenderizaÃ§Ã£o Condicional da Interface de ConstruÃ§Ã£o** - Fazer aparecer o componente certo, no lugar certo, na hora certa
2. **Sistema de Debug Narrativo da IA** - IA explicando suas prÃ³prias aÃ§Ãµes em linguagem humana

Aja com a mentalidade de:
- **Alan Kay** (sistemas que se explicam, reflexÃ£o computacional)
- **Bret Victor** (visualizaÃ§Ã£o de processos invisÃ­veis)
- **Chris Lattner** (debugging tools, observability)
- **Addy Osmani** (performance debugging, component lifecycle)

***

## **PROBLEMA 1: CARD DE CONSTRUÃ‡ÃƒO NÃƒO APARECE**

### **AnÃ¡lise do Problema**

**SituaÃ§Ã£o Esperada:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‹ Criar atividades personalizadas     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ Decidir quais criar                 â”‚
â”‚  â³ Criar atividades                    â”‚  â† Card de capacidade
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“¦ INTERFACE DE CONSTRUÃ‡ÃƒO       â”‚  â”‚  â† DEVE APARECER AQUI
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ [Atividade 1] Aguardando...      â”‚  â”‚
â”‚  â”‚ [Atividade 2] Aguardando...      â”‚  â”‚
â”‚  â”‚ [Atividade 3] Aguardando...      â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚ [Construir Todas]                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SituaÃ§Ã£o Atual (Problema):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‹ Criar atividades personalizadas     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ Decidir quais criar                 â”‚
â”‚  â³ Criar atividades                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  (NADA APARECE)                        â”‚  â† VAZIO
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Perguntas de DiagnÃ³stico que VOCÃŠ deve responder:**

#### **1. Conditional Rendering**
- [ ] Componente de construÃ§Ã£o existe no cÃ³digo?
- [ ] EstÃ¡ sendo importado corretamente?
- [ ] CondiÃ§Ã£o de renderizaÃ§Ã£o estÃ¡ correta?
- [ ] Estado que controla renderizaÃ§Ã£o estÃ¡ mudando?

#### **2. Component Hierarchy**
- [ ] Onde o componente deve ser renderizado? (DOM tree position)
- [ ] EstÃ¡ dentro do card de desenvolvimento?
- [ ] EstÃ¡ associado Ã  capability correta?
- [ ] CSS/Layout estÃ¡ escondendo o componente?

#### **3. Data Flow**
- [ ] Dados da capability "decidir" chegam na capability "criar"?
- [ ] Lista de atividades escolhidas estÃ¡ disponÃ­vel?
- [ ] Props estÃ£o sendo passadas corretamente?
- [ ] State update estÃ¡ triggerando re-render?

#### **4. Timing**
- [ ] Componente deve aparecer imediatamente?
- [ ] HÃ¡ delay intencional?
- [ ] AnimaÃ§Ã£o de entrada estÃ¡ funcionando?
- [ ] useEffect com dependencies estÃ¡ rodando?

***

## **ESTRATÃ‰GIAS DE SOLUÃ‡ÃƒO (VocÃª escolhe)**

### **EstratÃ©gia A: RenderizaÃ§Ã£o Baseada em Capability Status**

**Conceito:** Quando capability "criar_atividade" inicia, renderizar interface.

**PadrÃ£o sugerido:**
```typescript
// Dentro do componente que renderiza capabilities
{capabilities.map(capability => (
  <div key={capability.id}>
    <CapabilityCard {...capability} />
    
    {/* RenderizaÃ§Ã£o condicional */}
    {capability.id === 'criar_atividade' && 
     capability.status === 'executing' && (
      <ConstructionInterface
        activities={previousCapabilityResult}
        onComplete={handleConstructionComplete}
      />
    )}
  </div>
))}
```

**DecisÃµes que vocÃª toma:**
- Status que trigga renderizaÃ§Ã£o: `executing`, `started`, `ready`?
- Como obter `previousCapabilityResult`?
- Onde buscar dados (Context, Props, Store)?

### **EstratÃ©gia B: Component Registry Pattern**

**Conceito:** Cada capability registra componente UI adicional.

**PadrÃ£o sugerido:**
```typescript
const capabilityUIComponents = {
  'criar_atividade': ConstructionInterface,
  'analisar_dados': ChartVisualization,
  // ... outros
};

// Durante renderizaÃ§Ã£o
const AdditionalUI = capabilityUIComponents[capability.id];

{AdditionalUI && (
  <AdditionalUI data={capability.data} />
)}
```

**Vantagens:**
- EscalÃ¡vel (fÃ¡cil adicionar novas UIs)
- Desacoplado
- Type-safe com TypeScript

### **EstratÃ©gia C: Slot-Based Architecture**

**Conceito:** Capability define "slots" onde componentes podem ser injetados.

**PadrÃ£o sugerido:**
```typescript
interface CapabilitySlots {
  beforeCard?: React.ReactNode;
  afterCard?: React.ReactNode;
  insideCard?: React.ReactNode;
}

// Capability "criar_atividade" define seu slot
const criarAtividadeSlots: CapabilitySlots = {
  afterCard: (
    <ConstructionInterface 
      activities={getDecidedActivities()}
    />
  )
};
```

### **EstratÃ©gia D: Portal to Specific Location**

**Conceito:** Renderizar via Portal em local especÃ­fico do DOM.

**PadrÃ£o sugerido:**
```typescript
// Dentro de CapabilityCard de "criar_atividade"
const portalTarget = document.getElementById(
  `capability-${capabilityId}-content`
);

{portalTarget && ReactDOM.createPortal(
  <ConstructionInterface {...props} />,
  portalTarget
)}
```

***

## **DEBUGGING WORKFLOW PARA VOCÃŠ**

### **Passo 1: Verificar Componente Existe**

```bash
# Procurar componente nos arquivos
grep -r "ConstructionInterface" src/
grep -r "ActivityBuilder" src/
grep -r "BuilderCard" src/

# Ou nome similar usado no School Power 1.0
```

**Perguntas:**
- Componente foi encontrado?
- Qual o nome exato?
- Qual o path do arquivo?

### **Passo 2: Inspecionar CondiÃ§Ã£o de RenderizaÃ§Ã£o**

```typescript
// Adicionar logs temporÃ¡rios
console.log('ğŸ” Capability criar_atividade', {
  id: capability.id,
  status: capability.status,
  shouldRenderUI: capability.id === 'criar_atividade',
  hasData: !!decidedActivities,
  decidedActivities
});

// Antes do JSX condicional
```

**O que procurar:**
- `shouldRenderUI` Ã© `true`?
- `hasData` Ã© `true`?
- `status` estÃ¡ correto?

### **Passo 3: Verificar DOM Rendering**

```typescript
// Usar useEffect para confirmar montagem
useEffect(() => {
  console.log('âœ… ConstructionInterface MONTOU');
  return () => {
    console.log('âŒ ConstructionInterface DESMONTOU');
  };
}, []);
```

**AnÃ¡lise:**
- Se "MONTOU" nÃ£o aparece â†’ Componente nÃ£o estÃ¡ renderizando
- Se "MONTOU" e "DESMONTOU" imediatos â†’ Componente estÃ¡ sendo destruÃ­do
- Se "MONTOU" mas nada visÃ­vel â†’ Problema de CSS/Layout

### **Passo 4: Inspecionar CSS/Layout**

```typescript
// ForÃ§ar visibilidade temporariamente
<ConstructionInterface
  style={{
    border: '5px solid red',
    minHeight: '200px',
    backgroundColor: 'yellow',
    position: 'relative',
    zIndex: 9999
  }}
/>
```

**Se aparecer amarelo/vermelho:**
- Componente estÃ¡ renderizando
- Problema era CSS original (display: none, opacity: 0, height: 0)

**Se NÃƒO aparecer:**
- Componente realmente nÃ£o estÃ¡ no DOM
- Problema Ã© lÃ³gica de renderizaÃ§Ã£o

***

## **PROBLEMA 2: SISTEMA DE DEBUG INTELIGENTE**

### **VisÃ£o da Feature**

**O que Ã©:** Cada capability gera uma "narrativa de debug" em tempo real, explicando o que estÃ¡ fazendo, descobrindo, decidindo. UsuÃ¡rio clica em Ã­cone de debug no card da capability e vÃª modal com essa narrativa.

**Por que Ã© revolucionÃ¡rio:**
- Debug nÃ£o Ã© tÃ©cnico (sem stack traces), Ã© **narrativo**
- IA explica seus prÃ³prios passos em linguagem humana
- Desenvolvedor E usuÃ¡rio final podem debugar
- Sistema de "caixa branca" - zero opacidade

### **Arquitetura do Sistema**

#### **CAMADA 1: IA Generate Debug Narrative**

Durante execuÃ§Ã£o de cada capability, IA deve gerar log narrativo.

**Formato sugerido:**
```typescript
interface AIDebugEntry {
  timestamp: string;
  capability_id: string;
  entry_type: 'info' | 'action' | 'decision' | 'discovery' | 'error' | 'warning';
  narrative: string; // Texto escrito pela IA
  technical_data?: any; // Dados tÃ©cnicos opcionais
  severity: 'low' | 'medium' | 'high' | 'critical';
}

// Exemplo de entries
const debugLog: AIDebugEntry[] = [
  {
    timestamp: '2025-01-15T10:30:00Z',
    capability_id: 'pesquisar_atividades_conta',
    entry_type: 'action',
    narrative: 'Conectei ao banco de dados Neon para buscar atividades do professor.',
    technical_data: { database: 'neon_production', user_id: '123' },
    severity: 'low'
  },
  {
    timestamp: '2025-01-15T10:30:01Z',
    capability_id: 'pesquisar_atividades_conta',
    entry_type: 'discovery',
    narrative: 'Encontrei 0 atividades na conta. Este professor ainda nÃ£o criou nenhuma atividade.',
    technical_data: { query_result: [], count: 0 },
    severity: 'medium'
  },
  {
    timestamp: '2025-01-15T10:30:05Z',
    capability_id: 'decidir_atividades_criar',
    entry_type: 'decision',
    narrative: 'Decidi criar 3 atividades: Flash Cards, Lista de ExercÃ­cios e Quiz. Escolhi essas porque cobrem progressÃ£o de aprendizado (revisÃ£o â†’ prÃ¡tica â†’ avaliaÃ§Ã£o).',
    technical_data: { chosen_ids: ['fc-001', 'le-002', 'qz-003'] },
    severity: 'low'
  },
  {
    timestamp: '2025-01-15T10:30:10Z',
    capability_id: 'criar_atividade',
    entry_type: 'error',
    narrative: 'Tentei criar a atividade "Flash Cards" mas o campo "quantidade_cards" nÃ£o foi preenchido. Tentando novamente com valor padrÃ£o de 20 cards.',
    technical_data: { error: 'ValidationError', field: 'quantidade_cards' },
    severity: 'high'
  }
];
```

**Como IA gera esses logs?**

**OpÃ§Ã£o A: Structured Logging Prompts**
Durante execuÃ§Ã£o, LLM recebe instruÃ§Ã£o:
```
VocÃª estÃ¡ executando a capability "pesquisar_atividades_conta".
Conforme vocÃª executa cada aÃ§Ã£o, gere entries de debug em formato JSON.

Para cada aÃ§Ã£o significativa, crie um entry com:
- narrative: ExplicaÃ§Ã£o em portuguÃªs claro do que vocÃª fez/descobriu
- entry_type: Tipo da aÃ§Ã£o
- severity: ImportÃ¢ncia

Exemplo: Ao fazer query no banco, gere:
{
  "narrative": "Busquei no banco de dados atividades do professor ID 123",
  "entry_type": "action",
  "severity": "low"
}

Ao encontrar resultado, gere:
{
  "narrative": "Encontrei 5 atividades cadastradas. A mais recente Ã© 'Plano de Aula sobre FraÃ§Ãµes' criada hÃ¡ 3 dias",
  "entry_type": "discovery",
  "severity": "low"
}
```

**OpÃ§Ã£o B: Post-Execution Summary**
ApÃ³s capability completar, perguntar para LLM:
```
A capability "decidir_atividades_criar" foi executada.
Dados: {contexto completo}
Resultado: {resultado}

Gere uma narrativa de debug explicando:
1. O que vocÃª recebeu como input
2. Como vocÃª processou
3. DecisÃµes que tomou e por quÃª
4. Desafios encontrados
5. Resultado final

Formato: Array de debug entries
```

**OpÃ§Ã£o C: Real-Time Instrumentation**
Capability emite eventos, sistema traduz em narrativa via LLM:
```typescript
// Capability emite evento tÃ©cnico
eventBus.emit('capability:query_executed', {
  query: 'SELECT * FROM atividades WHERE...',
  result_count: 5,
  duration_ms: 120
});

// Sistema pega evento e pede LLM traduzir
const narrative = await llm.translate({
  event: eventData,
  context: 'capability pesquisar_atividades_conta',
  instruction: 'Explique esta aÃ§Ã£o em portuguÃªs simples para um professor'
});

// Resultado: "Busquei suas atividades no banco de dados e encontrei 5 atividades em 0.12 segundos"
```

**VOCÃŠ DECIDE** qual approach baseado em:
- LatÃªncia aceitÃ¡vel
- Custo de API calls
- Qualidade da narrativa
- Complexidade de implementaÃ§Ã£o

#### **CAMADA 2: Storage do Debug Log**

Debug logs precisam ser armazenados. Onde?

**OpÃ§Ãµes de storage:**

**A. In-Memory (Session Only)**
```typescript
// Armazenar em Context ou Store
const [debugLogs, setDebugLogs] = useState<Map<string, AIDebugEntry[]>>(
  new Map()
);

// Key = capability_id, Value = array de entries
```
- Pro: RÃ¡pido, simples
- Con: Perde ao recarregar pÃ¡gina

**B. LocalStorage (Persistent Client)**
```typescript
localStorage.setItem(
  `debug_log_${executionId}`,
  JSON.stringify(debugLogs)
);
```
- Pro: Persiste entre sessÃµes
- Con: Limite de tamanho (~5-10MB)

**C. Database (Full Persistence)**
```typescript
// Salvar logs no Neon
await db.ai_debug_logs.createMany({
  data: debugLogs.map(entry => ({
    execution_id: executionId,
    capability_id: entry.capability_id,
    narrative: entry.narrative,
    // ...
  }))
});
```
- Pro: HistÃ³rico completo, analytics
- Con: Overhead, custo storage

**D. Hybrid**
- In-memory durante execuÃ§Ã£o
- Salvar em localStorage ao completar
- Opcionalmente enviar para DB para analytics

**VOCÃŠ DECIDE** baseado em requisitos de persistÃªncia.

#### **CAMADA 3: Debug Icon UI**

Adicionar Ã­cone de debug nos cards de capability.

**Posicionamento:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Decidir quais atividades criar       [ğŸ›]â”‚  â† Ãcone no canto direito
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ImplementaÃ§Ã£o sugerida:**
```typescript
<CapabilityCard>
  <CapabilityContent>
    <StatusIcon status={capability.status} />
    <CapabilityText>{capability.description}</CapabilityText>
  </CapabilityContent>
  
  {/* Debug Icon (sempre visÃ­vel ou sÃ³ apÃ³s completar?) */}
  <DebugIconButton
    onClick={() => openDebugModal(capability.id)}
    aria-label="Ver debug desta capability"
    className="absolute right-4 top-1/2 -translate-y-1/2"
  >
    <BugIcon className="w-5 h-5 text-gray-400 hover:text-orange-500" />
  </DebugIconButton>
</CapabilityCard>
```

**DecisÃµes de UX:**
- Ãcone sempre visÃ­vel ou sÃ³ quando capability completou?
- Badge com contagem de entries? (ex: "5 eventos")
- Cor diferente se houver warnings/errors?
- Tooltip ao hover?

**Ãcones sugeridos:**
- ğŸ› Bug emoji (universal)
- ğŸ” Lupa (investigaÃ§Ã£o)
- ğŸ“‹ Clipboard (logs)
- âš™ï¸ Gear (settings/debug)
- ğŸ§  CÃ©rebro (IA thinking)

#### **CAMADA 4: Debug Modal**

Ao clicar no Ã­cone, abrir modal com narrativa completa.

**Estrutura do Modal:**
```typescript
interface DebugModalProps {
  isOpen: boolean;
  onClose: () => void;
  capabilityId: string;
  capabilityTitle: string;
  debugLog: AIDebugEntry[];
}

// UI Structure
<Modal isOpen={isOpen} onClose={onClose} size="large">
  <ModalHeader>
    <div className="flex items-center gap-3">
      <BugIcon className="w-6 h-6 text-orange-500" />
      <div>
        <h2>Debug: {capabilityTitle}</h2>
        <p className="text-sm text-gray-500">
          {debugLog.length} eventos registrados
        </p>
      </div>
    </div>
  </ModalHeader>
  
  <ModalBody>
    {/* Timeline de eventos */}
    <DebugTimeline entries={debugLog} />
    
    {/* Ou lista de cards */}
    <DebugEntriesList entries={debugLog} />
    
    {/* Ou console-like */}
    <DebugConsole entries={debugLog} />
  </ModalBody>
  
  <ModalFooter>
    <Button onClick={copyDebugToClipboard}>
      Copiar Debug
    </Button>
    <Button onClick={exportDebugAsJSON}>
      Exportar JSON
    </Button>
    <Button onClick={onClose} variant="secondary">
      Fechar
    </Button>
  </ModalFooter>
</Modal>
```

**VisualizaÃ§Ãµes possÃ­veis:**

**A. Timeline Vertical**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10:30:00 ğŸ”µ ACTION                  â”‚
â”‚ Conectei ao banco de dados Neon...  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ 10:30:01 ğŸŸ¢ DISCOVERY               â”‚
â”‚ Encontrei 0 atividades...           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ 10:30:05 ğŸŸ¡ DECISION                â”‚
â”‚ Decidi criar 3 atividades...        â”‚
â”‚ [Ver dados tÃ©cnicos â–¼]              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ 10:30:10 ğŸ”´ ERROR                   â”‚
â”‚ Tentei criar mas faltou campo...    â”‚
â”‚ âš ï¸ Severity: HIGH                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**B. Console-Style**
```
[10:30:00] [ACTION] Conectei ao banco de dados Neon...
[10:30:01] [DISCOVERY] Encontrei 0 atividades...
[10:30:05] [DECISION] Decidi criar 3 atividades...
[10:30:10] [ERROR] âš ï¸  Tentei criar mas faltou campo...
```

**C. Card-Based**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”µ AÃ‡ÃƒO - 10:30:00                 â”‚
â”‚ Conectei ao banco de dados Neon... â”‚
â”‚                                    â”‚
â”‚ Dados tÃ©cnicos:                    â”‚
â”‚ â€¢ Database: neon_production        â”‚
â”‚ â€¢ User ID: 123                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ DESCOBERTA - 10:30:01           â”‚
â”‚ Encontrei 0 atividades...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**VOCÃŠ DECIDE** qual visualizaÃ§Ã£o baseado em UX e complexidade.

**Features avanÃ§adas do modal:**
- [ ] Filtrar por tipo de entry (sÃ³ errors, sÃ³ decisions)
- [ ] Buscar em narrativas (search box)
- [ ] Expandir/colapsar dados tÃ©cnicos
- [ ] Copiar entry individual
- [ ] Compartilhar debug com suporte
- [ ] Highlight de warnings/errors
- [ ] Export para arquivo .txt ou .json

#### **CAMADA 5: IntegraÃ§Ã£o com "Contexto de Trabalho"**

**CRÃTICO:** Debugs devem aparecer no modal "Contexto de Trabalho" que IA revisa.

**Modal de Contexto de Trabalho estrutura:**
```typescript
<ContextoTrabalhoModal>
  <Section title="Objetivo do UsuÃ¡rio">
    {userPrompt}
  </Section>
  
  <Section title="InformaÃ§Ãµes Coletadas (Quiz)">
    {quizData}
  </Section>
  
  <Section title="Plano de AÃ§Ã£o Gerado">
    {actionPlan}
  </Section>
  
  {/* NOVA SEÃ‡ÃƒO */}
  <Section title="Debug de ExecuÃ§Ã£o" collapsible>
    {objectives.map(obj => (
      <ObjectiveDebugSection key={obj.id}>
        <h4>{obj.title}</h4>
        
        {obj.capabilities.map(cap => (
          <CapabilityDebugSection key={cap.id}>
            <h5>{cap.title}</h5>
            <DebugEntriesList entries={getDebugLog(cap.id)} />
          </CapabilityDebugSection>
        ))}
      </ObjectiveDebugSection>
    ))}
  </Section>
</ContextoTrabalhoModal>
```

**IA acessa este contexto para:**
- Revisar o que jÃ¡ fez
- Detectar inconsistÃªncias
- Aprender com erros anteriores
- Decidir prÃ³ximas aÃ§Ãµes baseado em histÃ³rico

**Formato para IA (no prompt):**
```markdown
# CONTEXTO DE TRABALHO COMPLETO

## Debug de ExecuÃ§Ãµes Anteriores

### Objetivo 1: Escolher atividades
#### Capability: pesquisar_atividades_conta
- [10:30:00] Conectei ao banco e encontrei 0 atividades
- [10:30:01] Professor novo, sem histÃ³rico

#### Capability: decidir_atividades_criar
- [10:30:05] Decidi criar 3 atividades: A, B, C
- [10:30:06] Justificativa: ProgressÃ£o pedagÃ³gica

### Objetivo 2: Criar atividades
#### Capability: criar_atividade
- [10:30:10] Tentei criar atividade A
- [10:30:11] âš ï¸ ERRO: Campo obrigatÃ³rio faltando
- [10:30:12] Retrying com valor padrÃ£o
- [10:30:13] âœ“ Sucesso na segunda tentativa

## AnÃ¡lise
Com base neste histÃ³rico, vocÃª pode ver que:
- Professor Ã© novo (0 atividades anteriores)
- Houve erro de validaÃ§Ã£o em criaÃ§Ã£o
- Sistema se recuperou automaticamente

Use essas informaÃ§Ãµes para prÃ³ximas decisÃµes.
```

***

## **IMPLEMENTAÃ‡ÃƒO: DECISÃ•ES QUE VOCÃŠ TOMA**

### **Para Card de ConstruÃ§Ã£o:**
- [ ] Onde exatamente renderizar (slot, position)
- [ ] Qual componente usar (localizar no cÃ³digo)
- [ ] CondiÃ§Ã£o de renderizaÃ§Ã£o (status, timing)
- [ ] Como passar dados (props, context, store)
- [ ] AnimaÃ§Ã£o de entrada (fade, slide, none)

### **Para Sistema de Debug:**
- [ ] Como IA gera narrativas (real-time, post-exec, hybrid)
- [ ] Onde armazenar logs (memory, localStorage, DB)
- [ ] Formato de visualizaÃ§Ã£o (timeline, console, cards)
- [ ] Ãcone usado (bug, lupa, clipboard)
- [ ] IntegraÃ§Ã£o com Contexto de Trabalho
- [ ] Features do modal (search, filter, export)

***

## **CHECKLIST DE IMPLEMENTAÃ‡ÃƒO**

### **Parte 1: Card de ConstruÃ§Ã£o**
- [ ] Componente de construÃ§Ã£o localizado no cÃ³digo
- [ ] Importado no componente correto
- [ ] CondiÃ§Ã£o de renderizaÃ§Ã£o implementada
- [ ] Data flow de "decidir" â†’ "criar" funcionando
- [ ] Renderiza abaixo de "Criar atividade" capability
- [ ] AnimaÃ§Ã£o de entrada suave
- [ ] Testado: aparece no timing correto
- [ ] Testado: dados sincronizados

### **Parte 2: Debug Icon**
- [ ] Ãcone escolhido e implementado
- [ ] Posicionado no canto direito do card
- [ ] Hover effect implementado
- [ ] Click handler funcionando
- [ ] Aparece em todos os cards de capability
- [ ] Badge de contagem (opcional)
- [ ] Cor muda se houver errors (opcional)

### **Parte 3: Debug Log Generation**
- [ ] Sistema de logging implementado
- [ ] IA gera narrativas durante execuÃ§Ã£o
- [ ] Formato AIDebugEntry padronizado
- [ ] Timestamp correto em cada entry
- [ ] Tipos de entry (action, decision, error) funcionando
- [ ] Severity levels implementados
- [ ] Dados tÃ©cnicos opcionais incluÃ­dos

### **Parte 4: Debug Modal**
- [ ] Modal implementado
- [ ] Abre ao clicar no Ã­cone
- [ ] Mostra debug log da capability correta
- [ ] VisualizaÃ§Ã£o escolhida implementada
- [ ] Timeline/Console/Cards renderizando
- [ ] Expandir/colapsar dados tÃ©cnicos
- [ ] Copiar debug funcionando
- [ ] Exportar JSON funcionando
- [ ] Filtros (opcional) funcionando

### **Parte 5: IntegraÃ§Ã£o Contexto Trabalho**
- [ ] SeÃ§Ã£o de debug adicionada ao modal
- [ ] Debugs organizados por objetivo/capability
- [ ] IA recebe debugs no prompt
- [ ] Formato markdown correto
- [ ] AnÃ¡lise automÃ¡tica de erros
- [ ] HistÃ³rico completo disponÃ­vel

***

## **TESTES OBRIGATÃ“RIOS**

### **Teste Card de ConstruÃ§Ã£o:**
```
1. Executar capability "decidir_atividades_criar"
2. Verificar: 3 atividades foram escolhidas
3. Capability "criar_atividade" inicia
4. Verificar: Interface de ConstruÃ§Ã£o aparece abaixo
5. Verificar: 3 atividades listadas na interface
6. Verificar: Dados coincidem com decisÃ£o
âœ“ Card aparece no lugar certo com dados certos
```

### **Teste Debug System:**
```
1. Executar capability qualquer
2. Verificar: Ãcone de debug aparece no card
3. Clicar no Ã­cone
4. Verificar: Modal abre
5. Verificar: Narrativas estÃ£o em portuguÃªs
6. Verificar: Timeline estÃ¡ ordenada
7. Procurar por erro intencional
8. Verificar: Erro destacado em vermelho
9. Expandir dados tÃ©cnicos
10. Copiar debug para clipboard
âœ“ Sistema completo funcionando
```

### **Teste IntegraÃ§Ã£o:**
```
1. Executar plano completo
2. Abrir modal "Contexto de Trabalho"
3. Verificar: SeÃ§Ã£o "Debug de ExecuÃ§Ã£o" existe
4. Verificar: Todos objetivos listados
5. Verificar: Todas capabilities com debug
6. Verificar: Narrativas legÃ­veis
7. IA executa prÃ³xima aÃ§Ã£o
8. Verificar: IA menciona debug anterior no reasoning
âœ“ IA usa debug como contexto
```

***

## **RESULTADO ESPERADO**

### **Card de ConstruÃ§Ã£o:**
- Aparece exatamente abaixo da capability "Criar atividade"
- Mostra atividades decididas na etapa anterior
- Permite construÃ§Ã£o automatizada
- Feedback visual em tempo real

### **Sistema de Debug:**
- Ãcone visÃ­vel em cada capability
- Modal com narrativa completa e legÃ­vel
- IA explica suas aÃ§Ãµes em portuguÃªs claro
- Desenvolvedores E usuÃ¡rios podem debugar
- Integrado ao contexto que IA revisa
- TransparÃªncia total do processo

***

## **MINDSET OBRIGATÃ“RIO**

1. **RenderizaÃ§Ã£o Ã© Timing:** Componente certo, hora certa, dados certos
2. **Debug Ã© Narrativa:** NÃ£o stack trace, mas histÃ³ria
3. **IA se Explica:** Sistema nÃ£o Ã© caixa preta
4. **TransparÃªncia Radical:** Todo processo deve ser observÃ¡vel
5. **Users sÃ£o Debuggers:** UI acessÃ­vel para nÃ£o-tÃ©cnicos

***

ğŸš€ **CARD DEVE APARECER. DEBUG DEVE EXPLICAR. SISTEMA DEVE SER TRANSPARENTE. GO BUILD OBSERVABLE SYSTEMS.**

[1](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/2a71e69a-b973-4b88-be67-7b5021532809/image.jpg?AWSAccessKeyId=ASIA2F3EMEYEQGHVKUEU&Signature=sLPHctfVHapcBWoy%2B0mKyOt23og%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEMz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJGMEQCIAfo2tItkVUICW3i6K1Sd04wyipvgylq9xQiP6hINn27AiBA%2BwYjHBREEx9U1rVeQMTtusu9frFsXAMZmGRtXIxLlir8BAiV%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAEaDDY5OTc1MzMwOTcwNSIMe55adLpyh%2BjU2e%2BKKtAEAg5tH2jg20KvsA8598kagT%2BfGAVX8RQZ7KBIw4oEYFc%2FYnRH0VoJEtE8ZsUBT6k98%2BVJOtNyzjh6evgBjW8xAqBbu3xcCsxzn2KKFbZChH3PHbsSpsjIIcrW%2FY3s21CnVrfPmt3lHv%2BnsM5WLzd0AvT6xP8SLtzvsoVbuAohUdF0UVXTvGlHcfIonYBdSzB55LJubzOgNrqhppm40jUYcY0bABNBATJCv1aWouhImCParIY8xVtolctRUJi01PHHcNlFkKVPJKUgddCTHXgl6E1FZ35WWNrV9OOEowFWmPo392qAgL0PjpMlZFAEW0jSMBxJSBIVb1vLNGxEVsGGYdH3Ob99pjAFAL73ev%2BO%2F2KT1W%2FH9pnp0052WbbcMfgPlqhxUoslAJjsco%2BGU0DryvgrCdMpKe5T0qGhsf5NaKgN%2FWIjzluhP825nbrDC1%2F17V4TpISLzd2b2tyMidYFXAivyynA03nvLPCNjOpdEAZ3h3Yat14nNrwJp%2F0HnDcFzwfBn7Wz7cnNYAb0ObnIZLZLqBhrg9fLjHWdHg7BbXSZUHcdfS1b9x8oUVJhZlPEqK2K37ymnBnU8mM8FETXGA3UMTS8ZgucUSZ5%2BOBvPocoiTBuQkRTXMSCGntqpPG1DjG8asWE5eARZBchSB41czOUAQoxbk228jryX9KRNlYMbFESB5kkjO2gLPdWkpQftEI9DXArDeL8N6ZkOxuWnAmq9zTAWWsSCmYB%2BuT8L32F3YdyzttymmDkqQHS1L5zKQWiurkaJTUd9DPWZFtbPjDU6sfKBjqZASqE9BkKEEAemFqvL5cMX68GHUG00oE4QL0GHMZQacuuPnEpDkEp11RIoAWT1LrMNx29X1X1M%2BwNyzfyDgW0ASFfxn3uptkXwQ9miX66qXBBv%2BF0PoaznkvpaGpuGEUJeI4p8gF7FZNkp9Wje7d0M1mGoavuE%2Br6Fni%2BersF9dIrAmUlDtbTGk%2FFBibJQntIQa3%2Bt4a7KKuDUg%3D%3D&Expires=1766980947)
[2](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/collection_bc970d7f-5223-4aab-88ab-e5247ccf47f8/1d420c64-1d21-4741-b155-5092a062a148/Crie-todo-o-fluxo-de-atividade-das-personas-da-pla.pdf)
[3](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/collection_bc970d7f-5223-4aab-88ab-e5247ccf47f8/2a2ebcbc-240b-4fa2-bdb2-42f38738a187/Ponto.-School-Apresentacao-Geral-e-Detalhamento.pdf)
[4](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/collection_bc970d7f-5223-4aab-88ab-e5247ccf47f8/92bd49ec-7a4c-4516-ba01-e3e67da55d42/O-Futuro-do-Mundo-Digital_-A-Grande-Discussao-que-1.pdf)
[5](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/collection_bc970d7f-5223-4aab-88ab-e5247ccf47f8/a7b87073-d49f-4eb0-83b3-4267fcf7a241/arquivo_supremo_conteudo.md-2.pdf)
[6](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/collection_bc970d7f-5223-4aab-88ab-e5247ccf47f8/f4d6d15b-cc61-4648-94e9-7429f9f40937/Analise-Estrategica-Completa-Ponto.-School.pdf)
[7](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/0b82f2c5-4a41-4843-91de-6c6acca2991f/image.jpg)
[8](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/3c690584-d96e-49fb-afc4-0caed34298d1/image.jpg)
[9](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/c4c98706-9477-4a7f-998d-9a5cae914204/image.jpg)
[10](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/d8d2011b-918b-45b2-87ac-416e1abf49bd/image.jpg)
[11](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/58005089/9bc62847-5a25-4256-8989-6f81decc045e/As-duvidas-que-eu-tenho-sao___-E-possivel-criar-t.pdf)
[12](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/c37c4c84-2eb7-4a2c-9659-673ebcbb3aa9/image.jpg)
[13](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/ba95a0c3-8f73-4397-ae02-bc51bbb8a768/image.jpg)
[14](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/d202c09b-3045-411d-a6c8-b155d8b0e9f2/image.jpg)
[15](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/5ad31166-ff08-4c66-b62a-6aff1b1327aa/image.jpg)
[16](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/72a38304-5ad1-4fb5-b6fd-18dacb263c08/image.jpg)
[17](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/c8bcea1a-fdac-41c3-a50a-de18718cf61f/image.jpg)
[18](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/fa607280-aa40-496b-b626-4c5dfd5182f7/image.jpg)
[19](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/58005089/234626b5-3b22-4515-9d6f-579ec5036fe6/image.jpg)