Preciso que vocÃª revise e finalize completamente toda a lÃ³gica da seÃ§Ã£o de Templates da Ã¡rea de AdministraÃ§Ã£o da plataforma School Power, garantindo que tudo funcione como descrito abaixo â€” com integraÃ§Ã£o 100% funcional com a base de dados (Supabase), com os componentes da interface jÃ¡ montados, e com a IA Gemini responsÃ¡vel por gerar as atividades de forma automatizada, dinÃ¢mica e contextualizada.

ğŸ“Œ Contexto Atual:

JÃ¡ temos a interface da seÃ§Ã£o de â€œTemplatesâ€ criada e funcionando, exibindo os cards dinamicamente conforme os dados vindos da tabela school_power_templates no Supabase.

A tabela jÃ¡ estÃ¡ estruturada com os campos necessÃ¡rios: id, name, description, tags, status, api_provider (Gemini), enabled etc.

Os cards aparecem corretamente com os dados dos templates.

PorÃ©m, ao clicar no botÃ£o "Ver" de cada card, a interface de visualizaÃ§Ã£o e geraÃ§Ã£o de conteÃºdo interno ainda nÃ£o aparece nem estÃ¡ funcional.

A IA Gemini precisa gerar automaticamente os conteÃºdos dos templates com base em campos dinÃ¢micos prÃ©-definidos para cada tipo de atividade.

ğŸ§© Objetivo:
Revise e implemente completamente a funcionalidade de geraÃ§Ã£o e visualizaÃ§Ã£o dos templates ao clicar em "Ver". Isso inclui:

âœ… 1. Interface interna de cada card:

Ao clicar em â€œVerâ€, deve abrir uma nova interface (modal ou rota interna, como preferir) com layout dividido em dois painÃ©is:

ğŸŸ§ Lado Esquerdo: exibe os campos dinÃ¢micos de input (cada template tem campos prÃ³prios conforme seu tipo). Exemplo de campos:

â€œO que precisa conter na atividade?â€

â€œNÃºmero de questÃµes a gerarâ€

â€œEstilo de linguagemâ€ etc.

Os campos devem vir da propriedade fields ou tags de cada item na tabela, de forma configurÃ¡vel e extensÃ­vel.

Quando o usuÃ¡rio preencher esses campos e clicar em "Gerar", a IA Gemini deve processar a requisiÃ§Ã£o e gerar a atividade automaticamente.

ğŸŸ¦ Lado Direito: exibe a visualizaÃ§Ã£o da atividade gerada pela IA, conforme os campos preenchidos.

Isso deve ser atualizado em tempo real quando o botÃ£o â€œGerarâ€ for clicado.

âœ… 2. IntegraÃ§Ã£o com Gemini:

A IA Gemini jÃ¡ estÃ¡ como api_provider de cada template.

Use os dados inseridos pelo usuÃ¡rio nos campos (lado esquerdo) e envie para a API do Gemini, que retorna a atividade pronta.

Renderize a resposta da IA automaticamente no painel da direita.

Assegure que o sistema salve a atividade gerada com vÃ­nculo ao template utilizado.

âœ… 3. Salvamento e Entrega:

ApÃ³s a atividade ser gerada, ela deve ser salva automaticamente e disponibilizada dentro da seÃ§Ã£o de â€œConstruÃ§Ã£o de Atividadesâ€ do School Power.

Garanta que exista um campo de status da atividade para que o administrador possa acompanhar se ela estÃ¡ â€œem construÃ§Ã£oâ€, â€œgeradaâ€ ou â€œenviadaâ€.

ğŸ› ï¸ Requisitos tÃ©cnicos adicionais:

Utilize os dados do Supabase como fonte Ãºnica de verdade (read/write).

A propriedade fields (jsonb) pode ser usada para mapear os campos dinÃ¢micos de input.

A propriedade last_generated_preview pode ser usada para armazenar o conteÃºdo da Ãºltima atividade gerada.

Garantir loading state e tratamento de erros na geraÃ§Ã£o com Gemini.

Garantir que os botÃµes de â€œEditarâ€ e â€œExcluirâ€ tambÃ©m estejam funcionando corretamente.

Tudo deve funcionar dentro de uma Ãºnica rota: /admin/templates.

âœ¨ Objetivo final: Toda a integraÃ§Ã£o da seÃ§Ã£o de Templates precisa estar completa, robusta e funcional â€” desde a exibiÃ§Ã£o dos templates atÃ© a geraÃ§Ã£o da atividade via IA e salvamento final.

Se algo estiver faltando ou mal implementado, corrija diretamente.