Adicione uma l√≥gica para que os fluxogramas sej√£o gerados corretamente!

A l√≥gica/sistema √© o seguinte:

A IA (API) deve transformar a resposta textual que o usu√°rio colocou no campo de Inserir meu pr√≥prio conte√∫do sobre um tema em uma estrutura hier√°rquica ou sequencial, seguindo as regras de organiza√ß√£o de um fluxograma. Isso envolve 3 etapas principais:

ETAPA 1: Analisar e Estruturar o Conte√∫do
A IA deve:

Identificar os principais blocos conceituais do conte√∫do (por exemplo: etapas, partes, causas, consequ√™ncias, t√≥picos, etc.).

Classificar esses blocos como:

In√≠cio (t√≠tulo do fluxo)

Passo a passo ou ramifica√ß√µes

Conclus√µes ou resultados

Dividir em n√≥s visuais, com conex√µes l√≥gicas entre eles.

ETAPA 2: Gerar os N√≥s (Nodes) do Fluxograma
Cada n√≥ do fluxograma precisa conter:

id: Identificador √∫nico

label: Nome resumido e claro (t√≠tulo curto do ponto)

description: Um mini resumo que aparece ao clicar ou passar o mouse

position: (x, y) calculado ou sugerido

type: (default, decision, start, end, etc.)

Exemplo de estrutura (em JSON-like):

{
"id": "1",
"label": "Evapora√ß√£o",
"description": "A √°gua evapora com o calor do sol",
"type": "default",
"position": { "x": 100, "y": 100 }
}

ETAPA 3: Gerar as Conex√µes (Edges)
A IA deve dizer:

De qual n√≥ vem (source)

Para qual n√≥ vai (target)

Se tem condi√ß√£o (ex: ‚ÄúSim/N√£o‚Äù em decis√µes)

Exemplo:

json:

{
"id": "e1-2",
"source": "1",
"target": "2",
"label": "Segue o processo"
}

EXEMPLO COMPLETO DE OUTPUT DA IA:
üîµ Tema: Ciclo da √°gua

json:

{
"nodes": [
{
"id": "1",
"label": "Evapora√ß√£o",
"description": "A √°gua se transforma em vapor com o calor do sol",
"type": "start",
"position": { "x": 200, "y": 50 }
},
{
"id": "2",
"label": "Condensa√ß√£o",
"description": "O vapor sobe e se transforma em nuvem",
"type": "default",
"position": { "x": 200, "y": 150 }
},
{
"id": "3",
"label": "Precipita√ß√£o",
"description": "A √°gua retorna √† terra em forma de chuva",
"type": "default",
"position": { "x": 200, "y": 250 }
},
{
"id": "4",
"label": "Infiltra√ß√£o/Escoamento",
"description": "A √°gua penetra no solo ou escoa para rios",
"type": "end",
"position": { "x": 200, "y": 350 }
}
],
"edges": [
{ "id": "e1-2", "source": "1", "target": "2" },
{ "id": "e2-3", "source": "2", "target": "3" },
{ "id": "e3-4", "source": "3", "target": "4" }
]
}

COMO ENVIAR ESSA ESTRUTURA PARA O React Flow
O React Flow espera exatamente:

Um array de nodes

Um array de edges

‚ûï Integra√ß√£o com IA
A IA deve retornar somente a estrutura JSON com nodes e edges, dentro de um c√≥digo Markdown:

markdown:

{ ...json aqui... }
yaml:
Seu sistema do Vibe Code deve:
1. Identificar esse bloco `fluxograma`
2. Interpretar o JSON
3. Renderizar no `React Flow` o conte√∫do automaticamente
---
## üí° EXTRA: Funcionalidades Inteligentes
| Fun√ß√£o | O que a IA deve fazer |
|--------|------------------------|
| üîç Mini resumos ao passar o mouse | Incluir `description` nos nodes |
| üß© Cores diferentes por tipo de etapa | Incluir `type` ou `categoria` nos nodes |
| ‚ûï Bot√£o "Adicionar ao Caderno" | Incluir bot√£o em cada n√≥ que copia o texto para o caderno |
| üìà Evolu√ß√£o por Fluxo | Marcar fluxogramas vistos pelo aluno no backend |
| üß† IA adaptativa | IA pode ajustar a complexidade dos fluxogramas com base no n√≠vel do aluno |
---