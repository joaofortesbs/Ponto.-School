Passo 3: Instale as depend√™ncias poss√≠veis:
festan√ßa

Copiar
npm install @supabase/supabase-js dotenv
Passo 4: Configure as vari√°veis ‚Äã‚Äãde ambiente:
Crie ou edite o arquivo .env na raiz do projeto:
texto

Copiar
SUPABASE_URL=<sua_url_do_supabase>
SUPABASE_KEY=<sua_chave_do_supabase>
Substitua <sua_url_do_supabase> e <sua_chave_do_supabase> pelas credenciais do seu projeto Supabase (encontradas em Configura√ß√µes > API ).
Valida√ß√£o:

Confirme que o arquivo scripts/fix-apostila-relation.js foi criado.
Verifique se as depend√™ncias foram instaladas (procure por @supabase/supabase-js e dotenv em node_modules/ ).
Confirme que o arquivo .env cont√©m as vari√°veis ‚Äã‚Äãcorretas.
4. Adaptar o Comando para Terminais Diferentes
Ajuste o comando para operar em diferentes sistemas operacionais e terminais.

Comando para Bash (Linux/Mac/Git Bash):
festan√ßa

Copiar
echo "Iniciando corre√ß√£o da rela√ß√£o Apostila..." && node scripts/fix-apostila-relation.js
Comando para CMD (Windows):
comando

Copiar
echo Iniciando corre√ß√£o da rela√ß√£o Apostila... && node scripts\fix-apostila-relation.js
Comando para PowerShell (Windows):
PowerShell

Copiar
Write-Output "Iniciando corre√ß√£o da rela√ß√£o Apostila..."; node scripts\fix-apostila-relation.js
Valida√ß√£o:

Execute o comando correspondente ao seu terminal e confirme que ele foi executado sem erros de sintaxe.
5. Executar o Comando e Validar a Corre√ß√£o
Passo 1: Execute o comando de seguran√ßa para seu terminal:
Para Bash:
festan√ßa

Copiar
echo "Iniciando corre√ß√£o da rela√ß√£o Apostila..." && node scripts/fix-apostila-relation.js
Para CMD:
comando

Copiar
echo Iniciando corre√ß√£o da rela√ß√£o Apostila... && node scripts\fix-apostila-relation.js
Para PowerShell:
PowerShell

Copiar
Write-Output "Iniciando corre√ß√£o da rela√ß√£o Apostila..."; node scripts\fix-apostila-relation.js
Passo 2: Verifique a sa√≠da no terminal:
Voc√™ deve ver:
texto

Copiar
Iniciando corre√ß√£o da rela√ß√£o Apostila...
Rela√ß√£o Apostila corrigida com sucesso!
Passo 3: Verifique as tabelas no Supabase:
Acesse o painel do Supabase e v√° para o Table Editor .
Confirme que as tabelas apostila_pastas e apostila_anotacoes foram criadas com as estruturas e pol√≠ticas de RLS corretas.
Valida√ß√£o:

Confirme que o comando foi executado sem erros.
Verifique se as tabelas foram criadas no Supabase.
6. Testar o Modal da Apostila Inteligente
Ap√≥s executar o script, teste o Modal da Apostila Inteligente para confirmar que o erro foi resolvido.

Passo 1: Insira dados de teste no banco:
sql

Copiar
INSERT INTO apostila_pastas (user_id, nome, descricao)
VALUES ('<seu_user_id>', 'Pasta de Teste', 'Descri√ß√£o de teste');

INSERT INTO apostila_anotacoes (user_id, pasta_id, titulo, conteudo, modelo_anotacao, tags, data_criacao, origem)
VALUES (
  '<seu_user_id>',
  (SELECT id FROM apostila_pastas WHERE user_id = '<seu_user_id>' LIMIT 1),
  'Anota√ß√£o de Teste',
  'Conte√∫do de teste',
  'Estudo Completo',
  ARRAY['tag1', 'tag2'],
  CURRENT_TIMESTAMP,
  'caderno'
);
Passo 2: Abra o Modal da Apostila Inteligente na aplica√ß√£o.
Passo 3: Verifique se as anota√ß√µes est√£o exibidas corretamente, incluindo o nome da pasta associada (se pasta_id n√£o for null ).
Passo 4: Teste com uma anota√ß√£o sem pasta ( pasta_id: null ) para garantir que n√£o h√° erros.
Valida√ß√£o:

Confirme que o erro "A estrutura do banco de dados precisa ser atualizada" n√£o aparece mais.
Verifique se as anota√ß√µes s√£o exibidas corretamente no Modal da Apostila.
7. Atualizar a Documenta√ß√£o (Opcional)
Adicione instru√ß√µes claras para executar o script no futuro:

Edite o README.md ou crie um arquivo de documenta√ß√£o:

texto

Copiar
## Corrigir Rela√ß√£o Apostila

Para corrigir a estrutura do banco de dados para o Modal da Apostila Inteligente, execute o seguinte comando:

### Bash (Linux/Mac/Git Bash):
```bash
echo "Iniciando corre√ß√£o da rela√ß√£o Apostila..." && node scripts/fix-apostila-relation.js
CMD (Windows):
comando

Copiar
echo Iniciando corre√ß√£o da rela√ß√£o Apostila... && node scripts\fix-apostila-relation.js
PowerShell (Windows):
PowerShell

Copiar
Write-Output "Iniciando corre√ß√£o da rela√ß√£o Apostila..."; node scripts\fix-apostila-relation.js
-se de que as vari√°veis ‚Äã‚Äãde ambiente SUPABASE_URL e SUPABASE_KEY est√£o definidas no arquivo .env .

Valida√ß√£o:

Confirme que a documenta√ß√£o foi atualizada e est√° clara.
8. Testes Finais
Teste 1: Execute o comando em diferentes terminais (Bash, CMD, PowerShell) e confirme se ele funciona.
Teste 2: Verifique no Supabase se as tabelas foram criadas corretamente.
Teste 3: Teste o Modal da Apostila Inteligente e confirme que as anota√ß√µes s√£o exibidas sem erros.
Teste 4: Simule um cen√°rio de erro (ex.: remover as tabelas e executar o script novamente) para garantir que o script recria as tabelas corretamente.
‚úÖ Resultado Final Esperado

O comando √© executado com sucesso em diferentes terminais.
O script fix-apostila-relation.js cria as tabelas apostila_pastas e apostila_anotacoes com as rela√ß√µes e pol√≠ticas de RLS corretas.
O Modal da Apostila Inteligente exibe as anota√ß√µes corretamente, sem erros relacionados √† estrutura do banco de dados.
A documenta√ß√£o √© atualizada com instru√ß√µes claras para executar o script.
Se precisar de mais informa√ß√µes ou logs, posso fornecer exemplos adicionais! üöÄ‚ú®