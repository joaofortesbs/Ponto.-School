Validação:

Confirme que o arquivo src/utils/indexedDBManager.js foi criado.
Teste as funções manualmente no console do navegador:
JavaScript

Copiar
import indexedDBManager from './utils/indexedDBManager';
await indexedDBManager.saveExpirationDays('123', 30);
const expirationDays = await indexedDBManager.getExpirationDays('123');
console.log(expirationDays); // Deve retornar 30
const defaultExpiration = await indexedDBManager.getExpirationDays('456');
console.log(defaultExpiration); // Deve retornar 90
2. Ajustar o Modal de Anotações em Caderno
Atualize o Modal de Anotações em Caderno para salvar as anotações no IndexedDB com o tempo de expiração configurável.

Arquivo: src/components/CadernoAnotacoesModal.js
Código:
JavaScript

Copiar
import React, { useState } from 'react';
import indexedDBManager from '../utils/indexedDBManager';
import ExportToApostilaModal from './ExportToApostilaModal';
import { toast } from 'react-toastify';

const CadernoAnotacoesModal = ({ userId, onClose }) => {
  const [titulo, setTitulo] = useState('');
  const [conteudo, setConteudo] = useState('');
  const [modeloAnotacao, setModeloAnotacao] = useState('Estudo Completo');
  const [tags, setTags] = useState('');
  const [isExportModalOpen, setIsExportModalOpen] = useState(false);
  const [anotacaoToExport, setAnotacaoToExport] = useState(null);

  const generateUUID = () => {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  };

  const handleSave = async () => {
    try {
      const expirationDays = await indexedDBManager.getExpirationDays(userId);
      const expiresAt = new Date();
      expiresAt.setDate(expiresAt.getDate() + expirationDays);

      const novaAnotacao = {
        id: generateUUID(),
        user_id: userId,
        titulo,
        conteudo,
        modelo_anotacao: modeloAnotacao,
        tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
        data_criacao: new Date().toISOString(),
        data_exportacao: null,
        origem: 'caderno',
        pasta_id: null,
        expires_at: expiresAt.toISOString()
      };

      await indexedDBManager.saveAnotacao(userId, novaAnotacao);

      toast.success('Anotação salva com sucesso!');
      setAnotacaoToExport(novaAnotacao);
      setIsExportModalOpen(true);
    } catch (error) {
      toast.error(error.message);
    }
  };

  const handleExportToApostila = () => {
    setIsExportModalOpen(true);
  };

  const handleExportComplete = () => {
    setIsExportModalOpen(false);
    onClose();
  };

  return (
    <div className="modal">
      <h2>Criar Anotação no Caderno</h2>
      <input
        type="text"
        placeholder="Título"
        value={titulo}
        onChange={(e) => setTitulo(e.target.value)}
      />
      <textarea
        placeholder="Conteúdo"
        value={conteudo}
        onChange={(e) => setConteudo(e.target.value)}
      />
      <select
        value={modeloAnotacao}
        onChange={(e) => setModeloAnotacao(e.target.value)}
      >
        <option value="Estudo Completo">Estudo Completo</option>
        <option value="Mapa Mental">Mapa Mental</option>
      </select>
      <input
        type="text"
        placeholder="Tags (separadas por vírgula)"
        value={tags}
        onChange={(e) => setTags(e.target.value)}
      />
      <button onClick={handleSave}>Salvar Anotação</button>
      <button onClick={handleExportToApostila}>Salvar na Apostila Inteligente</button>
      <button onClick={onClose}>Fechar</button>

      {isExportModalOpen && anotacaoToExport && (
        <ExportToApostilaModal
          userId={userId}
          anotacao={anotacaoToExport}
          onClose={() => setIsExportModalOpen(false)}
          onExport={handleExportComplete}
        />
      )}
    </div>
  );
};

export default CadernoAnotacoesModal;

Mostrar na barra lateral
Validação:

Abra o Modal de Anotações em Caderno e crie uma anotação.
Confirme que a anotação é salva no IndexedDB com expires_at definido para 90 dias (padrão).
Verifique se uma notificação de sucesso aparece.