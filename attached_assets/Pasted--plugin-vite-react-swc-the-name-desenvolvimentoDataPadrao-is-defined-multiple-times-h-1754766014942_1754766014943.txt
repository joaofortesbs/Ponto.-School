[plugin:vite:react-swc] Ã— the name `desenvolvimentoDataPadrao` is defined multiple times
     â•­â”€[/home/runner/workspace/src/features/schoolpower/activities/plano-aula/sections/desenvolvimento/DesenvolvimentoData.ts:18:1]
  18 â”‚ }
  19 â”‚ 
  20 â”‚ // Dados padrÃ£o/fallback - GARANTINDO QUE SEMPRE EXISTE
  21 â”‚ export const desenvolvimentoDataPadrao: DesenvolvimentoData = {
     Â·              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Â·                          â•°â”€â”€ previous definition of `desenvolvimentoDataPadrao` here
  22 â”‚   etapas: [
  23 â”‚     {
  24 â”‚       id: "etapa_1",
  25 â”‚       titulo: "1. Revisando Substantivos: Comuns e PrÃ³prios",
  26 â”‚       descricao: "InÃ­cio com uma breve revisÃ£o sobre substantivos comuns e prÃ³prios. Utilizar exemplos do cotidiano para facilitar a compreensÃ£o. Apresentar exemplos na lousa, solicitando exemplos dos alunos e classificando-os coletivamente. Esclarecer dÃºvidas e reforÃ§ar a diferenÃ§a entre os tipos de substantivos com exemplos concretos (nome de pessoas, lugares, coisas, etc.).",
  27 â”‚       tipoInteracao: "ApresentaÃ§Ã£o dialogada e discussÃ£o",
  28 â”‚       tempoEstimado: "10 minutos",
  29 â”‚       recursosUsados: ["Lousa ou projetor", "Pincel ou caneta para lousa", "Quiz Interativo"],
  30 â”‚       ordem: 1,
  31 â”‚       expandida: false
  32 â”‚     },
  33 â”‚     {
  34 â”‚       id: "etapa_2",
  35 â”‚       titulo: "2. IntroduÃ§Ã£o aos Verbos: AÃ§Ã£o e Estado",
  36 â”‚       descricao: "Apresentar o conceito de verbo como palavra que indica aÃ§Ã£o ou estado. Utilizar exemplos prÃ¡ticos e contextualizados, como frases simples que mostram aÃ§Ãµes (correr, pular, estudar) e estados (ser, estar, parecer). Explicar a importÃ¢ncia dos verbos na construÃ§Ã£o de frases e narrativas.",
  37 â”‚       tipoInteracao: "ApresentaÃ§Ã£o expositiva com exemplos",
  38 â”‚       tempoEstimado: "15 minutos",
  39 â”‚       recursosUsados: ["Lousa ou projetor", "Pincel ou caneta para lousa", "Organizador GrÃ¡fico"],
  40 â”‚       ordem: 2,
  41 â”‚       expandida: false
  42 â”‚     },
  43 â”‚     {
  44 â”‚       id: "etapa_3",
  45 â”‚       titulo: "3. Atividade PrÃ¡tica: Identificando Classes Gramaticais",
  46 â”‚       descricao: "Atividade em grupos onde os alunos receberÃ£o frases para identificar substantivos e verbos. Cada grupo apresentarÃ¡ suas respostas e justificativas. Promover discussÃ£o sobre as descobertas e corrigir possÃ­veis dÃºvidas de forma colaborativa.",
  47 â”‚       tipoInteracao: "Atividade em grupos e apresentaÃ§Ã£o",
  48 â”‚       tempoEstimado: "20 minutos",
  49 â”‚       recursosUsados: ["Folhas com exercÃ­cios", "Quiz Interativo", "Mapa Mental"],
  50 â”‚       ordem: 3,
  51 â”‚       expandida: false
  52 â”‚     }
  53 â”‚   ],
  54 â”‚   tempoTotalEstimado: "45min",
  55 â”‚   observacoesGerais: "Manter foco na participaÃ§Ã£o ativa dos alunos durante toda a aula. Utilizar exemplos do cotidiano para facilitar a compreensÃ£o. Estar atento Ã s dÃºvidas e promover um ambiente colaborativo de aprendizado.",
  56 â”‚   sugestoesIA: [
  57 â”‚     "Considere usar jogos interativos para tornar a identificaÃ§Ã£o de classes gramaticais mais dinÃ¢mica",
  58 â”‚     "Adicione exemplos visuais ou cards com palavras para facilitar a compreensÃ£o",
  59 â”‚     "Implemente um sistema de pontuaÃ§Ã£o para motivar a participaÃ§Ã£o dos alunos"
  60 â”‚   ]
  61 â”‚ };
  62 â”‚ 
  63 â”‚ // FunÃ§Ã£o para calcular tempo total das etapas
  64 â”‚ function calcularTempoTotal(etapas: EtapaDesenvolvimento[]): string {
  65 â”‚   if (!etapas || etapas.length === 0) return "0 minutos";
  66 â”‚   
  67 â”‚   let totalMinutos = 0;
  68 â”‚   etapas.forEach(etapa => {
  69 â”‚     const match = etapa.tempoEstimado.match(/\d+/);
  70 â”‚     if (match) {
  71 â”‚       totalMinutos += parseInt(match[0], 10);
  72 â”‚     }
  73 â”‚   });
  74 â”‚   
  75 â”‚   return totalMinutos > 60 ? `${Math.floor(totalMinutos / 60)}h ${totalMinutos % 60}min` : `${totalMinutos}min`;
  76 â”‚ }
  77 â”‚ 
  78 â”‚ // Classe para gerenciar dados de desenvolvimento via Gemini
  79 â”‚ export class DesenvolvimentoGeminiService {
  80 â”‚   private static readonly GEMINI_API_KEY = import.meta.env.VITE_GEMINI_API_KEY || 'AIzaSyB0wPaEv6T0C-2_z3rOwRjlQ-HQXPPfXF8';
  81 â”‚   private static readonly GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent';
  82 â”‚ 
  83 â”‚   static async gerarEtapasDesenvolvimento(contextoPlano: any): Promise<DesenvolvimentoData> {
  84 â”‚     try {
  85 â”‚       console.log('ğŸš€ Iniciando geraÃ§Ã£o de etapas via Gemini...', contextoPlano);
  86 â”‚ 
  87 â”‚       if (!contextoPlano) {
  88 â”‚         console.warn('âš ï¸ Contexto do plano nÃ£o fornecido, usando dados padrÃ£o');
  89 â”‚         return desenvolvimentoDataPadrao;
  90 â”‚       }
  91 â”‚ 
  92 â”‚       // Preparar prompt para o Gemini
  93 â”‚       const prompt = this.criarPromptDesenvolvimento(contextoPlano);
  94 â”‚       
  95 â”‚       const response = await fetch(`${this.GEMINI_API_URL}?key=${this.GEMINI_API_KEY}`, {
  96 â”‚         method: 'POST',
  97 â”‚         headers: {
  98 â”‚           'Content-Type': 'application/json',
  99 â”‚         },
 100 â”‚         body: JSON.stringify({
 101 â”‚           contents: [{
 102 â”‚             parts: [{
 103 â”‚               text: prompt
 104 â”‚             }]
 105 â”‚           }],
 106 â”‚           generationConfig: {
 107 â”‚             temperature: 0.7,
 108 â”‚             topK: 40,
 109 â”‚             topP: 0.95,
 110 â”‚             maxOutputTokens: 8192,
 111 â”‚           }
 112 â”‚         })
 113 â”‚       });
 114 â”‚ 
 115 â”‚       if (!response.ok) {
 116 â”‚         throw new Error(`Erro na API Gemini: ${response.status}`);
 117 â”‚       }
 118 â”‚ 
 119 â”‚       const data = await response.json();
 120 â”‚       
 121 â”‚       if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {
 122 â”‚         throw new Error('Resposta invÃ¡lida da API Gemini');
 123 â”‚       }
 124 â”‚ 
 125 â”‚       const textoResposta = data.candidates[0].content.parts[0].text;
 126 â”‚       console.log('ğŸ“ Resposta bruta do Gemini:', textoResposta);
 127 â”‚ 
 128 â”‚       return this.processarRespostaGemini(textoResposta);
 129 â”‚ 
 130 â”‚     } catch (error) {
 131 â”‚       console.error('âŒ Erro ao gerar etapas via Gemini:', error);
 132 â”‚       return desenvolvimentoDataPadrao;
 133 â”‚     }
 134 â”‚   }
 135 â”‚ 
 136 â”‚   private static criarPromptDesenvolvimento(contextoPlano: any): string {
 137 â”‚     return `
 138 â”‚ Baseado no seguinte contexto de plano de aula, gere APENAS um JSON vÃ¡lido com as etapas de desenvolvimento:
 139 â”‚ 
 140 â”‚ CONTEXTO:
 141 â”‚ - Disciplina: ${contextoPlano.disciplina || 'NÃ£o informado'}
 142 â”‚ - Tema: ${contextoPlano.tema || 'NÃ£o informado'}
 143 â”‚ - SÃ©rie: ${contextoPlano.serie || 'NÃ£o informado'}
 144 â”‚ - DuraÃ§Ã£o: ${contextoPlano.duracao || '45 minutos'}
 145 â”‚ - Objetivos: ${contextoPlano.objetivos || 'NÃ£o informado'}
 146 â”‚ 
 147 â”‚ Retorne APENAS um JSON vÃ¡lido seguindo esta estrutura exata:
 148 â”‚ 
 149 â”‚ {
 150 â”‚   "etapas": [
 151 â”‚     {
 152 â”‚       "id": "etapa_1",
 153 â”‚       "titulo": "TÃ­tulo da etapa",
 154 â”‚       "descricao": "DescriÃ§Ã£o detalhada da etapa",
 155 â”‚       "tipoInteracao": "Tipo de interaÃ§Ã£o",
 156 â”‚       "tempoEstimado": "X minutos",
 157 â”‚       "recursosUsados": ["recurso1", "recurso2"],
 158 â”‚       "ordem": 1,
 159 â”‚       "expandida": false
 160 â”‚     }
 161 â”‚   ],
 162 â”‚   "tempoTotalEstimado": "45min",
 163 â”‚   "observacoesGerais": "ObservaÃ§Ãµes gerais do plano",
 164 â”‚   "sugestoesIA": ["sugestÃ£o1", "sugestÃ£o2", "sugestÃ£o3"]
 165 â”‚ }
 166 â”‚ 
 167 â”‚ IMPORTANTE: 
 168 â”‚ - Retorne APENAS o JSON, sem texto adicional
 169 â”‚ - Gere entre 3 a 5 etapas
 170 â”‚ - O tempo total deve somar aproximadamente ${contextoPlano.duracao || '45 minutos'}
 171 â”‚ - Use recursos variados e apropriados para a disciplina
 172 â”‚ `;
 173 â”‚   }
 174 â”‚ 
 175 â”‚   private static processarRespostaGemini(textoResposta: string): DesenvolvimentoData {
 176 â”‚     try {
 177 â”‚       console.log('ğŸ”„ Processando resposta do Gemini...');
 178 â”‚       
 179 â”‚       let cleanedText = textoResposta.trim();
 180 â”‚       
 181 â”‚       // Remover markdown se presente
 182 â”‚       if (cleanedText.includes('```json')) {
 183 â”‚         cleanedText = cleanedText.replace(/```json\s*/g, '').replace(/```\s*$/g, '');
 184 â”‚       } else if (cleanedText.includes('```')) {
 185 â”‚         cleanedText = cleanedText.replace(/```\s*/g, '').replace(/```\s*$/g, '');
 186 â”‚       }
 187 â”‚       
 188 â”‚       // Remover texto antes e depois do JSON
 189 â”‚       const jsonStart = cleanedText.indexOf('{');
 190 â”‚       const jsonEnd = cleanedText.lastIndexOf('}');
 191 â”‚       
 192 â”‚       if (jsonStart !== -1 && jsonEnd !== -1) {
 193 â”‚         cleanedText = cleanedText.substring(jsonStart, jsonEnd + 1);
 194 â”‚       }
 195 â”‚ 
 196 â”‚       console.log('ğŸ”§ Texto limpo para parsing:', cleanedText);
 197 â”‚       
 198 â”‚       const parsedData = JSON.parse(cleanedText);
 199 â”‚       
 200 â”‚       // Validar estrutura bÃ¡sica
 201 â”‚       if (!parsedData.etapas || !Array.isArray(parsedData.etapas)) {
 202 â”‚         console.warn('âš ï¸ Estrutura invÃ¡lida, usando dados padrÃ£o');
 203 â”‚         return desenvolvimentoDataPadrao;
 204 â”‚       }
 205 â”‚ 
 206 â”‚       // Validar e corrigir cada etapa
 207 â”‚       parsedData.etapas = parsedData.etapas.map((etapa: any, index: number) => ({
 208 â”‚         id: etapa.id || `etapa_${index + 1}`,
 209 â”‚         titulo: etapa.titulo || `Etapa ${index + 1}`,
 210 â”‚         descricao: etapa.descricao || 'DescriÃ§Ã£o nÃ£o fornecida',
 211 â”‚         tipoInteracao: etapa.tipoInteracao || 'ApresentaÃ§Ã£o',
 212 â”‚         tempoEstimado: etapa.tempoEstimado || '10 minutos',
 213 â”‚         recursosUsados: Array.isArray(etapa.recursosUsados) ? etapa.recursosUsados : ['Recurso bÃ¡sico'],
 214 â”‚         ordem: etapa.ordem || index + 1,
 215 â”‚         expandida: false
 216 â”‚       }));
 217 â”‚ 
 218 â”‚       // Adicionar recursos aleatÃ³rios do School Power se necessÃ¡rio
 219 â”‚       const recursosSchoolPower = [
 220 â”‚         "Quiz Interativo", "Mapa Mental", "Organizador GrÃ¡fico", 
 221 â”‚         "Texto de Apoio", "Lista de ExercÃ­cios", "Proposta de RedaÃ§Ã£o",
 222 â”‚         "Simulado", "Jogos Educativos", "ApresentaÃ§Ã£o de Slides"
 223 â”‚       ];
 224 â”‚ 
 225 â”‚       parsedData.etapas.forEach((etapa: any) => {
 226 â”‚         if (etapa.recursosUsados.length < 3 && Math.random() > 0.5) {
 227 â”‚           const atividadeAleatoria = recursosSchoolPower[Math.floor(Math.random() * recursosSchoolPower.length)];
 228 â”‚           if (!etapa.recursosUsados.includes(atividadeAleatoria)) {
 229 â”‚             etapa.recursosUsados.push(atividadeAleatoria);
 230 â”‚           }
 231 â”‚         }
 232 â”‚       });
 233 â”‚ 
 234 â”‚       // Calcular tempo total e ajustar se necessÃ¡rio
 235 â”‚       const dadosBase: DesenvolvimentoData = {
 236 â”‚         etapas: parsedData.etapas,
 237 â”‚         tempoTotalEstimado: calcularTempoTotal(parsedData.etapas),
 238 â”‚         observacoesGerais: parsedData.observacoesGerais || "Plano de aula gerado automaticamente. Adapte conforme necessÃ¡rio para sua turma.",
 239 â”‚         sugestoesIA: Array.isArray(parsedData.sugestoesIA) ? parsedData.sugestoesIA : []
 240 â”‚       };
 241 â”‚ 
 242 â”‚       // Ajuste de tempo se necessÃ¡rio
 243 â”‚       let tempoAcumulado = 0;
 244 â”‚       dadosBase.etapas.forEach((etapa, index) => {
 245 â”‚         const tempoMatch = etapa.tempoEstimado.match(/\d+/);
 246 â”‚         const tempoEtapa = tempoMatch ? parseInt(tempoMatch[0], 10) : 0;
 247 â”‚         tempoAcumulado += tempoEtapa;
 248 â”‚         
 249 â”‚         if (index === dadosBase.etapas.length - 1) {
 250 â”‚           // Ajusta a Ãºltima etapa para fechar em 45 minutos
 251 â”‚           etapa.tempoEstimado = `${45 - tempoAcumulado + (tempoMatch ? parseInt(tempoMatch[0], 10) : 0)} minutos`;
 252 â”‚         }
 253 â”‚       });
 254 â”‚ 
 255 â”‚       console.log('âœ… Dados processados com sucesso:', dadosBase);
 256 â”‚       return dadosBase;
 257 â”‚ 
 258 â”‚     } catch (error) {
 259 â”‚       console.error('âŒ Erro ao processar resposta:', error);
 260 â”‚       console.error('ğŸ“„ Texto original:', textoResposta);
 261 â”‚       return desenvolvimentoDataPadrao;
 262 â”‚     }
 263 â”‚   }
 264 â”‚ 
 265 â”‚   static salvarEtapasDesenvolvimento(planoId: string, dados: DesenvolvimentoData): void {
 266 â”‚     try {
 267 â”‚       if (!planoId || !dados) {
 268 â”‚         console.warn('âš ï¸ ID do plano ou dados invÃ¡lidos para salvamento');
 269 â”‚         return;
 270 â”‚       }
 271 â”‚       
 272 â”‚       const key = `plano_desenvolvimento_${planoId}`;
 273 â”‚       localStorage.setItem(key, JSON.stringify(dados));
 274 â”‚       console.log('ğŸ’¾ Etapas de desenvolvimento salvas:', key);
 275 â”‚     } catch (error) {
 276 â”‚       console.error('âŒ Erro ao salvar etapas de desenvolvimento:', error);
 277 â”‚     }
 278 â”‚   }
 279 â”‚ 
 280 â”‚   static carregarEtapasDesenvolvimento(planoId: string): DesenvolvimentoData | null {
 281 â”‚     try {
 282 â”‚       if (!planoId) {
 283 â”‚         console.warn('âš ï¸ ID do plano invÃ¡lido para carregamento');
 284 â”‚         return null;
 285 â”‚       }
 286 â”‚       
 287 â”‚       const key = `plano_desenvolvimento_${planoId}`;
 288 â”‚       const dados = localStorage.getItem(key);
 289 â”‚ 
 290 â”‚       if (dados) {
 291 â”‚         const parsedData = JSON.parse(dados);
 292 â”‚         
 293 â”‚         // Validar dados carregados
 294 â”‚         if (!parsedData.etapas || !Array.isArray(parsedData.etapas)) {
 295 â”‚           console.warn('âš ï¸ Dados carregados invÃ¡lidos, usando dados padrÃ£o');
 296 â”‚           return desenvolvimentoDataPadrao;
 297 â”‚         }
 298 â”‚         
 299 â”‚         console.log('ğŸ“‚ Dados de desenvolvimento carregados:', parsedData);
 300 â”‚         return parsedData;
 301 â”‚       }
 302 â”‚     } catch (error) {
 303 â”‚       console.error('âŒ Erro ao carregar etapas de desenvolvimento:', error);
 304 â”‚     }
 305 â”‚     return null;
 306 â”‚   }
 307 â”‚ 
 308 â”‚   static limparDadosDesenvolvimento(planoId: string): void {
 309 â”‚     try {
 310 â”‚       if (!planoId) return;
 311 â”‚       
 312 â”‚       const key = `plano_desenvolvimento_${planoId}`;
 313 â”‚       localStorage.removeItem(key);
 314 â”‚       console.log('ğŸ—‘ï¸ Dados de desenvolvimento removidos:', key);
 315 â”‚     } catch (error) {
 316 â”‚       console.error('âŒ Erro ao limpar dados de desenvolvimento:', error);
 317 â”‚     }
 318 â”‚   }
 319 â”‚ 
 320 â”‚   static criarEtapaPadrao(): EtapaDesenvolvimento {
 321 â”‚     return {
 322 â”‚       id: `etapa_${Date.now()}`,
 323 â”‚       titulo: "Nova Etapa",
 324 â”‚       descricao: "DescriÃ§Ã£o da etapa de desenvolvimento",
 325 â”‚       tipoInteracao: "ApresentaÃ§Ã£o",
 326 â”‚       tempoEstimado: "10 minutos",
 327 â”‚       recursosUsados: ["Lousa", "Quiz Interativo"],
 328 â”‚       ordem: 1,
 329 â”‚       expandida: false
 330 â”‚     };
 331 â”‚   }
 332 â”‚ }
 333 â”‚ // Dados estruturados para a seÃ§Ã£o de Desenvolvimento do Plano de Aula
 334 â”‚ 
 335 â”‚ export interface EtapaDesenvolvimento {
 336 â”‚   id: string;
 337 â”‚   titulo: string;
 338 â”‚   descricao: string;
 339 â”‚   tipoInteracao: string;
 340 â”‚   tempoEstimado: string;
 341 â”‚   recursosUsados: string[];
 342 â”‚   ordem: number;
 343 â”‚   expandida: boolean;
 344 â”‚ }
 345 â”‚ 
 346 â”‚ export interface DesenvolvimentoData {
 347 â”‚   etapas: EtapaDesenvolvimento[];
 348 â”‚   observacoesGerais?: string;
 349 â”‚   metodologiaGeral?: string;
 350 â”‚   recursosComplementares?: string[];
 351 â”‚ }
 352 â”‚ 
 353 â”‚ // Dados padrÃ£o/fallback - GARANTINDO QUE SEMPRE EXISTE
 354 â”‚ export const desenvolvimentoDataPadrao: DesenvolvimentoData = {
     Â·              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Â·                          â•°â”€â”€ `desenvolvimentoDataPadrao` redefined here
 355 â”‚   etapas: [
 356 â”‚     {
 357 â”‚       id: "etapa_1",
     â•°â”€â”€â”€â”€
/home/runner/workspace/src/features/schoolpower/activities/plano-aula/sections/desenvolvimento/DesenvolvimentoData.ts:18:1
79 |  export class DesenvolvimentoGeminiService {
80 |    private static readonly GEMINI_API_KEY = import.meta.env.VITE_GEMINI_API_KEY || 'AIzaSyB0wPaEv6T0C-2_z3rOwRjlQ-HQXPPfXF8';
81 |    private static readonly GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent';
   |                         ^
82 |  
83 |    static async gerarEtapasDesenvolvimento(contextoPlano: any): Promise<DesenvolvimentoData> {