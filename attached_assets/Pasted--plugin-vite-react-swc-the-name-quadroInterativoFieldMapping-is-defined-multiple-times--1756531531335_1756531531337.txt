[plugin:vite:react-swc] Ã— the name `quadroInterativoFieldMapping` is defined multiple times
     â•­â”€[/home/runner/workspace/src/features/schoolpower/activities/quadro-interativo/fieldMapping.ts:21:1]
  21 â”‚   context: string;
  22 â”‚ }
  23 â”‚ 
  24 â”‚ export const quadroInterativoFieldMapping: Record<string, keyof QuadroInterativoFields> = {
     Â·              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Â·                            â•°â”€â”€ previous definition of `quadroInterativoFieldMapping` here
  25 â”‚   // Mapeamentos originais
  26 â”‚   'Recursos': 'recursos',
  27 â”‚   'ConteÃºdo': 'conteudo',
  28 â”‚   'Interatividade': 'interatividade',
  29 â”‚   'Design': 'design',
  30 â”‚   'Objetivo': 'objetivo',
  31 â”‚   'AvaliaÃ§Ã£o': 'avaliacao',
  32 â”‚ 
  33 â”‚   // Mapeamentos especÃ­ficos para o modal
  34 â”‚   'title': 'title',
  35 â”‚   'description': 'description',
  36 â”‚   'subject': 'subject',
  37 â”‚   'theme': 'theme',
  38 â”‚   'schoolYear': 'schoolYear',
  39 â”‚   'objectives': 'objectives',
  40 â”‚   'difficultyLevel': 'difficultyLevel',
  41 â”‚   'quadroInterativoCampoEspecifico': 'quadroInterativoCampoEspecifico',
  42 â”‚   'materials': 'materials',
  43 â”‚   'instructions': 'instructions',
  44 â”‚   'evaluation': 'evaluation',
  45 â”‚   'timeLimit': 'timeLimit',
  46 â”‚   'context': 'context',
  47 â”‚ 
  48 â”‚   // Mapeamentos alternativos para campos do Action Plan
  49 â”‚   'Disciplina / Ãrea de conhecimento': 'subject',
  50 â”‚   'Disciplina': 'subject',
  51 â”‚   'Ãrea de conhecimento': 'subject',
  52 â”‚   'Componente Curricular': 'subject',
  53 â”‚   'MatÃ©ria': 'subject',
  54 â”‚ 
  55 â”‚   'Ano / SÃ©rie': 'schoolYear',
  56 â”‚   'Ano': 'schoolYear',
  57 â”‚   'SÃ©rie': 'schoolYear',
  58 â”‚   'Ano de Escolaridade': 'schoolYear',
  59 â”‚   'PÃºblico-Alvo': 'schoolYear',
  60 â”‚ 
  61 â”‚   'Tema ou Assunto da aula': 'theme',
  62 â”‚   'Tema': 'theme',
  63 â”‚   'Assunto': 'theme',
  64 â”‚   'TÃ³pico': 'theme',
  65 â”‚   'Tema Central': 'theme',
  66 â”‚ 
  67 â”‚   'Objetivo de aprendizagem da aula': 'objectives',
  68 â”‚   'Objetivos': 'objectives',
  69 â”‚   'Objetivo Principal': 'objectives',
  70 â”‚   'Objetivos de Aprendizagem': 'objectives',
  71 â”‚ 
  72 â”‚   'NÃ­vel de Dificuldade': 'difficultyLevel',
  73 â”‚   'Dificuldade': 'difficultyLevel',
  74 â”‚   'NÃ­vel': 'difficultyLevel',
  75 â”‚   'Complexidade': 'difficultyLevel',
  76 â”‚ 
  77 â”‚   'Atividade mostrada': 'quadroInterativoCampoEspecifico',
  78 â”‚   'Atividade': 'quadroInterativoCampoEspecifico',
  79 â”‚   'Atividades': 'quadroInterativoCampoEspecifico',
  80 â”‚   'Tipo de Atividade': 'quadroInterativoCampoEspecifico',
  81 â”‚   'Recursos Interativos': 'quadroInterativoCampoEspecifico',
  82 â”‚   'Tipo de InteraÃ§Ã£o': 'quadroInterativoCampoEspecifico',
  83 â”‚ 
  84 â”‚   'Materiais': 'materials',
  85 â”‚   'Materiais NecessÃ¡rios': 'materials',
  86 â”‚   'Recursos Visuais': 'materials',
  87 â”‚ 
  88 â”‚   'InstruÃ§Ãµes': 'instructions',
  89 â”‚   'Metodologia': 'instructions',
  90 â”‚   'Como Fazer': 'instructions',
  91 â”‚   'Procedimentos': 'instructions',
  92 â”‚ 
  93 â”‚   'CritÃ©rios de AvaliaÃ§Ã£o': 'evaluation',
  94 â”‚   'CritÃ©rios': 'evaluation',
  95 â”‚   'Como Avaliar': 'evaluation',
  96 â”‚ 
  97 â”‚   'Tempo': 'timeLimit',
  98 â”‚   'DuraÃ§Ã£o': 'timeLimit',
  99 â”‚   'Tempo Estimado': 'timeLimit',
 100 â”‚   'Tempo da Atividade': 'timeLimit',
 101 â”‚ 
 102 â”‚   'Contexto': 'context',
 103 â”‚   'AplicaÃ§Ã£o': 'context',
 104 â”‚   'Onde Usar': 'context',
 105 â”‚   'Contexto de AplicaÃ§Ã£o': 'context'
 106 â”‚ };
 107 â”‚ 
 108 â”‚ // Mapeamento reverso para facilitar a busca
 109 â”‚ export const reverseQuadroInterativoFieldMapping: Record<keyof QuadroInterativoFields, string[]> = {
 110 â”‚   recursos: ['Recursos', 'Materiais', 'Materiais NecessÃ¡rios'],
 111 â”‚   conteudo: ['ConteÃºdo', 'InstruÃ§Ãµes', 'Metodologia'],
 112 â”‚   interatividade: ['Interatividade', 'Atividade mostrada', 'Recursos Interativos'],
 113 â”‚   design: ['Design', 'NÃ­vel de Dificuldade', 'Complexidade'],
 114 â”‚   objetivo: ['Objetivo', 'Objetivos', 'Objetivo de aprendizagem da aula'],
 115 â”‚   avaliacao: ['AvaliaÃ§Ã£o', 'CritÃ©rios', 'CritÃ©rios de AvaliaÃ§Ã£o'],
 116 â”‚   title: ['title', 'TÃ­tulo'],
 117 â”‚   description: ['description', 'DescriÃ§Ã£o'],
 118 â”‚   subject: ['subject', 'Disciplina', 'Disciplina / Ãrea de conhecimento'],
 119 â”‚   theme: ['theme', 'Tema', 'Tema ou Assunto da aula'],
 120 â”‚   schoolYear: ['schoolYear', 'Ano / SÃ©rie', 'Ano de Escolaridade'],
 121 â”‚   objectives: ['objectives', 'Objetivos', 'Objetivo de aprendizagem da aula'],
 122 â”‚   difficultyLevel: ['difficultyLevel', 'NÃ­vel de Dificuldade', 'Dificuldade'],
 123 â”‚   quadroInterativoCampoEspecifico: ['quadroInterativoCampoEspecifico', 'Atividade mostrada', 'Atividade', 'Tipo de InteraÃ§Ã£o'],
 124 â”‚   materials: ['materials', 'Materiais', 'Recursos'],
 125 â”‚   instructions: ['instructions', 'InstruÃ§Ãµes', 'Metodologia'],
 126 â”‚   evaluation: ['evaluation', 'AvaliaÃ§Ã£o', 'CritÃ©rios de AvaliaÃ§Ã£o'],
 127 â”‚   timeLimit: ['timeLimit', 'Tempo', 'DuraÃ§Ã£o'],
 128 â”‚   context: ['context', 'Contexto', 'AplicaÃ§Ã£o']
 129 â”‚ };
 130 â”‚ 
 131 â”‚ // FunÃ§Ã£o utilitÃ¡ria para encontrar o campo correto baseado no valor
 132 â”‚ export function findFieldByValue(value: string, targetField: keyof QuadroInterativoFields): boolean {
 133 â”‚   const possibleKeys = reverseQuadroInterativoFieldMapping[targetField] || [];
 134 â”‚   return possibleKeys.some(key => quadroInterativoFieldMapping[key] === targetField);
 135 â”‚ }
 136 â”‚ 
 137 â”‚ // FunÃ§Ã£o para validar se um campo Ã© vÃ¡lido para Quadro Interativo
 138 â”‚ export function isValidQuadroInterativoField(fieldKey: string): boolean {
 139 â”‚   return fieldKey in quadroInterativoFieldMapping;
 140 â”‚ }
 141 â”‚ 
 142 â”‚ // Campos obrigatÃ³rios para Quadro Interativo
 143 â”‚ export const requiredQuadroInterativoFields: (keyof QuadroInterativoFields)[] = [
 144 â”‚   'subject',
 145 â”‚   'schoolYear',
 146 â”‚   'theme',
 147 â”‚   'objectives',
 148 â”‚   'difficultyLevel',
 149 â”‚   'quadroInterativoCampoEspecifico'
 150 â”‚ ];
 151 â”‚ 
 152 â”‚ // FunÃ§Ã£o para validar se todos os campos obrigatÃ³rios estÃ£o preenchidos
 153 â”‚ export function validateRequiredFields(data: Partial<QuadroInterativoFields>): boolean {
 154 â”‚   return requiredQuadroInterativoFields.every(field =>
 155 â”‚     data[field] && typeof data[field] === 'string' && data[field]!.trim().length > 0
 156 â”‚   );
 157 â”‚ }
 158 â”‚ 
 159 â”‚ // Atualizar mapeamento de campos do Quadro Interativo para corresponder exatamente aos nomes dos campos
 160 â”‚ export const quadroInterativoFieldMappingUpdate: Record<keyof QuadroInterativoFields, string[]> = {
 161 â”‚   subject: ['Disciplina / Ãrea de conhecimento', 'disciplina', 'Disciplina'],
 162 â”‚   schoolYear: ['Ano / SÃ©rie', 'anoSerie', 'Ano de Escolaridade'],
 163 â”‚   theme: ['Tema ou Assunto da aula', 'tema', 'Tema'],
 164 â”‚   objectives: ['Objetivo de aprendizagem da aula', 'objetivos', 'Objetivos'],
 165 â”‚   difficultyLevel: ['NÃ­vel de Dificuldade', 'nivelDificuldade', 'dificuldade'],
 166 â”‚   quadroInterativoCampoEspecifico: ['Atividade mostrada', 'atividadeMostrada', 'quadroInterativoCampoEspecifico', 'Campo EspecÃ­fico do Quadro Interativo', 'Tipo de InteraÃ§Ã£o'],
 167 â”‚   recursos: ['Recursos', 'Materiais', 'Materiais NecessÃ¡rios'],
 168 â”‚   conteudo: ['ConteÃºdo', 'InstruÃ§Ãµes', 'Metodologia'],
 169 â”‚   interatividade: ['Interatividade', 'Atividade mostrada', 'Recursos Interativos'],
 170 â”‚   design: ['Design', 'NÃ­vel de Dificuldade', 'Complexidade'],
 171 â”‚   objetivo: ['Objetivo', 'Objetivos', 'Objetivo de aprendizagem da aula'],
 172 â”‚   avaliacao: ['AvaliaÃ§Ã£o', 'CritÃ©rios', 'CritÃ©rios de AvaliaÃ§Ã£o'],
 173 â”‚   title: ['title', 'TÃ­tulo'],
 174 â”‚   description: ['description', 'DescriÃ§Ã£o'],
 175 â”‚   materials: [
 176 â”‚     'materials',
 177 â”‚     'material',
 178 â”‚     'materiais',
 179 â”‚     'materiaisNecessarios',
 180 â”‚     'recursos',
 181 â”‚     'recursos_necessarios'
 182 â”‚   ],
 183 â”‚   instructions: ['instructions', 'InstruÃ§Ãµes', 'Metodologia'],
 184 â”‚   evaluation: ['evaluation', 'AvaliaÃ§Ã£o', 'CritÃ©rios de AvaliaÃ§Ã£o'],
 185 â”‚   timeLimit: ['timeLimit', 'Tempo', 'DuraÃ§Ã£o'],
 186 â”‚   context: ['context', 'Contexto', 'AplicaÃ§Ã£o']
 187 â”‚ };
 188 â”‚ 
 189 â”‚ // FunÃ§Ã£o para mapear dados do Action Plan para campos do formulÃ¡rio
 190 â”‚ export function mapQuadroInterativoFields(actionPlanData: any): any {
 191 â”‚   const customFields = actionPlanData.customFields || {};
 192 â”‚ 
 193 â”‚   return {
 194 â”‚     title: actionPlanData.personalizedTitle || actionPlanData.title || '',
 195 â”‚     description: actionPlanData.personalizedDescription || actionPlanData.description || '',
 196 â”‚     subject: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.subject) || 'MatemÃ¡tica',
 197 â”‚     schoolYear: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.schoolYear) || 'Ex: 6Âº Ano, 7Âº Ano, 8Âº Ano',
 198 â”‚     theme: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.theme) || actionPlanData.title || 'Ex: Substantivos e Verbos, FraÃ§Ãµes, Sistema Solar',
 199 â”‚     objectives: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.objectives) || actionPlanData.description || '',
 200 â”‚     difficultyLevel: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.difficultyLevel) || 'Ex: BÃ¡sico, IntermediÃ¡rio, AvanÃ§ado',
 201 â”‚     quadroInterativoCampoEspecifico: getFieldValue(customFields, quadroInterativoFieldMappingUpdate.quadroInterativoCampoEspecifico) || 'Ex: Jogo de arrastar e soltar, Quiz interativo, Mapa mental',
 202 â”‚     materials: normalizeMaterials(getFieldValue(customFields, ['Materiais', 'Recursos'])),
 203 â”‚     instructions: getFieldValue(customFields, ['InstruÃ§Ãµes', 'Metodologia']),
 204 â”‚     evaluation: getFieldValue(customFields, ['AvaliaÃ§Ã£o', 'CritÃ©rios de AvaliaÃ§Ã£o']),
 205 â”‚     timeLimit: getFieldValue(customFields, ['Tempo', 'DuraÃ§Ã£o']),
 206 â”‚     context: getFieldValue(customFields, ['Contexto', 'AplicaÃ§Ã£o'])
 207 â”‚   };
 208 â”‚ }
 209 â”‚ 
 210 â”‚ function getFieldValue(customFields: any, possibleKeys: string[]): string {
 211 â”‚   for (const key of possibleKeys) {
 212 â”‚     if (customFields[key]) {
 213 â”‚       return customFields[key];
 214 â”‚     }
 215 â”‚   }
 216 â”‚   return '';
 217 â”‚ }
 218 â”‚ 
 219 â”‚ /**
 220 â”‚  * Sanitiza texto para evitar problemas de JSON
 221 â”‚  */
 222 â”‚ function sanitizeText(text: string | undefined | null): string {
 223 â”‚   if (!text || typeof text !== 'string') return '';
 224 â”‚ 
 225 â”‚   return text
 226 â”‚     .replace(/[\u0000-\u001F\u007F-\u009F]/g, '') // Remove caracteres de controle
 227 â”‚     .replace(/\\/g, '\\\\')
 228 â”‚     .replace(/"/g, '\\"')
 229 â”‚     .replace(/\n/g, ' ')
 230 â”‚     .replace(/\r/g, ' ')
 231 â”‚     .replace(/\t/g, ' ')
 232 â”‚     .replace(/\s+/g, ' ')
 233 â”‚     .trim();
 234 â”‚ }
 235 â”‚ 
 236 â”‚ /**
 237 â”‚  * Valida se o valor Ã© seguro para uso
 238 â”‚  */
 239 â”‚ function isValidValue(value: any): boolean {
 240 â”‚   if (value === null || value === undefined) return false;
 241 â”‚   if (typeof value === 'string' && value.trim() === '') return false;
 242 â”‚   return true;
 243 â”‚ }
 244 â”‚ 
 245 â”‚ export function prepareQuadroInterativoDataForModal(activity: any) {
 246 â”‚   console.log('ğŸ¯ Preparando dados do Quadro Interativo para o modal:', activity);
 247 â”‚ 
 248 â”‚   try {
 249 â”‚     const customFields = activity.customFields || {};
 250 â”‚ 
 251 â”‚     // Sanitizar e validar cada campo
 252 â”‚     const safeTitle = sanitizeText(activity.personalizedTitle || activity.title);
 253 â”‚     const safeDescription = sanitizeText(activity.personalizedDescription || activity.description);
 254 â”‚ 
 255 â”‚     const formData = {
 256 â”‚       subject: isValidValue(customFields['Disciplina']) ? sanitizeText(customFields['Disciplina']) : 'MatemÃ¡tica',
 257 â”‚       schoolYear: isValidValue(customFields['Ano / SÃ©rie']) ? sanitizeText(customFields['Ano / SÃ©rie']) : 'Ex: 6Âº Ano, 7Âº Ano, 8Âº Ano',
 258 â”‚       theme: safeTitle || 'Ex: Substantivos e Verbos, FraÃ§Ãµes, Sistema Solar',
 259 â”‚       objectives: isValidValue(customFields['Objetivos de Aprendizagem']) ? sanitizeText(customFields['Objetivos de Aprendizagem']) : '',
 260 â”‚       difficultyLevel: isValidValue(customFields['NÃ­vel de Dificuldade']) ? sanitizeText(customFields['NÃ­vel de Dificuldade']) : 'Ex: BÃ¡sico, IntermediÃ¡rio, AvanÃ§ado',
 261 â”‚       quadroInterativoCampoEspecifico: isValidValue(customFields['Tipo de InteraÃ§Ã£o']) ? sanitizeText(customFields['Tipo de InteraÃ§Ã£o']) : 'Ex: Jogo de arrastar e soltar, Quiz interativo, Mapa mental',
 262 â”‚       bnccCompetencias: isValidValue(customFields['BNCC / CompetÃªncias']) ? sanitizeText(customFields['BNCC / CompetÃªncias']) : '',
 263 â”‚       publico: isValidValue(customFields['PÃºblico-alvo']) ? sanitizeText(customFields['PÃºblico-alvo']) : '',
 264 â”‚       materials: normalizeMaterials(customFields['Materiais'] || customFields['Recursos'])
 265 â”‚     };
 266 â”‚ 
 267 â”‚     // Validar que nenhum campo contÃ©m valores problemÃ¡ticos
 268 â”‚     Object.keys(formData).forEach(key => {
 269 â”‚       if (typeof formData[key] === 'string' && formData[key].includes('undefined')) {
 270 â”‚         formData[key] = '';
 271 â”‚       }
 272 â”‚     });
 273 â”‚ 
 274 â”‚     console.log('âœ… FormData do Quadro Interativo preparado e validado:', formData);
 275 â”‚     return formData;
 276 â”‚ 
 277 â”‚   } catch (error) {
 278 â”‚     console.error('âŒ Erro ao preparar dados do Quadro Interativo:', error);
 279 â”‚ 
 280 â”‚     // Retornar dados padrÃ£o seguros em caso de erro
 281 â”‚     return {
 282 â”‚       subject: 'MatemÃ¡tica',
 283 â”‚       schoolYear: 'Ex: 6Âº Ano, 7Âº Ano, 8Âº Ano',
 284 â”‚       theme: 'Ex: Substantivos e Verbos, FraÃ§Ãµes, Sistema Solar',
 285 â”‚       objectives: '',
 286 â”‚       difficultyLevel: 'Ex: BÃ¡sico, IntermediÃ¡rio, AvanÃ§ado',
 287 â”‚       quadroInterativoCampoEspecifico: 'Ex: Jogo de arrastar e soltar, Quiz interativo, Mapa mental',
 288 â”‚       bnccCompetencias: '',
 289 â”‚       publico: '',
 290 â”‚       materials: ''
 291 â”‚     };
 292 â”‚   }
 293 â”‚ }
 294 â”‚ 
 295 â”‚ // FunÃ§Ã£o para normalizar o campo materials
 296 â”‚ export const normalizeMaterials = (materials: any): string => {
 297 â”‚   if (!materials) return '';
 298 â”‚ 
 299 â”‚   if (typeof materials === 'string') {
 300 â”‚     return materials;
 301 â”‚   }
 302 â”‚ 
 303 â”‚   if (Array.isArray(materials)) {
 304 â”‚     return materials.map(item => {
 305 â”‚       if (typeof item === 'string') return item;
 306 â”‚       if (typeof item === 'object' && item !== null) {
 307 â”‚         // Se for um objeto, tentar extrair propriedades relevantes
 308 â”‚         if (item.nome || item.name) return String(item.nome || item.name);
 309 â”‚         if (item.titulo || item.title) return String(item.titulo || item.title);
 310 â”‚         if (item.descricao || item.description) return String(item.descricao || item.description);
 311 â”‚         return JSON.stringify(item);
 312 â”‚       }
 313 â”‚       return String(item);
 314 â”‚     }).filter(item => item.trim()).join('\n');
 315 â”‚   }
 316 â”‚ 
 317 â”‚   if (typeof materials === 'object' && materials !== null) {
 318 â”‚     // Se for um objeto, tentar extrair propriedades relevantes
 319 â”‚     if (materials.nome || materials.name) return String(materials.nome || materials.name);
 320 â”‚     if (materials.titulo || materials.title) return String(materials.titulo || materials.title);
 321 â”‚     if (materials.descricao || materials.description) return String(materials.descricao || materials.description);
 322 â”‚     return JSON.stringify(materials);
 323 â”‚   }
 324 â”‚ 
 325 â”‚   return String(materials);
 326 â”‚ };
 327 â”‚ /**
 328 â”‚  * Mapeamento de campos para Quadro Interativo
 329 â”‚  */
 330 â”‚ export const quadroInterativoFieldMapping = {
     Â·              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Â·                            â•°â”€â”€ `quadroInterativoFieldMapping` redefined here
 331 â”‚   'Disciplina / Ãrea de conhecimento': 'subject',
 332 â”‚   'Ano / SÃ©rie': 'schoolYear', 
 333 â”‚   'Tema ou Assunto da aula': 'theme',
     â•°â”€â”€â”€â”€
/home/runner/workspace/src/features/schoolpower/activities/quadro-interativo/fieldMapping.ts:21:1
137|  // FunÃ§Ã£o para validar se um campo Ã© vÃ¡lido para Quadro Interativo
138|  export function isValidQuadroInterativoField(fieldKey: string): boolean {
139|    return fieldKey in quadroInterativoFieldMapping;
   |          ^
140|  }
141|
Click outside, press Esc key, or fix the code to dismiss.