ğŸ¯ PROMPT OTIMIZADO - SISTEMA DE REFLEXÃƒO NARRATIVA PÃ“S-EXECUÃ‡ÃƒO
CONTEXTO ESTRATÃ‰GICO
VocÃª estÃ¡ implementando um componente crÃ­tico de transparÃªncia algorÃ­tmica e human-AI interaction design: o Sistema de ReflexÃ£o Narrativa. Este nÃ£o Ã© apenas um "texto de resumo" - Ã© a voz da IA explicando seu prÃ³prio raciocÃ­nio, criando trust e understanding.

Aja com a mentalidade de:

Don Norman (design centrado no usuÃ¡rio, affordances claras)

Bret Victor (sistemas que explicam a si mesmos)

Claude Shannon (teoria da informaÃ§Ã£o - sÃ­ntese eficiente)

Edward Tufte (visualizaÃ§Ã£o de dados e narrativa)

VISÃƒO DO COMPONENTE
Analisando a imagem de referÃªncia e o contexto do card de desenvolvimento, vocÃª precisa criar um momento de pausa reflexiva entre objetivos. Esse momento deve:

FunÃ§Ã£o Cognitiva
text
[Objetivo 1: Escolher atividades]
   â†“ Capability 1: âœ“ Verificar disponÃ­veis
   â†“ Capability 2: âœ“ Analisar desempenho
   â†“ Capability 3: âœ“ Decidir estrategicamente
   
   âš¡ MOMENTO DE REFLEXÃƒO âš¡
   "Encontrei 47 atividades disponÃ­veis. Analisei o desempenho 
   da turma 7B (mÃ©dia 6.5 em MatemÃ¡tica, gap em Ãlgebra). 
   Decidi criar 3 atividades focadas em equaÃ§Ãµes, priorizando 
   progressÃ£o didÃ¡tica do bÃ¡sico ao avanÃ§ado."
   
[Objetivo 2: Criar atividades personalizadas]
   â†“ ...
REQUISITOS FUNCIONAIS CRÃTICOS
1. INTELIGÃŠNCIA DE SÃNTESE
A narrativa NÃƒO pode ser:
âŒ Um log tÃ©cnico: "Executei funÃ§Ã£o X com parÃ¢metros Y"
âŒ RepetiÃ§Ã£o do Ã³bvio: "Completei todas as capabilities"
âŒ Texto genÃ©rico: "Finalizei esta etapa com sucesso"

A narrativa DEVE ser:
âœ… Contextual: Mencionar descobertas especÃ­ficas desta execuÃ§Ã£o
âœ… AcionÃ¡vel: Indicar decisÃµes tomadas e por quÃª
âœ… Conectada: Relacionar com objetivo macro do usuÃ¡rio
âœ… Humana: Tom conversacional, nÃ£o robÃ³tico

2. ARQUITETURA DE DADOS
VocÃª precisa capturar metadados semÃ¢nticos durante execuÃ§Ã£o das capabilities:

Pergunta arquitetural que vocÃª deve responder:

Como cada capability vai "devolver" informaÃ§Ã£o para sÃ­ntese?

Onde armazenar esses insights temporariamente?

Como agregar mÃºltiplos outputs em narrativa coesa?

LLM processa sÃ­ntese ou Ã© template-based?

DecisÃµes de design:

Cada capability retorna { result: any, insight: string }?

State management acumula insights em array?

Prompt final de sÃ­ntese envia contexto completo para LLM?

Sistema de templates com slots dinÃ¢micos?

3. TIMING E RENDERIZAÃ‡ÃƒO
Quando exatamente a reflexÃ£o aparece?

ApÃ³s Ãºltima capability marcar completed?

Delay proposital para criar suspense (1-2s)?

AnimaÃ§Ã£o de "pensando..." antes de mostrar texto?

Typing animation (caractere por caractere)?

Onde visualmente a reflexÃ£o aparece?

Entre o Ãºltimo capability card e prÃ³ximo objetivo?

Dentro de um card especial com estilo diferenciado?

Overlay modal que requer acknowledgment do usuÃ¡rio?

Side panel que expande com detalhes?

REQUISITOS TÃ‰CNICOS (Arquitetura aberta)
Sistema de Coleta de Insights
Durante execuÃ§Ã£o de cada capability, vocÃª precisa implementar um pipeline de extraÃ§Ã£o de conhecimento:

PadrÃµes a considerar:

Observer Pattern: Capabilities emitem eventos com insights

Accumulator Pattern: Reducer agrega insights progressivamente

Chain of Responsibility: Cada capability enriquece contexto

Mediator Pattern: Orquestrador central coleta e sintetiza

Exemplo conceitual (vocÃª decide implementaÃ§Ã£o):

typescript
// Capability retorna mais que apenas success/error
interface CapabilityResult {
  status: 'success' | 'error';
  data: any;
  insights: {
    discovered?: string[];    // "Encontrei X atividades"
    decided?: string[];       // "Escolhi Y baseado em Z"
    learned?: string[];       // "Identifiquei padrÃ£o P"
    focused?: string[];       // "Priorizei aspecto A"
  };
}
Sistema de GeraÃ§Ã£o de Narrativa
VocÃª precisa decidir entre 3 abordagens:

Abordagem 1: LLM-Based Synthesis (mais inteligente, mais lento)

Enviar contexto completo + insights para LLM

Prompt de sÃ­ntese: "Resuma em 2-3 frases o que foi feito"

Vantagem: Narrativa natural e contextual

Desvantagem: LatÃªncia, custo de API

Abordagem 2: Template-Based (rÃ¡pido, menos flexÃ­vel)

Templates prÃ©-definidos por tipo de objetivo

Slots preenchidos com dados reais

Vantagem: InstantÃ¢neo, previsÃ­vel

Desvantagem: Pode soar robÃ³tico

Abordagem 3: Hybrid (melhor dos dois mundos)

Templates com estrutura, LLM para detalhes

Reduz latÃªncia mas mantÃ©m naturalidade

Vantagem: Balanceado

Desvantagem: Complexidade de implementaÃ§Ã£o

VocÃª deve escolher baseado em:

Performance requirements

Budget de API calls

Qualidade de UX desejada

Sistema de ApresentaÃ§Ã£o
DecisÃµes de UI que vocÃª deve tomar:

Estilo Visual:

Card diferenciado (cor, borda, Ã­cone)?

InspiraÃ§Ã£o em "callout" ou "aside" do design systems?

Ãcone representativo: ğŸ’¡ (insight), ğŸ¯ (decisÃ£o), ğŸ“Š (dados)?

Tipografia:

Fonte diferente para destacar (italic, weight)?

Tamanho ligeiramente maior/menor?

Cor de texto (accent color vs neutral)?

AnimaÃ§Ãµes:

Fade in suave?

Slide from bottom?

Typing effect (como ChatGPT)?

Highlight/pulse para chamar atenÃ§Ã£o?

Interatividade:

Apenas informativo (read-only)?

Expandable para ver detalhes tÃ©cnicos?

Copy to clipboard?

BotÃ£o "Continuar" para avanÃ§ar manualmente?

PRINCÃPIOS DE DESIGN
1. Information Scent (Aroma de InformaÃ§Ã£o)
UsuÃ¡rio deve instantaneamente entender que este Ã© um momento de sÃ­ntese, nÃ£o uma nova capability ou erro.

2. Cognitive Closure
Antes de prosseguir, usuÃ¡rio precisa de fechamento mental da etapa anterior. A reflexÃ£o oferece isso.

3. Progressive Disclosure
ReflexÃ£o bÃ¡sica visÃ­vel, detalhes tÃ©cnicos colapsados. UsuÃ¡rio avanÃ§ado pode expandir.

4. Conversational UI
Tom deve ser de um assistente explicando raciocÃ­nio, nÃ£o de sistema reportando log.

DESAFIOS TÃ‰CNICOS QUE VOCÃŠ DEVE RESOLVER
Desafio 1: LatÃªncia PerceptÃ­vel
Se usar LLM para sÃ­ntese:

Como evitar que usuÃ¡rio espere 3-5s entre etapas?

Loading state: "Refletindo sobre resultados..."?

Pre-fetch: ComeÃ§ar sÃ­ntese antes de Ãºltima capability terminar?

Cache: Reusar padrÃµes de sÃ­ntese similares?

Desafio 2: Contexto Suficiente
Como garantir que narrativa seja especÃ­fica e nÃ£o genÃ©rica?

Passar IDs de dados (atividades escolhidas, turma analisada)?

Incluir nÃºmeros concretos (47 atividades, mÃ©dia 6.5)?

Mencionar nomes reais (turma 7B, disciplina MatemÃ¡tica)?

Desafio 3: ProgressÃ£o de Estado
Como controlar que prÃ³ximo objetivo sÃ³ apareÃ§a apÃ³s reflexÃ£o ser lida?

Auto-advance apÃ³s N segundos?

BotÃ£o "Continuar" explÃ­cito?

Scroll detection (usuÃ¡rio chegou ao fim da reflexÃ£o)?

Eye-tracking simulado via tempo na tela?

Desafio 4: PersonalizaÃ§Ã£o de Tom
Como adaptar narrativa ao contexto emocional?

Sucesso total: Tom celebratÃ³rio

Sucesso parcial: Tom cauteloso

Desafio encontrado: Tom explicativo

Erro recuperado: Tom tranquilizador

INTEGRAÃ‡ÃƒO COM SISTEMA EXISTENTE
ModificaÃ§Ãµes NecessÃ¡rias nas Capabilities
VocÃª precisa retrofitar capabilities existentes para retornarem insights. Considere:

Pattern: Decorator/Wrapper

typescript
// Envolver capabilities existentes sem modificÃ¡-las
function withInsightsCapture(capability) {
  return async (...args) => {
    const result = await capability(...args);
    const insights = extractInsights(result);
    return { result, insights };
  };
}
Pattern: Event Emission

typescript
// Capabilities emitem eventos de insight
capability.on('insight:discovered', (data) => {
  insightCollector.add({ type: 'discovery', ...data });
});
IntegraÃ§Ã£o com ExecutionCard
Seu componente de reflexÃ£o precisa se comunicar com ExecutionCard:

Eventos a escutar:

objective:all_capabilities_completed

reflection:requested

reflection:insights_ready

Eventos a emitir:

reflection:started

reflection:completed

reflection:acknowledged (usuÃ¡rio leu)

EXEMPLOS DE NARRATIVAS (InspiraÃ§Ã£o, nÃ£o copiar)
Objetivo: Escolher atividades
text
ğŸ’¡ "Analisei 47 atividades disponÃ­veis no catÃ¡logo. A turma 7B 
estÃ¡ com mÃ©dia 6.5 em MatemÃ¡tica, apresentando gap significativo 
em Ãlgebra (especialmente equaÃ§Ãµes do 2Âº grau). 

Decidi criar 3 atividades personalizadas: 
1. Flash Cards (revisÃ£o de conceitos bÃ¡sicos)
2. Lista de ExercÃ­cios (prÃ¡tica progressiva)
3. Quiz Gamificado (fixaÃ§Ã£o e motivaÃ§Ã£o)

Essa progressÃ£o garante base sÃ³lida antes de avanÃ§ar."
Objetivo: Criar atividades personalizadas
text
ğŸ¯ "ConstruÃ­ 3 atividades totalmente personalizadas para a turma 7B:

â€¢ Flash Cards 'Ãlgebra Fundamental' (20 cards)
â€¢ Lista 'EquaÃ§Ãµes na PrÃ¡tica' (15 exercÃ­cios gradativos)
â€¢ Quiz 'Desafio MatemÃ¡tico' (10 questÃµes gamificadas)

Todas alinhadas com BNCC e adaptadas ao nÃ­vel intermediÃ¡rio da turma. 
Tempo estimado de aplicaÃ§Ã£o: 3 aulas de 50 minutos."
Objetivo: Organizar em aulas prontas
text
ğŸ“š "Organizei as 3 atividades em sequÃªncia didÃ¡tica de 3 aulas:

Aula 1: DiagnÃ³stico + Flash Cards (revisÃ£o ativa)
Aula 2: Lista de ExercÃ­cios (prÃ¡tica guiada)
Aula 3: Quiz Gamificado + AvaliaÃ§Ã£o formativa

Cada aula tem objetivos claros, recursos necessÃ¡rios e sugestÃµes 
de adaptaÃ§Ã£o para alunos com dificuldade ou altas habilidades."
CRITÃ‰RIOS DE QUALIDADE
ObrigatÃ³rio (Breaking)
âœ… ReflexÃ£o aparece SEMPRE apÃ³s objetivos completarem

âœ… Texto Ã© contextual (menciona dados reais)

âœ… Tom conversacional (nÃ£o robÃ³tico)

âœ… Visualmente diferenciado de capabilities

âœ… NÃ£o bloqueia fluxo indefinidamente

Esperado (Altamente recomendado)
â­ Narrativa inteligente (LLM-based ou hÃ­brida)

â­ AnimaÃ§Ã£o de aparecer suave

â­ Typing effect ou loading state

â­ Menciona nÃºmeros/nomes especÃ­ficos

â­ Adapta tom ao resultado (sucesso/erro)

DesejÃ¡vel (Nice to have)
ğŸ’ Expandable para detalhes tÃ©cnicos

ğŸ’ Copy to clipboard da reflexÃ£o

ğŸ’ Resumo executivo + detalhes opcionais

ğŸ’ Timeline visual do que foi feito

ğŸ’ Links para resultados criados

PADRÃ•ES DE CÃ“DIGO (Conceitos, nÃ£o implementaÃ§Ã£o)
Pattern: Strategy para SÃ­ntese
typescript
interface ReflectionStrategy {
  synthesize(insights: Insights[]): Promise<string>;
}

class LLMReflectionStrategy implements ReflectionStrategy {
  // Usa LLM para narrativa natural
}

class TemplateReflectionStrategy implements ReflectionStrategy {
  // Usa templates prÃ©-definidos
}

class HybridReflectionStrategy implements ReflectionStrategy {
  // Combina template + LLM para detalhes
}
Pattern: Builder para Narrativa
typescript
class ReflectionBuilder {
  private insights: Insights[] = [];
  
  addDiscovery(text: string) { ... }
  addDecision(text: string) { ... }
  addFocus(text: string) { ... }
  
  build(): Reflection { ... }
}
Pattern: Observer para Coleta
typescript
class InsightCollector {
  private observers: Observer[] = [];
  
  subscribe(capability: Capability) {
    capability.on('insight', (insight) => {
      this.notify(insight);
    });
  }
  
  getAllInsights(): Insights[] { ... }
}
TESTES E VALIDAÃ‡ÃƒO
CenÃ¡rios de Teste ObrigatÃ³rios
Teste 1: ReflexÃ£o com Dados Reais

text
Executar objetivo "Escolher atividades"
Verificar se reflexÃ£o menciona:
- [ ] NÃºmero de atividades encontradas
- [ ] Nome da turma especÃ­fica
- [ ] DecisÃ£o de quantas/quais criar
- [ ] Justificativa pedagÃ³gica
Teste 2: ReflexÃ£o em Caso de Erro

text
ForÃ§ar erro em uma capability
Verificar se reflexÃ£o:
- [ ] NÃ£o aparece se objetivo nÃ£o completou
- [ ] OU aparece explicando o que foi feito atÃ© erro
- [ ] Tom apropriado (nÃ£o celebratÃ³rio)
Teste 3: Performance

text
Medir tempo entre:
- Ãšltima capability completar
- ReflexÃ£o aparecer na tela
- [ ] < 3 segundos (aceitÃ¡vel)
- [ ] < 1 segundo (ideal)
Teste 4: Narrativa NÃ£o-GenÃ©rica

text
Executar mesmo objetivo 3x com dados diferentes
Verificar se reflexÃµes sÃ£o:
- [ ] Ãšnicas (nÃ£o idÃªnticas)
- [ ] EspecÃ­ficas (mencionam dados reais)
- [ ] Contextuais (relacionadas ao objetivo)
DECISÃ•ES ARQUITETURAIS QUE SÃƒO SUAS
Eu NÃƒO vou te dizer:

Qual approach usar (LLM/Template/Hybrid)

Estrutura exata de dados

Componente React especÃ­fico

Prompt exato para LLM

Onde armazenar insights temporÃ¡rios

VocÃª DEVE decidir baseado em:

Trade-offs de performance vs qualidade

Complexidade vs manutenibilidade

Budget de API calls

ExperiÃªncia de usuÃ¡rio desejada

INSPIRAÃ‡Ã•ES DE UX (Estudar, nÃ£o copiar)
Sistemas que fazem isso bem:
GitHub Copilot: Explica sugestÃµes de cÃ³digo

Notion AI: Resumos de documentos longos

Perplexity: "Resposta focada em..." antes de resultados

Claude/ChatGPT: Pensamento em voz alta (chain-of-thought)

Elementos visuais a estudar:
Callout boxes (Bootstrap, Tailwind)

Aside elements (HTML5 semantic)

Notification cards (Material Design)

Info panels (Apple HIG)

RED FLAGS (Evite absolutamente)
âŒ NÃƒO fazer reflexÃ£o genÃ©rica ("Etapa concluÃ­da com sucesso")
âŒ NÃƒO bloquear usuÃ¡rio indefinidamente esperando sÃ­ntese
âŒ NÃƒO mostrar logs tÃ©cnicos ao invÃ©s de narrativa humana
âŒ NÃƒO repetir informaÃ§Ã£o jÃ¡ visÃ­vel nas capabilities
âŒ NÃƒO usar tom robÃ³tico ou corporativo
âŒ NÃƒO fazer reflexÃ£o sem dados contextuais reais
âŒ NÃƒO esquecer de testar com mÃºltiplos objetivos diferentes

CHECKLIST FINAL
Antes de considerar COMPLETO:

 ReflexÃ£o aparece apÃ³s cada objetivo completar

 Texto menciona dados especÃ­ficos (nÃºmeros, nomes)

 Tom Ã© conversacional e apropriado

 Visualmente distinto de capabilities

 Performance aceitÃ¡vel (< 3s de latÃªncia)

 Funciona com diferentes tipos de objetivos

 Adapta-se a casos de sucesso/erro

 NÃ£o bloqueia fluxo indefinidamente

 Testado com dados reais

 Code review de legibilidade

RESULTADO ESPERADO
Quando completo, o usuÃ¡rio deve sentir que a IA estÃ¡ explicando seu raciocÃ­nio de forma clara e transparente. NÃ£o Ã© apenas "task completed", mas sim "aqui estÃ¡ o que eu pensei, descobri e decidi fazer".

A reflexÃ£o transforma execuÃ§Ã£o opaca em processo transparente e confiÃ¡vel.

MINDSET OBRIGATÃ“RIO
Narrativa > Log: VocÃª estÃ¡ contando uma histÃ³ria, nÃ£o reportando status

EspecÃ­fico > GenÃ©rico: Mencione dados reais, nÃ£o placeholders

Contexto > Isolamento: Relacione com objetivo macro do usuÃ¡rio

Humano > RobÃ³tico: Escreva como um assistente humano explicaria

AÃ§Ã£o > DescriÃ§Ã£o: Foque em decisÃµes tomadas, nÃ£o apenas tarefas feitas

ğŸš€ VocÃª tem a visÃ£o estratÃ©gica. Arquitetura, implementaÃ§Ã£o e tom narrativo sÃ£o SEUS. BUILD TRANSPARENCY THROUGH INTELLIGENT REFLECTION.